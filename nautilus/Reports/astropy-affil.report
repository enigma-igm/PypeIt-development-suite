PypeIt Unit Tests Results:
-------------------------
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.5, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 -- /root/miniconda3/bin/python
cachedir: .pytest_cache
hypothesis profile 'default' -> database=DirectoryBasedExampleDatabase('/tmp/REDUX_OUT/.hypothesis/examples')
rootdir: /PypeIt, configfile: setup.cfg
plugins: hypothesis-6.14.2, arraydiff-0.3, astropy-header-0.1.2, cov-2.12.1, doctestplus-0.10.0, filter-subpackage-0.1.1, openfiles-0.5.0, remotedata-0.3.2
[1mcollecting ... [0mcollected 201 items

../../PypeIt/pypeit/tests/test_alignments.py::test_alignments [32mPASSED[0m[33m     [  0%][0m
../../PypeIt/pypeit/tests/test_arc.py::test_detect_lines [32mPASSED[0m[33m          [  0%][0m
../../PypeIt/pypeit/tests/test_archive.py::test_archive_meta [32mPASSED[0m[33m      [  1%][0m
../../PypeIt/pypeit/tests/test_archive.py::test_archive_dir [32mPASSED[0m[33m       [  1%][0m
../../PypeIt/pypeit/tests/test_arcimage.py::test_init [32mPASSED[0m[33m             [  2%][0m
../../PypeIt/pypeit/tests/test_arcimage.py::test_master_io [32mPASSED[0m[33m        [  2%][0m
../../PypeIt/pypeit/tests/test_bitmask.py::test_new [32mPASSED[0m[33m               [  3%][0m
../../PypeIt/pypeit/tests/test_bitmask.py::test_flagging [32mPASSED[0m[33m          [  3%][0m
../../PypeIt/pypeit/tests/test_bitmask.py::test_hdr_io [32mPASSED[0m[33m            [  4%][0m
../../PypeIt/pypeit/tests/test_bitmask.py::test_wrong_bits [32mPASSED[0m[33m        [  4%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_model_versions_time [32mPASSED[0m[33m [  5%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_model_versions [32mPASSED[0m[33m    [  5%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_intrv_versions_time [32mPASSED[0m[33m [  6%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_intrv_versions [32mPASSED[0m[33m    [  6%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_solution_array_versions_time [32mPASSED[0m[33m [  7%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_solution_array_versions [32mPASSED[0m[33m [  7%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_cholesky_band_versions_time [32mPASSED[0m[33m [  8%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_cholesky_band_versions [32mPASSED[0m[33m [  8%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_cholesky_solve_versions_time [32mPASSED[0m[33m [  9%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_cholesky_solve_versions [32mPASSED[0m[33m [  9%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_bsplinetodict [32mPASSED[0m[33m     [ 10%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_profile_spec [32mPASSED[0m[33m      [ 10%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_io [32mPASSED[0m[33m                [ 11%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_profile_spat [32mPASSED[0m[33m      [ 11%][0m
../../PypeIt/pypeit/tests/test_bspline.py::test_profile_twod [32mPASSED[0m[33m      [ 12%][0m
../../PypeIt/pypeit/tests/test_calibrations.py::test_instantiate [32mPASSED[0m[33m  [ 12%][0m
../../PypeIt/pypeit/tests/test_calibrations.py::test_bias [32mPASSED[0m[33m         [ 13%][0m
../../PypeIt/pypeit/tests/test_calibrations.py::test_arc [32mPASSED[0m[33m          [ 13%][0m
../../PypeIt/pypeit/tests/test_calibrations.py::test_tiltimg [32mPASSED[0m[33m      [ 14%][0m
../../PypeIt/pypeit/tests/test_calibrations.py::test_bpm [32mPASSED[0m[33m          [ 14%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_group_spectra_by_radec [32mPASSED[0m[33m [ 15%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_group_spectra_by_pixel [32mPASSED[0m[33m [ 15%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_config_key_match [32mPASSED[0m[33m [ 16%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_build_coadd_file_name [32mPASSED[0m[33m [ 16%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_find_slits_to_exclude [32mPASSED[0m[33m [ 17%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_exclude_source_objects [32mPASSED[0m[33m [ 17%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_find_spec2d_from_spec1d [32mPASSED[0m[33m [ 18%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_get_report_metadata [32mPASSED[0m[33m [ 18%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_flux [32mPASSED[0m[33m           [ 19%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_coadd [32mPASSED[0m[33m          [ 19%][0m
../../PypeIt/pypeit/tests/test_collate_1d.py::test_refframe_correction [32mPASSED[0m[33m [ 20%][0m
../../PypeIt/pypeit/tests/test_coremeta.py::test_meta [32mPASSED[0m[33m             [ 20%][0m
../../PypeIt/pypeit/tests/test_datacontainer.py::test_single_element_array [32mPASSED[0m[33m [ 21%][0m
../../PypeIt/pypeit/tests/test_datacontainer.py::test_basic [32mPASSED[0m[33m       [ 21%][0m
../../PypeIt/pypeit/tests/test_datacontainer.py::test_case [32mPASSED[0m[33m        [ 22%][0m
../../PypeIt/pypeit/tests/test_datacontainer.py::test_image [32mPASSED[0m[33m       [ 22%][0m
../../PypeIt/pypeit/tests/test_datacontainer.py::test_table [32mPASSED[0m[33m       [ 23%][0m
../../PypeIt/pypeit/tests/test_datacontainer.py::test_mixed [32mPASSED[0m[33m       [ 23%][0m
../../PypeIt/pypeit/tests/test_datacontainer.py::test_init [32mPASSED[0m[33m        [ 24%][0m
../../PypeIt/pypeit/tests/test_detector.py::test_init [32mPASSED[0m[33m             [ 24%][0m
../../PypeIt/pypeit/tests/test_detector.py::test_name [32mPASSED[0m[33m             [ 25%][0m
../../PypeIt/pypeit/tests/test_detector.py::test_bundle [32mPASSED[0m[33m           [ 25%][0m
../../PypeIt/pypeit/tests/test_detector.py::test_io [32mPASSED[0m[33m               [ 26%][0m
../../PypeIt/pypeit/tests/test_display.py::test_plugin [32mPASSED[0m[33m            [ 26%][0m
../../PypeIt/pypeit/tests/test_fitting.py::test_pypeitfit [32mPASSED[0m[33m         [ 27%][0m
../../PypeIt/pypeit/tests/test_fitting.py::test_polynomial [32mPASSED[0m[33m        [ 27%][0m
../../PypeIt/pypeit/tests/test_fitting.py::test_legendre [32mPASSED[0m[33m          [ 28%][0m
../../PypeIt/pypeit/tests/test_fitting.py::test_robust_fit [32mPASSED[0m[33m        [ 28%][0m
../../PypeIt/pypeit/tests/test_flatfield.py::test_flatimages [32mPASSED[0m[33m      [ 29%][0m
../../PypeIt/pypeit/tests/test_flatfield.py::test_fit_det_response [32mPASSED[0m[33m [ 29%][0m
../../PypeIt/pypeit/tests/test_flexure.py::test_flex_shift [31mFAILED[0m[31m        [ 30%][0m
../../PypeIt/pypeit/tests/test_flexure.py::test_flex_image [32mPASSED[0m[31m        [ 30%][0m
../../PypeIt/pypeit/tests/test_flux.py::test_blackbody [32mPASSED[0m[31m            [ 31%][0m
../../PypeIt/pypeit/tests/test_flux.py::test_find_standard [32mPASSED[0m[31m        [ 31%][0m
../../PypeIt/pypeit/tests/test_flux.py::test_load_extinction [32mPASSED[0m[31m      [ 32%][0m
../../PypeIt/pypeit/tests/test_flux.py::test_extinction_correction [32mPASSED[0m[31m [ 32%][0m
../../PypeIt/pypeit/tests/test_flux.py::test_filter_scale [32mPASSED[0m[31m         [ 33%][0m
../../PypeIt/pypeit/tests/test_fluxspec.py::test_input_flux_file [32mPASSED[0m[31m  [ 33%][0m
../../PypeIt/pypeit/tests/test_fluxspec.py::test_flux_calib [32mPASSED[0m[31m       [ 34%][0m
../../PypeIt/pypeit/tests/test_fluxspec.py::test_extinction_correction_uvis [32mPASSED[0m[31m [ 34%][0m
../../PypeIt/pypeit/tests/test_fluxspec.py::test_extinction_correction_ir [32mPASSED[0m[31m [ 35%][0m
../../PypeIt/pypeit/tests/test_history.py::test_history_header_access [32mPASSED[0m[31m [ 35%][0m
../../PypeIt/pypeit/tests/test_history.py::test_write_and_append_history [32mPASSED[0m[31m [ 36%][0m
../../PypeIt/pypeit/tests/test_history.py::test_add_reduce [32mPASSED[0m[31m        [ 36%][0m
../../PypeIt/pypeit/tests/test_history.py::test_add_coadd1d [32mPASSED[0m[31m       [ 37%][0m
../../PypeIt/pypeit/tests/test_manual.py::test_instantiate [32mPASSED[0m[31m        [ 37%][0m
../../PypeIt/pypeit/tests/test_manual.py::test_dict_for_obj [32mPASSED[0m[31m       [ 38%][0m
../../PypeIt/pypeit/tests/test_masterframe.py::test_masterframe_methods [32mPASSED[0m[31m [ 38%][0m
../../PypeIt/pypeit/tests/test_match.py::test_frame_selection [32mPASSED[0m[31m     [ 39%][0m
../../PypeIt/pypeit/tests/test_match.py::test_calibration_groups [32mPASSED[0m[31m  [ 39%][0m
../../PypeIt/pypeit/tests/test_match.py::test_instr_setup [32mPASSED[0m[31m         [ 40%][0m
../../PypeIt/pypeit/tests/test_match.py::test_exptime [32mPASSED[0m[31m             [ 40%][0m
../../PypeIt/pypeit/tests/test_metadata.py::test_read_combid [32mPASSED[0m[31m      [ 41%][0m
../../PypeIt/pypeit/tests/test_metadata.py::test_nirspec_lamps [32mPASSED[0m[31m    [ 41%][0m
../../PypeIt/pypeit/tests/test_moment.py::test_basics [32mPASSED[0m[31m             [ 42%][0m
../../PypeIt/pypeit/tests/test_moment.py::test_bounded [32mPASSED[0m[31m            [ 42%][0m
../../PypeIt/pypeit/tests/test_moment.py::test_center_uniform [32mPASSED[0m[31m     [ 43%][0m
../../PypeIt/pypeit/tests/test_moment.py::test_center_gaussian [32mPASSED[0m[31m    [ 43%][0m
../../PypeIt/pypeit/tests/test_moment.py::test_extract [32mPASSED[0m[31m            [ 44%][0m
../../PypeIt/pypeit/tests/test_moment.py::test_width [32mPASSED[0m[31m              [ 44%][0m
../../PypeIt/pypeit/tests/test_msgs.py::test_log_write [32mPASSED[0m[31m            [ 45%][0m
../../PypeIt/pypeit/tests/test_msgs.py::test_msgs [32mPASSED[0m[31m                 [ 45%][0m
../../PypeIt/pypeit/tests/test_parse.py::test_parse_binning [32mPASSED[0m[31m       [ 46%][0m
../../PypeIt/pypeit/tests/test_parse.py::test_sec2slice [32mPASSED[0m[31m           [ 46%][0m
../../PypeIt/pypeit/tests/test_parse.py::test_str2list [32mPASSED[0m[31m            [ 47%][0m
../../PypeIt/pypeit/tests/test_pca.py::test_build [32mPASSED[0m[31m                 [ 47%][0m
../../PypeIt/pypeit/tests/test_pca.py::test_prediction [32mPASSED[0m[31m            [ 48%][0m
../../PypeIt/pypeit/tests/test_pca.py::test_rms [32mPASSED[0m[31m                   [ 48%][0m
../../PypeIt/pypeit/tests/test_pca.py::test_to_hdu [32mPASSED[0m[31m                [ 49%][0m
../../PypeIt/pypeit/tests/test_pca.py::test_write [32mPASSED[0m[31m                 [ 49%][0m
../../PypeIt/pypeit/tests/test_pca.py::test_read [32mPASSED[0m[31m                  [ 50%][0m
../../PypeIt/pypeit/tests/test_pca.py::test_write_two [32mPASSED[0m[31m             [ 50%][0m
../../PypeIt/pypeit/tests/test_pca.py::test_read_two [32mPASSED[0m[31m              [ 51%][0m
../../PypeIt/pypeit/tests/test_pkgdata.py::test_cloud_url [32mPASSED[0m[31m         [ 51%][0m
../../PypeIt/pypeit/tests/test_pkgdata.py::test_fetch_github_files [32mPASSED[0m[31m [ 52%][0m
../../PypeIt/pypeit/tests/test_pkgdata.py::test_filepath_routines [32mPASSED[0m[31m [ 52%][0m
../../PypeIt/pypeit/tests/test_pkgdata.py::test_load_sky_spectrum [32mPASSED[0m[31m [ 53%][0m
../../PypeIt/pypeit/tests/test_pkgdata.py::test_search_cache [32mPASSED[0m[31m      [ 53%][0m
../../PypeIt/pypeit/tests/test_pkgdata.py::test_waveio_load_reid_arxiv [32mPASSED[0m[31m [ 54%][0m
../../PypeIt/pypeit/tests/test_procimg.py::test_replace_columns [32mPASSED[0m[31m   [ 54%][0m
../../PypeIt/pypeit/tests/test_procimg.py::test_rn2_frame [32mPASSED[0m[31m         [ 55%][0m
../../PypeIt/pypeit/tests/test_procimg.py::test_sub_overscan [32mPASSED[0m[31m      [ 55%][0m
../../PypeIt/pypeit/tests/test_procimg.py::test_trim [32mPASSED[0m[31m              [ 56%][0m
../../PypeIt/pypeit/tests/test_procimg.py::test_var_model [32mPASSED[0m[31m         [ 56%][0m
../../PypeIt/pypeit/tests/test_procimg.py::test_grow_mask [32mPASSED[0m[31m         [ 57%][0m
../../PypeIt/pypeit/tests/test_procimg.py::test_boxcar [32mPASSED[0m[31m            [ 57%][0m
../../PypeIt/pypeit/tests/test_pydl.py::test_pydl [32mPASSED[0m[31m                 [ 58%][0m
../../PypeIt/pypeit/tests/test_pypeitfile.py::test_instantiate [32mPASSED[0m[31m    [ 58%][0m
../../PypeIt/pypeit/tests/test_pypeitfile.py::test_read_pypeit_file [32mPASSED[0m[31m [ 59%][0m
../../PypeIt/pypeit/tests/test_pypeitfile.py::test_read_backwards_pypeit_file [32mPASSED[0m[31m [ 59%][0m
../../PypeIt/pypeit/tests/test_pypeitfile.py::test_write_pypeit_file [32mPASSED[0m[31m [ 60%][0m
../../PypeIt/pypeit/tests/test_pypeitimage.py::test_full [32mPASSED[0m[31m          [ 60%][0m
../../PypeIt/pypeit/tests/test_pypeitimage.py::test_bitmask [32mPASSED[0m[31m       [ 61%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_eval_tuple [32mPASSED[0m[31m      [ 61%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_framegroup [32mPASSED[0m[31m      [ 62%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_framegroup_types [32mPASSED[0m[31m [ 62%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_processimages [32mPASSED[0m[31m   [ 63%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_flatfield [32mPASSED[0m[31m       [ 63%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_flexure [32mPASSED[0m[31m         [ 64%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_coadd1d [32mPASSED[0m[31m         [ 64%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_coadd2d [32mPASSED[0m[31m         [ 65%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_cube [32mPASSED[0m[31m            [ 65%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_fluxcalibrate [32mPASSED[0m[31m   [ 66%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_sensfunc [32mPASSED[0m[31m        [ 66%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_sensfuncuvis [32mPASSED[0m[31m    [ 67%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_telluric [32mPASSED[0m[31m        [ 67%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_redux [32mPASSED[0m[31m           [ 68%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_wavelengthsolution [32mPASSED[0m[31m [ 68%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_edgetrace [32mPASSED[0m[31m       [ 69%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_wavetilts [32mPASSED[0m[31m       [ 69%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_reduce [32mPASSED[0m[31m          [ 70%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_findobj [32mPASSED[0m[31m         [ 70%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_skysub [32mPASSED[0m[31m          [ 71%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_extraction [32mPASSED[0m[31m      [ 71%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_calibrations [32mPASSED[0m[31m    [ 72%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_pypeit [32mPASSED[0m[31m          [ 72%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_fromcfgfile [32mPASSED[0m[31m     [ 73%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_writecfg [32mPASSED[0m[31m        [ 73%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_readcfg [32mPASSED[0m[31m         [ 74%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_mergecfg [32mPASSED[0m[31m        [ 74%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_sync [32mPASSED[0m[31m            [ 75%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_telescope [32mPASSED[0m[31m       [ 75%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_fail_badpar [32mPASSED[0m[31m     [ 76%][0m
../../PypeIt/pypeit/tests/test_pypeitpar.py::test_fail_badlevel [32mPASSED[0m[31m   [ 76%][0m
../../PypeIt/pypeit/tests/test_qa.py::test_get_dimen [32mPASSED[0m[31m              [ 77%][0m
../../PypeIt/pypeit/tests/test_runpypeit.py::test_run_pypeit [31mFAILED[0m[31m      [ 77%][0m
../../PypeIt/pypeit/tests/test_sensfilearchive.py::test_getinstance [32mPASSED[0m[31m [ 78%][0m
../../PypeIt/pypeit/tests/test_sensfilearchive.py::test_supported_spectrgraphs [32mPASSED[0m[31m [ 78%][0m
../../PypeIt/pypeit/tests/test_sensfilearchive.py::test_get_archived_sensfile [32mPASSED[0m[31m [ 79%][0m
../../PypeIt/pypeit/tests/test_setups.py::test_run_setup [32mPASSED[0m[31m          [ 79%][0m
../../PypeIt/pypeit/tests/test_setups.py::test_setup_made_pypeit_file [32mPASSED[0m[31m [ 80%][0m
../../PypeIt/pypeit/tests/test_skysub.py::test_userregions [32mPASSED[0m[31m        [ 80%][0m
../../PypeIt/pypeit/tests/test_skysub.py::test_generatemask [32mPASSED[0m[31m       [ 81%][0m
../../PypeIt/pypeit/tests/test_slittrace.py::test_bits [32mPASSED[0m[31m            [ 81%][0m
../../PypeIt/pypeit/tests/test_slittrace.py::test_init [32mPASSED[0m[31m            [ 82%][0m
../../PypeIt/pypeit/tests/test_slittrace.py::test_io [32mPASSED[0m[31m              [ 82%][0m
../../PypeIt/pypeit/tests/test_slittrace.py::test_io_single [32mPASSED[0m[31m       [ 83%][0m
../../PypeIt/pypeit/tests/test_spec2dobj.py::test_init [32mPASSED[0m[31m            [ 83%][0m
../../PypeIt/pypeit/tests/test_spec2dobj.py::test_spec2dobj_io [32mPASSED[0m[31m    [ 84%][0m
../../PypeIt/pypeit/tests/test_spec2dobj.py::test_spec2dobj_update_slit [32mPASSED[0m[31m [ 84%][0m
../../PypeIt/pypeit/tests/test_spec2dobj.py::test_all2dobj_hdr [32mPASSED[0m[31m    [ 85%][0m
../../PypeIt/pypeit/tests/test_spec2dobj.py::test_all2dobj_write [32mPASSED[0m[31m  [ 85%][0m
../../PypeIt/pypeit/tests/test_spec2dobj.py::test_all2dobj_update_image [32mPASSED[0m[31m [ 86%][0m
../../PypeIt/pypeit/tests/test_specobj.py::test_init [32mPASSED[0m[31m              [ 86%][0m
../../PypeIt/pypeit/tests/test_specobj.py::test_assignment [32mPASSED[0m[31m        [ 87%][0m
../../PypeIt/pypeit/tests/test_specobj.py::test_hdu [32mPASSED[0m[31m               [ 87%][0m
../../PypeIt/pypeit/tests/test_specobj.py::test_io [32mPASSED[0m[31m                [ 88%][0m
../../PypeIt/pypeit/tests/test_specobj.py::test_iotwo [32mPASSED[0m[31m             [ 88%][0m
../../PypeIt/pypeit/tests/test_specobj.py::test_copy [32mPASSED[0m[31m              [ 89%][0m
../../PypeIt/pypeit/tests/test_specobj.py::test_from_arrays [32mPASSED[0m[31m       [ 89%][0m
../../PypeIt/pypeit/tests/test_specobjs.py::test_init [32mPASSED[0m[31m             [ 90%][0m
../../PypeIt/pypeit/tests/test_specobjs.py::test_access [32mPASSED[0m[31m           [ 90%][0m
../../PypeIt/pypeit/tests/test_specobjs.py::test_add_rm [32mPASSED[0m[31m           [ 91%][0m
../../PypeIt/pypeit/tests/test_specobjs.py::test_set [32mPASSED[0m[31m              [ 91%][0m
../../PypeIt/pypeit/tests/test_specobjs.py::test_io [32mPASSED[0m[31m               [ 92%][0m
../../PypeIt/pypeit/tests/test_spectrographs.py::test_shanekastblue [32mPASSED[0m[31m [ 92%][0m
../../PypeIt/pypeit/tests/test_spectrographs.py::test_select_detectors_pypeit_file [32mPASSED[0m[31m [ 93%][0m
../../PypeIt/pypeit/tests/test_spectrographs.py::test_select_detectors_mosaic [32mPASSED[0m[31m [ 93%][0m
../../PypeIt/pypeit/tests/test_transform.py::test_affine_transform_order [32mPASSED[0m[31m [ 94%][0m
../../PypeIt/pypeit/tests/test_transform.py::test_transform_series [32mPASSED[0m[31m [ 94%][0m
../../PypeIt/pypeit/tests/test_transform.py::test_coordinate_transform [32mPASSED[0m[31m [ 95%][0m
../../PypeIt/pypeit/tests/test_utils.py::test_calc_ivar [32mPASSED[0m[31m           [ 95%][0m
../../PypeIt/pypeit/tests/test_utils.py::test_nearest_unmasked [32mPASSED[0m[31m    [ 96%][0m
../../PypeIt/pypeit/tests/test_utils.py::test_boxcar_smooth_rows [32mPASSED[0m[31m  [ 96%][0m
../../PypeIt/pypeit/tests/test_utils.py::test_yamlify [32mPASSED[0m[31m             [ 97%][0m
../../PypeIt/pypeit/tests/test_vcorr.py::test_geovelocity [32mPASSED[0m[31m         [ 97%][0m
../../PypeIt/pypeit/tests/test_vcorr.py::test_geocorrect [32mPASSED[0m[31m          [ 98%][0m
../../PypeIt/pypeit/tests/test_wavemodel.py::test_transparency [32mPASSED[0m[31m    [ 98%][0m
../../PypeIt/pypeit/tests/test_wavetilts.py::test_wavetilts [32mPASSED[0m[31m       [ 99%][0m
../../PypeIt/pypeit/tests/test_wvcalib.py::test_wavefit [32mPASSED[0m[31m           [ 99%][0m
../../PypeIt/pypeit/tests/test_wvcalib.py::test_wavecalib [32mPASSED[0m[31m         [100%][0m

=================================== FAILURES ===================================
[31m[1m_______________________________ test_flex_shift ________________________________[0m

[94mdef[39;49;00m [92mtest_flex_shift[39;49;00m():
[90m# Dummy slf[39;49;00m
[90m# Read spectra[39;49;00m
obj_spec = readspec(data_path([33m'[39;49;00m[33mobj_lrisb_600_sky.fits[39;49;00m[33m'[39;49;00m))
arx_file = os.path.join(data.Paths.sky_spec, [33m'[39;49;00m[33msky_LRISb_600.fits[39;49;00m[33m'[39;49;00m)
arx_spec = readspec(arx_file)
arx_fwhm_pix = autoid.measure_fwhm(arx_spec.flux.value, sigdetect=[94m4.[39;49;00m, fwhm=[94m4.[39;49;00m)

[90m# Call[39;49;00m
>       flex_dict = flexure.spec_flex_shift(obj_spec, arx_spec, arx_fwhm_pix, mxshft=[94m60[39;49;00m)

[1m[31m/PypeIt/pypeit/tests/test_flexure.py[0m:30:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

obj_skyspec = <XSpectrum1D: file=none, nspec=1, select=0, wvmin=3104.59 Angstrom, wvmax=5551.07 Angstrom>
arx_skyspec = <XSpectrum1D: file=none, nspec=1, select=0, wvmin=3104.59 Angstrom, wvmax=5551.07 Angstrom>
arx_fwhm_pix = 6.227359018359254, spec_fwhm = None, mxshft = 60
excess_shft = 'crash', method = 'boxcar'

[94mdef[39;49;00m [92mspec_flex_shift[39;49;00m(obj_skyspec, arx_skyspec, arx_fwhm_pix, spec_fwhm=[94mNone[39;49;00m, mxshft=[94m20[39;49;00m, excess_shft=[33m"[39;49;00m[33mcrash[39;49;00m[33m"[39;49;00m,
method=[33m"[39;49;00m[33mboxcar[39;49;00m[33m"[39;49;00m):
[33m""" Calculate shift between object sky spectrum and archive sky spectrum[39;49;00m
[33m[39;49;00m
[33m    Args:[39;49;00m
[33m        obj_skyspec (:class:`linetools.spectra.xspectrum1d.XSpectrum1d`):[39;49;00m
[33m            Spectrum of the sky related to our object[39;49;00m
[33m        arx_skyspec (:class:`linetools.spectra.xspectrum1d.XSpectrum1d`):[39;49;00m
[33m            Archived sky spectrum[39;49;00m
[33m        arx_fwhm_pix (:obj:`float`):[39;49;00m
[33m            Spectral FWHM (in pixels) of the archived sky spectrum.[39;49;00m
[33m        spec_fwhm (:obj:`float`, optional):[39;49;00m
[33m            Spectral FWHM (in pixels) of the sky spectrum related to our object/slit.[39;49;00m
[33m        mxshft (:obj:`float`, optional):[39;49;00m
[33m            Maximum allowed shift from flexure;  note there are cases that[39;49;00m
[33m            have been known to exceed even 30 pixels..[39;49;00m
[33m        excess_shft (:obj:`str`, optional):[39;49;00m
[33m            Behavior of the code when a measured flexure exceeds ``mxshft``.[39;49;00m
[33m            Options are "crash", "set_to_zero", and "continue", where[39;49;00m
[33m            "set_to_zero" sets the shift to zero and moves on, and[39;49;00m
[33m            "continue" simply uses the large flexure shift value.[39;49;00m
[33m        method (:obj:`str`, optional):[39;49;00m
[33m            Which method is used for the spectral flexure correction.[39;49;00m
[33m            Two methods are available: 'boxcar' and 'slitcen' (see spec_flexure_slit()).[39;49;00m
[33m            In this routine, 'method' is only passed to final dict.[39;49;00m
[33m[39;49;00m
[33m    Returns:[39;49;00m
[33m        dict: Contains flexure info.  Keys are:[39;49;00m
[33m[39;49;00m
[33m          - polyfit= fit to the cross-correlation[39;49;00m
[33m          - shift= best shift in pixels[39;49;00m
[33m          - subpix= subpixelation of input spectrum[39;49;00m
[33m          - corr= correlation function[39;49;00m
[33m          - sky_spec= object sky spectrum used (rebinned, etc.)[39;49;00m
[33m          - arx_spec= archived sky spectrum used[39;49;00m
[33m          - corr_cen= center of the correlation function[39;49;00m
[33m          - smooth= Degree of smoothing of input spectrum to match archive[39;49;00m
[33m    """[39;49;00m

[90m# TODO None of these routines should have dependencies on XSpectrum1d![39;49;00m

msgs.warn([33m"[39;49;00m[33mIf we use Paranal, cut down on wavelength early on[39;49;00m[33m"[39;49;00m)

[90m# get gaussian sigma (pixels) for smoothing[39;49;00m
smooth_fwhm_pix = get_fwhm_gauss_smooth(arx_skyspec, obj_skyspec, arx_fwhm_pix, spec_fwhm=spec_fwhm)

[94mif[39;49;00m smooth_fwhm_pix [95mis[39;49;00m [94mNone[39;49;00m:
[90m# smooth_fwhm_pix is None if spec_fwhm<0, i.e., the wavelength calibration is bad[39;49;00m
msgs.warn([33m'[39;49;00m[33mNo flexure correction could be computed for this slit/object[39;49;00m[33m'[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[94mif[39;49;00m smooth_fwhm_pix > [94m0[39;49;00m:
arx_skyspec = arx_skyspec.gauss_smooth(smooth_fwhm_pix)

[90m#Determine region of wavelength overlap[39;49;00m
min_wave = [96mmax[39;49;00m(np.amin(arx_skyspec.wavelength.value), np.amin(obj_skyspec.wavelength.value))
max_wave = [96mmin[39;49;00m(np.amax(arx_skyspec.wavelength.value), np.amax(obj_skyspec.wavelength.value))

[90m#Smooth higher resolution spectrum by smooth_sig (flux is conserved!)[39;49;00m
[90m#    if np.median(obj_res) >= np.median(arx_res):[39;49;00m
[90m#        msgs.warn("New Sky has higher resolution than Archive.  Not smoothing")[39;49;00m
[90m#obj_sky_newflux = ndimage.gaussian_filter(obj_sky.flux, smooth_sig)[39;49;00m
[90m#    else:[39;49;00m
[90m#tmp = ndimage.gaussian_filter(arx_sky.flux, smooth_sig)[39;49;00m
[90m#        arx_skyspec = arx_skyspec.gauss_smooth(smooth_sig_pix*2*np.sqrt(2*np.log(2)))[39;49;00m
[90m#arx_sky.flux = ndimage.gaussian_filter(arx_sky.flux, smooth_sig)[39;49;00m

[90m# Define wavelengths of overlapping spectra[39;49;00m
keep_idx = np.where((obj_skyspec.wavelength.value>=min_wave) &
(obj_skyspec.wavelength.value<=max_wave))[[94m0[39;49;00m]
[90m#keep_wave = [i for i in obj_sky.wavelength.value if i>=min_wave if i<=max_wave][39;49;00m

[90m#Rebin both spectra onto overlapped wavelength range[39;49;00m
[94mif[39;49;00m [96mlen[39;49;00m(keep_idx) <= [94m50[39;49;00m:
msgs.warn([33m"[39;49;00m[33mNot enough overlap between sky spectra[39;49;00m[33m"[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[90m# rebin onto object ALWAYS[39;49;00m
keep_wave = obj_skyspec.wavelength[keep_idx]
arx_skyspec = arx_skyspec.rebin(keep_wave)
obj_skyspec = obj_skyspec.rebin(keep_wave)
[90m# Trim edges (rebinning is junk there)[39;49;00m
arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:[94m2[39;49;00m] = [94m0.[39;49;00m
arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,-[94m2[39;49;00m:] = [94m0.[39;49;00m
obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:[94m2[39;49;00m] = [94m0.[39;49;00m
obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,-[94m2[39;49;00m:] = [94m0.[39;49;00m

[90m# Set minimum to 0.  For bad rebinning and for pernicious extractions[39;49;00m
obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:] = np.maximum(obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:], [94m0.[39;49;00m)
arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:] = np.maximum(arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:], [94m0.[39;49;00m)

[90m# Normalize spectra to unit average sky count[39;49;00m
norm = np.sum(obj_skyspec.flux.value)/obj_skyspec.npix
norm2 = np.sum(arx_skyspec.flux.value)/arx_skyspec.npix
[94mif[39;49;00m norm <= [94m0[39;49;00m:
msgs.warn([33m"[39;49;00m[33mBad normalization of object in flexure algorithm[39;49;00m[33m"[39;49;00m)
msgs.warn([33m"[39;49;00m[33mWill try the median[39;49;00m[33m"[39;49;00m)
norm = np.median(obj_skyspec.flux.value)
[94mif[39;49;00m norm <= [94m0[39;49;00m:
msgs.warn([33m"[39;49;00m[33mImproper sky spectrum for flexure.  Is it too faint??[39;49;00m[33m"[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m
[94mif[39;49;00m norm2 <= [94m0[39;49;00m:
msgs.warn([33m'[39;49;00m[33mBad normalization of archive in flexure. You are probably using wavelengths [39;49;00m[33m'[39;49;00m
[33m'[39;49;00m[33mwell beyond the archive.[39;49;00m[33m'[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m
obj_skyspec.flux = obj_skyspec.flux / norm
arx_skyspec.flux = arx_skyspec.flux / norm2

[90m# Deal with bad pixels[39;49;00m
msgs.work([33m"[39;49;00m[33mNeed to mask bad pixels[39;49;00m[33m"[39;49;00m)

[90m# Deal with underlying continuum[39;49;00m
msgs.work([33m"[39;49;00m[33mConsider taking median first [5 pixel][39;49;00m[33m"[39;49;00m)
everyn = obj_skyspec.npix // [94m20[39;49;00m
pypeitFit_obj, _ = fitting.iterfit(obj_skyspec.wavelength.value, obj_skyspec.flux.value,
nord = [94m3[39;49;00m,  kwargs_bspline={[33m'[39;49;00m[33meveryn[39;49;00m[33m'[39;49;00m: everyn}, kwargs_reject={[33m'[39;49;00m[33mgroupbadpix[39;49;00m[33m'[39;49;00m:[94mTrue[39;49;00m,[33m'[39;49;00m[33mmaxrej[39;49;00m[33m'[39;49;00m:[94m1[39;49;00m},
maxiter = [94m15[39;49;00m, upper = [94m3.0[39;49;00m, lower = [94m3.0[39;49;00m)
obj_sky_cont, _ = pypeitFit_obj.value(obj_skyspec.wavelength.value)

obj_sky_flux = obj_skyspec.flux.value - obj_sky_cont
pypeitFit_sky, _ = fitting.iterfit(arx_skyspec.wavelength.value, arx_skyspec.flux.value,
nord = [94m3[39;49;00m,  kwargs_bspline={[33m'[39;49;00m[33meveryn[39;49;00m[33m'[39;49;00m: everyn}, kwargs_reject={[33m'[39;49;00m[33mgroupbadpix[39;49;00m[33m'[39;49;00m:[94mTrue[39;49;00m,[33m'[39;49;00m[33mmaxrej[39;49;00m[33m'[39;49;00m:[94m1[39;49;00m},
maxiter = [94m15[39;49;00m, upper = [94m3.0[39;49;00m, lower = [94m3.0[39;49;00m)
arx_sky_cont, _ = pypeitFit_sky.value(arx_skyspec.wavelength.value)
arx_sky_flux = arx_skyspec.flux.value - arx_sky_cont

[90m# Consider sharpness filtering (e.g. LowRedux)[39;49;00m
msgs.work([33m"[39;49;00m[33mConsider taking median first [5 pixel][39;49;00m[33m"[39;49;00m)

[90m#Cross correlation of spectra[39;49;00m
[90m#corr = np.correlate(arx_skyspec.flux, obj_skyspec.flux, "same")[39;49;00m
corr = np.correlate(arx_sky_flux, obj_sky_flux, [33m"[39;49;00m[33msame[39;49;00m[33m"[39;49;00m)

[90m#Create array around the max of the correlation function for fitting for subpixel max[39;49;00m
[90m# Restrict to pixels within maxshift of zero lag[39;49;00m
lag0 = corr.size//[94m2[39;49;00m
[90m#mxshft = settings.argflag['reduce']['flexure']['maxshift'][39;49;00m
max_corr = np.argmax(corr[lag0-mxshft:lag0+mxshft]) + lag0-mxshft
subpix_grid = np.linspace(max_corr-[94m3.[39;49;00m, max_corr+[94m3.[39;49;00m, [94m7[39;49;00m)

[90m#Fit a 2-degree polynomial to peak of correlation function. JFH added this if/else to not crash for bad slits[39;49;00m
[94mif[39;49;00m np.any(np.isfinite(corr[subpix_grid.astype(np.int)])):
fit = fitting.PypeItFit(xval=subpix_grid, yval=corr[subpix_grid.astype(np.int)],
func=[33m'[39;49;00m[33mpolynomial[39;49;00m[33m'[39;49;00m, order=np.atleast_1d([94m2[39;49;00m))
fit.fit()
max_fit = -[94m0.5[39;49;00m * fit.fitc[[94m1[39;49;00m] / fit.fitc[[94m2[39;49;00m]

shift = [96mfloat[39;49;00m(max_fit) - lag0
[90m# Deal with the case of shifts greater than ``mxshft``[39;49;00m
[90m# We need to compare the absolute value of shift to ``mxshft``, since shift can be[39;49;00m
[90m# positive or negative, while ``mxshft`` is generally only positive[39;49;00m
[90m# We use the int of abs(shift) to avoid to trigger the error/warning for differences <1pixel[39;49;00m
[94mif[39;49;00m [96mint[39;49;00m([96mabs[39;49;00m(shift)) > mxshft:
msgs.warn([33mf[39;49;00m[33m"[39;49;00m[33mComputed shift [39;49;00m[33m{[39;49;00mshift[33m:[39;49;00m[33m.1f[39;49;00m[33m}[39;49;00m[33m pix is [39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mlarger than specified maximum [39;49;00m[33m{[39;49;00mmxshft[33m}[39;49;00m[33m pix.[39;49;00m[33m"[39;49;00m)

[94mif[39;49;00m excess_shft == [33m"[39;49;00m[33mcrash[39;49;00m[33m"[39;49;00m:
msgs.error([33mf[39;49;00m[33m"[39;49;00m[33mFlexure compensation failed for one of your[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mobjects.  Either adjust the [39;49;00m[33m\"[39;49;00m[33mspec_maxshift[39;49;00m[33m\"[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mFlexurePar Keyword, or see the flexure documentation[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mfor information on how to bypass this error using the[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33m\"[39;49;00m[33mexcessive_shift[39;49;00m[33m\"[39;49;00m[33m keyword.[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33m"[39;49;00m[33mhttps://pypeit.readthedocs.io/en/release/flexure.html[39;49;00m[33m"[39;49;00m)

[94melif[39;49;00m excess_shft == [33m"[39;49;00m[33mset_to_zero[39;49;00m[33m"[39;49;00m:
msgs.warn([33m"[39;49;00m[33mFlexure compensation failed for one of your objects.[39;49;00m[33m"[39;49;00m)
msgs.warn([33m"[39;49;00m[33mSetting the flexure correction shift to 0 pixels.[39;49;00m[33m"[39;49;00m)
[90m# Return the usual dictionary, but with a shift == 0[39;49;00m
shift = [94m0.0[39;49;00m

[94melif[39;49;00m excess_shft == [33m"[39;49;00m[33mcontinue[39;49;00m[33m"[39;49;00m:
msgs.warn([33m"[39;49;00m[33mApplying flexure shift larger than specified max![39;49;00m[33m"[39;49;00m)

[94melif[39;49;00m excess_shft == [33m"[39;49;00m[33muse_median[39;49;00m[33m"[39;49;00m:
msgs.warn([33m"[39;49;00m[33mWill try to use a flexure shift from other slit/object. [39;49;00m[33m"[39;49;00m
[33m"[39;49;00m[33mIf not available, flexure correction will not be applied.[39;49;00m[33m"[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[94melse[39;49;00m:
msgs.error([33mf[39;49;00m[33m"[39;49;00m[33mFlexurePar Keyword excessive_shift = [39;49;00m[33m\"[39;49;00m[33m{[39;49;00mexcess_shft[33m}[39;49;00m[33m\"[39;49;00m[33m [39;49;00m[33m"[39;49;00m
[33m"[39;49;00m[33mnot recognized.[39;49;00m[33m"[39;49;00m)

[94melse[39;49;00m:
fit = fitting.PypeItFit(xval=subpix_grid, yval=[94m0.0[39;49;00m*subpix_grid,
func=[33m'[39;49;00m[33mpolynomial[39;49;00m[33m'[39;49;00m, order=np.atleast_1d([94m2[39;49;00m))
fit.fit()
msgs.warn([33m'[39;49;00m[33mFlexure compensation failed for one of your objects[39;49;00m[33m'[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[90m#Calculate and apply shift in wavelength[39;49;00m
[90m# shift = float(max_fit)-lag0[39;49;00m
msgs.info([33mf[39;49;00m[33m"[39;49;00m[33mFlexure correction of [39;49;00m[33m{[39;49;00mshift[33m:[39;49;00m[33m.3f[39;49;00m[33m}[39;49;00m[33m pixels[39;49;00m[33m"[39;49;00m)
[90m#model = (fit[2]*(subpix_grid**2.))+(fit[1]*subpix_grid)+fit[0][39;49;00m

[94mreturn[39;49;00m [96mdict[39;49;00m(polyfit=fit,
shift=shift,
subpix=subpix_grid,
corr=corr[subpix_grid.astype(np.int)],
sky_spec=obj_skyspec,
arx_spec=arx_skyspec,
corr_cen=corr.size/[94m2[39;49;00m,
>                   smooth=smooth_sig_pix)
[1m[31mE       NameError: name 'smooth_sig_pix' is not defined[0m

[1m[31m/PypeIt/pypeit/core/flexure.py[0m:317: NameError
----------------------------- Captured stderr call -----------------------------
[1;31m[WARNING] ::[0m If we use Paranal, cut down on wavelength early on
[1;32m[INFO]    ::[0m Measuring spectral FWHM using the boxcar extracted sky spectrum.
[1;32m[INFO]    ::[0m Resolution (FWHM) of Archive=7.72 Ang and Observation=4.25 Ang
[1;31m[WARNING] ::[0m Prefer archival sky spectrum to have higher resolution
[1;31m[WARNING] ::[0m New Sky has higher resolution than Archive.  Not smoothing
[1;32m[INFO]    ::[0m Flexure correction of 43.714 pixels
[31m[1m_______________________________ test_run_pypeit ________________________________[0m

[94mdef[39;49;00m [92mtest_run_pypeit[39;49;00m():

[90m# Just get a few files[39;49;00m
testrawdir = data_path([33m'[39;49;00m[33m'[39;49;00m)

outdir = data_path([33m'[39;49;00m[33mREDUX_OUT_TEST[39;49;00m[33m'[39;49;00m)

[90m# For previously failed tests[39;49;00m
[94mif[39;49;00m os.path.isdir(outdir):
shutil.rmtree(outdir)

[90m# Run the setup[39;49;00m
sargs = Setup.parse_args([[33m'[39;49;00m[33m-r[39;49;00m[33m'[39;49;00m, testrawdir+[33m'[39;49;00m[33mb[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m-s[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mshane_kast_blue[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m-c all[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m-o[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33m--output_path[39;49;00m[33m'[39;49;00m, outdir])
Setup.main(sargs)

[90m# Change to the configuration directory and set the pypeit file[39;49;00m
configdir = os.path.join(outdir, [33m'[39;49;00m[33mshane_kast_blue_A[39;49;00m[33m'[39;49;00m)
pyp_file = os.path.join(configdir, [33m'[39;49;00m[33mshane_kast_blue_A.pypeit[39;49;00m[33m'[39;49;00m)
[94massert[39;49;00m os.path.isfile(pyp_file), [33m'[39;49;00m[33mPypeIt file not written.[39;49;00m[33m'[39;49;00m

[90m# Try to run with -m and -o[39;49;00m
pargs = RunPypeIt.parse_args([pyp_file, [33m'[39;49;00m[33m-o[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m-m[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m-r[39;49;00m[33m'[39;49;00m, configdir])
>       RunPypeIt.main(pargs)

[1m[31m/PypeIt/pypeit/tests/test_runpypeit.py[0m:50:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/scripts/run_pypeit.py[0m:142: in main
pypeIt.reduce_all()
[1m[31m/PypeIt/pypeit/pypeit.py[0m:449: in reduce_all
sci_spec2d, sci_sobjs = [96mself[39;49;00m.reduce_exposure(frames, bg_frames=bg_frames,
[1m[31m/PypeIt/pypeit/pypeit.py[0m:622: in reduce_exposure
= [96mself[39;49;00m.extract_one(frames, [96mself[39;49;00m.det, sciImg_list[i], objFind_list[i],
[1m[31m/PypeIt/pypeit/pypeit.py[0m:862: in extract_one
tilts = [96mself[39;49;00m.exTract.run(final_global_sky, ra=[96mself[39;49;00m.fitstbl[[33m"[39;49;00m[33mra[39;49;00m[33m"[39;49;00m][frames[[94m0[39;49;00m]],
[1m[31m/PypeIt/pypeit/extraction.py[0m:394: in run
[96mself[39;49;00m.spec_flexure_correct(mode=[33m'[39;49;00m[33mglobal[39;49;00m[33m'[39;49;00m)
[1m[31m/PypeIt/pypeit/extraction.py[0m:515: in spec_flexure_correct
flex_list = flexure.spec_flexure_slit([96mself[39;49;00m.slits, [96mself[39;49;00m.slits.slitord_id, [96mself[39;49;00m.extract_bpm,
[1m[31m/PypeIt/pypeit/core/flexure.py[0m:680: in spec_flexure_slit
flex_list = spec_flex_shift_global(slit_specs, islit, sky_spectrum, arx_fwhm_pix, empty_flex_dict,
[1m[31m/PypeIt/pypeit/core/flexure.py[0m:449: in spec_flex_shift_global
fdict = spec_flex_shift(slit_specs[islit], sky_spectrum, arx_fwhm_pix, mxshft=mxshft, excess_shft=excess_shft,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

obj_skyspec = <XSpectrum1D: file=none, nspec=1, select=0, wvmin=3428.39 Angstrom, wvmax=5515.81 Angstrom>
arx_skyspec = <XSpectrum1D: file=none, nspec=1, select=0, wvmin=3428.39 Angstrom, wvmax=5515.81 Angstrom>
arx_fwhm_pix = 3.813016751482997, spec_fwhm = 2.943580650250397, mxshft = 20
excess_shft = 'use_median', method = 'slitcen'

[94mdef[39;49;00m [92mspec_flex_shift[39;49;00m(obj_skyspec, arx_skyspec, arx_fwhm_pix, spec_fwhm=[94mNone[39;49;00m, mxshft=[94m20[39;49;00m, excess_shft=[33m"[39;49;00m[33mcrash[39;49;00m[33m"[39;49;00m,
method=[33m"[39;49;00m[33mboxcar[39;49;00m[33m"[39;49;00m):
[33m""" Calculate shift between object sky spectrum and archive sky spectrum[39;49;00m
[33m[39;49;00m
[33m    Args:[39;49;00m
[33m        obj_skyspec (:class:`linetools.spectra.xspectrum1d.XSpectrum1d`):[39;49;00m
[33m            Spectrum of the sky related to our object[39;49;00m
[33m        arx_skyspec (:class:`linetools.spectra.xspectrum1d.XSpectrum1d`):[39;49;00m
[33m            Archived sky spectrum[39;49;00m
[33m        arx_fwhm_pix (:obj:`float`):[39;49;00m
[33m            Spectral FWHM (in pixels) of the archived sky spectrum.[39;49;00m
[33m        spec_fwhm (:obj:`float`, optional):[39;49;00m
[33m            Spectral FWHM (in pixels) of the sky spectrum related to our object/slit.[39;49;00m
[33m        mxshft (:obj:`float`, optional):[39;49;00m
[33m            Maximum allowed shift from flexure;  note there are cases that[39;49;00m
[33m            have been known to exceed even 30 pixels..[39;49;00m
[33m        excess_shft (:obj:`str`, optional):[39;49;00m
[33m            Behavior of the code when a measured flexure exceeds ``mxshft``.[39;49;00m
[33m            Options are "crash", "set_to_zero", and "continue", where[39;49;00m
[33m            "set_to_zero" sets the shift to zero and moves on, and[39;49;00m
[33m            "continue" simply uses the large flexure shift value.[39;49;00m
[33m        method (:obj:`str`, optional):[39;49;00m
[33m            Which method is used for the spectral flexure correction.[39;49;00m
[33m            Two methods are available: 'boxcar' and 'slitcen' (see spec_flexure_slit()).[39;49;00m
[33m            In this routine, 'method' is only passed to final dict.[39;49;00m
[33m[39;49;00m
[33m    Returns:[39;49;00m
[33m        dict: Contains flexure info.  Keys are:[39;49;00m
[33m[39;49;00m
[33m          - polyfit= fit to the cross-correlation[39;49;00m
[33m          - shift= best shift in pixels[39;49;00m
[33m          - subpix= subpixelation of input spectrum[39;49;00m
[33m          - corr= correlation function[39;49;00m
[33m          - sky_spec= object sky spectrum used (rebinned, etc.)[39;49;00m
[33m          - arx_spec= archived sky spectrum used[39;49;00m
[33m          - corr_cen= center of the correlation function[39;49;00m
[33m          - smooth= Degree of smoothing of input spectrum to match archive[39;49;00m
[33m    """[39;49;00m

[90m# TODO None of these routines should have dependencies on XSpectrum1d![39;49;00m

msgs.warn([33m"[39;49;00m[33mIf we use Paranal, cut down on wavelength early on[39;49;00m[33m"[39;49;00m)

[90m# get gaussian sigma (pixels) for smoothing[39;49;00m
smooth_fwhm_pix = get_fwhm_gauss_smooth(arx_skyspec, obj_skyspec, arx_fwhm_pix, spec_fwhm=spec_fwhm)

[94mif[39;49;00m smooth_fwhm_pix [95mis[39;49;00m [94mNone[39;49;00m:
[90m# smooth_fwhm_pix is None if spec_fwhm<0, i.e., the wavelength calibration is bad[39;49;00m
msgs.warn([33m'[39;49;00m[33mNo flexure correction could be computed for this slit/object[39;49;00m[33m'[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[94mif[39;49;00m smooth_fwhm_pix > [94m0[39;49;00m:
arx_skyspec = arx_skyspec.gauss_smooth(smooth_fwhm_pix)

[90m#Determine region of wavelength overlap[39;49;00m
min_wave = [96mmax[39;49;00m(np.amin(arx_skyspec.wavelength.value), np.amin(obj_skyspec.wavelength.value))
max_wave = [96mmin[39;49;00m(np.amax(arx_skyspec.wavelength.value), np.amax(obj_skyspec.wavelength.value))

[90m#Smooth higher resolution spectrum by smooth_sig (flux is conserved!)[39;49;00m
[90m#    if np.median(obj_res) >= np.median(arx_res):[39;49;00m
[90m#        msgs.warn("New Sky has higher resolution than Archive.  Not smoothing")[39;49;00m
[90m#obj_sky_newflux = ndimage.gaussian_filter(obj_sky.flux, smooth_sig)[39;49;00m
[90m#    else:[39;49;00m
[90m#tmp = ndimage.gaussian_filter(arx_sky.flux, smooth_sig)[39;49;00m
[90m#        arx_skyspec = arx_skyspec.gauss_smooth(smooth_sig_pix*2*np.sqrt(2*np.log(2)))[39;49;00m
[90m#arx_sky.flux = ndimage.gaussian_filter(arx_sky.flux, smooth_sig)[39;49;00m

[90m# Define wavelengths of overlapping spectra[39;49;00m
keep_idx = np.where((obj_skyspec.wavelength.value>=min_wave) &
(obj_skyspec.wavelength.value<=max_wave))[[94m0[39;49;00m]
[90m#keep_wave = [i for i in obj_sky.wavelength.value if i>=min_wave if i<=max_wave][39;49;00m

[90m#Rebin both spectra onto overlapped wavelength range[39;49;00m
[94mif[39;49;00m [96mlen[39;49;00m(keep_idx) <= [94m50[39;49;00m:
msgs.warn([33m"[39;49;00m[33mNot enough overlap between sky spectra[39;49;00m[33m"[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[90m# rebin onto object ALWAYS[39;49;00m
keep_wave = obj_skyspec.wavelength[keep_idx]
arx_skyspec = arx_skyspec.rebin(keep_wave)
obj_skyspec = obj_skyspec.rebin(keep_wave)
[90m# Trim edges (rebinning is junk there)[39;49;00m
arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:[94m2[39;49;00m] = [94m0.[39;49;00m
arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,-[94m2[39;49;00m:] = [94m0.[39;49;00m
obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:[94m2[39;49;00m] = [94m0.[39;49;00m
obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,-[94m2[39;49;00m:] = [94m0.[39;49;00m

[90m# Set minimum to 0.  For bad rebinning and for pernicious extractions[39;49;00m
obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:] = np.maximum(obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:], [94m0.[39;49;00m)
arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:] = np.maximum(arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:], [94m0.[39;49;00m)

[90m# Normalize spectra to unit average sky count[39;49;00m
norm = np.sum(obj_skyspec.flux.value)/obj_skyspec.npix
norm2 = np.sum(arx_skyspec.flux.value)/arx_skyspec.npix
[94mif[39;49;00m norm <= [94m0[39;49;00m:
msgs.warn([33m"[39;49;00m[33mBad normalization of object in flexure algorithm[39;49;00m[33m"[39;49;00m)
msgs.warn([33m"[39;49;00m[33mWill try the median[39;49;00m[33m"[39;49;00m)
norm = np.median(obj_skyspec.flux.value)
[94mif[39;49;00m norm <= [94m0[39;49;00m:
msgs.warn([33m"[39;49;00m[33mImproper sky spectrum for flexure.  Is it too faint??[39;49;00m[33m"[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m
[94mif[39;49;00m norm2 <= [94m0[39;49;00m:
msgs.warn([33m'[39;49;00m[33mBad normalization of archive in flexure. You are probably using wavelengths [39;49;00m[33m'[39;49;00m
[33m'[39;49;00m[33mwell beyond the archive.[39;49;00m[33m'[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m
obj_skyspec.flux = obj_skyspec.flux / norm
arx_skyspec.flux = arx_skyspec.flux / norm2

[90m# Deal with bad pixels[39;49;00m
msgs.work([33m"[39;49;00m[33mNeed to mask bad pixels[39;49;00m[33m"[39;49;00m)

[90m# Deal with underlying continuum[39;49;00m
msgs.work([33m"[39;49;00m[33mConsider taking median first [5 pixel][39;49;00m[33m"[39;49;00m)
everyn = obj_skyspec.npix // [94m20[39;49;00m
pypeitFit_obj, _ = fitting.iterfit(obj_skyspec.wavelength.value, obj_skyspec.flux.value,
nord = [94m3[39;49;00m,  kwargs_bspline={[33m'[39;49;00m[33meveryn[39;49;00m[33m'[39;49;00m: everyn}, kwargs_reject={[33m'[39;49;00m[33mgroupbadpix[39;49;00m[33m'[39;49;00m:[94mTrue[39;49;00m,[33m'[39;49;00m[33mmaxrej[39;49;00m[33m'[39;49;00m:[94m1[39;49;00m},
maxiter = [94m15[39;49;00m, upper = [94m3.0[39;49;00m, lower = [94m3.0[39;49;00m)
obj_sky_cont, _ = pypeitFit_obj.value(obj_skyspec.wavelength.value)

obj_sky_flux = obj_skyspec.flux.value - obj_sky_cont
pypeitFit_sky, _ = fitting.iterfit(arx_skyspec.wavelength.value, arx_skyspec.flux.value,
nord = [94m3[39;49;00m,  kwargs_bspline={[33m'[39;49;00m[33meveryn[39;49;00m[33m'[39;49;00m: everyn}, kwargs_reject={[33m'[39;49;00m[33mgroupbadpix[39;49;00m[33m'[39;49;00m:[94mTrue[39;49;00m,[33m'[39;49;00m[33mmaxrej[39;49;00m[33m'[39;49;00m:[94m1[39;49;00m},
maxiter = [94m15[39;49;00m, upper = [94m3.0[39;49;00m, lower = [94m3.0[39;49;00m)
arx_sky_cont, _ = pypeitFit_sky.value(arx_skyspec.wavelength.value)
arx_sky_flux = arx_skyspec.flux.value - arx_sky_cont

[90m# Consider sharpness filtering (e.g. LowRedux)[39;49;00m
msgs.work([33m"[39;49;00m[33mConsider taking median first [5 pixel][39;49;00m[33m"[39;49;00m)

[90m#Cross correlation of spectra[39;49;00m
[90m#corr = np.correlate(arx_skyspec.flux, obj_skyspec.flux, "same")[39;49;00m
corr = np.correlate(arx_sky_flux, obj_sky_flux, [33m"[39;49;00m[33msame[39;49;00m[33m"[39;49;00m)

[90m#Create array around the max of the correlation function for fitting for subpixel max[39;49;00m
[90m# Restrict to pixels within maxshift of zero lag[39;49;00m
lag0 = corr.size//[94m2[39;49;00m
[90m#mxshft = settings.argflag['reduce']['flexure']['maxshift'][39;49;00m
max_corr = np.argmax(corr[lag0-mxshft:lag0+mxshft]) + lag0-mxshft
subpix_grid = np.linspace(max_corr-[94m3.[39;49;00m, max_corr+[94m3.[39;49;00m, [94m7[39;49;00m)

[90m#Fit a 2-degree polynomial to peak of correlation function. JFH added this if/else to not crash for bad slits[39;49;00m
[94mif[39;49;00m np.any(np.isfinite(corr[subpix_grid.astype(np.int)])):
fit = fitting.PypeItFit(xval=subpix_grid, yval=corr[subpix_grid.astype(np.int)],
func=[33m'[39;49;00m[33mpolynomial[39;49;00m[33m'[39;49;00m, order=np.atleast_1d([94m2[39;49;00m))
fit.fit()
max_fit = -[94m0.5[39;49;00m * fit.fitc[[94m1[39;49;00m] / fit.fitc[[94m2[39;49;00m]

shift = [96mfloat[39;49;00m(max_fit) - lag0
[90m# Deal with the case of shifts greater than ``mxshft``[39;49;00m
[90m# We need to compare the absolute value of shift to ``mxshft``, since shift can be[39;49;00m
[90m# positive or negative, while ``mxshft`` is generally only positive[39;49;00m
[90m# We use the int of abs(shift) to avoid to trigger the error/warning for differences <1pixel[39;49;00m
[94mif[39;49;00m [96mint[39;49;00m([96mabs[39;49;00m(shift)) > mxshft:
msgs.warn([33mf[39;49;00m[33m"[39;49;00m[33mComputed shift [39;49;00m[33m{[39;49;00mshift[33m:[39;49;00m[33m.1f[39;49;00m[33m}[39;49;00m[33m pix is [39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mlarger than specified maximum [39;49;00m[33m{[39;49;00mmxshft[33m}[39;49;00m[33m pix.[39;49;00m[33m"[39;49;00m)

[94mif[39;49;00m excess_shft == [33m"[39;49;00m[33mcrash[39;49;00m[33m"[39;49;00m:
msgs.error([33mf[39;49;00m[33m"[39;49;00m[33mFlexure compensation failed for one of your[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mobjects.  Either adjust the [39;49;00m[33m\"[39;49;00m[33mspec_maxshift[39;49;00m[33m\"[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mFlexurePar Keyword, or see the flexure documentation[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mfor information on how to bypass this error using the[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33m\"[39;49;00m[33mexcessive_shift[39;49;00m[33m\"[39;49;00m[33m keyword.[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33m"[39;49;00m[33mhttps://pypeit.readthedocs.io/en/release/flexure.html[39;49;00m[33m"[39;49;00m)

[94melif[39;49;00m excess_shft == [33m"[39;49;00m[33mset_to_zero[39;49;00m[33m"[39;49;00m:
msgs.warn([33m"[39;49;00m[33mFlexure compensation failed for one of your objects.[39;49;00m[33m"[39;49;00m)
msgs.warn([33m"[39;49;00m[33mSetting the flexure correction shift to 0 pixels.[39;49;00m[33m"[39;49;00m)
[90m# Return the usual dictionary, but with a shift == 0[39;49;00m
shift = [94m0.0[39;49;00m

[94melif[39;49;00m excess_shft == [33m"[39;49;00m[33mcontinue[39;49;00m[33m"[39;49;00m:
msgs.warn([33m"[39;49;00m[33mApplying flexure shift larger than specified max![39;49;00m[33m"[39;49;00m)

[94melif[39;49;00m excess_shft == [33m"[39;49;00m[33muse_median[39;49;00m[33m"[39;49;00m:
msgs.warn([33m"[39;49;00m[33mWill try to use a flexure shift from other slit/object. [39;49;00m[33m"[39;49;00m
[33m"[39;49;00m[33mIf not available, flexure correction will not be applied.[39;49;00m[33m"[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[94melse[39;49;00m:
msgs.error([33mf[39;49;00m[33m"[39;49;00m[33mFlexurePar Keyword excessive_shift = [39;49;00m[33m\"[39;49;00m[33m{[39;49;00mexcess_shft[33m}[39;49;00m[33m\"[39;49;00m[33m [39;49;00m[33m"[39;49;00m
[33m"[39;49;00m[33mnot recognized.[39;49;00m[33m"[39;49;00m)

[94melse[39;49;00m:
fit = fitting.PypeItFit(xval=subpix_grid, yval=[94m0.0[39;49;00m*subpix_grid,
func=[33m'[39;49;00m[33mpolynomial[39;49;00m[33m'[39;49;00m, order=np.atleast_1d([94m2[39;49;00m))
fit.fit()
msgs.warn([33m'[39;49;00m[33mFlexure compensation failed for one of your objects[39;49;00m[33m'[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[90m#Calculate and apply shift in wavelength[39;49;00m
[90m# shift = float(max_fit)-lag0[39;49;00m
msgs.info([33mf[39;49;00m[33m"[39;49;00m[33mFlexure correction of [39;49;00m[33m{[39;49;00mshift[33m:[39;49;00m[33m.3f[39;49;00m[33m}[39;49;00m[33m pixels[39;49;00m[33m"[39;49;00m)
[90m#model = (fit[2]*(subpix_grid**2.))+(fit[1]*subpix_grid)+fit[0][39;49;00m

[94mreturn[39;49;00m [96mdict[39;49;00m(polyfit=fit,
shift=shift,
subpix=subpix_grid,
corr=corr[subpix_grid.astype(np.int)],
sky_spec=obj_skyspec,
arx_spec=arx_skyspec,
corr_cen=corr.size/[94m2[39;49;00m,
>                   smooth=smooth_sig_pix)
[1m[31mE       NameError: name 'smooth_sig_pix' is not defined[0m

[1m[31m/PypeIt/pypeit/core/flexure.py[0m:317: NameError
----------------------------- Captured stderr call -----------------------------
[1;32m[INFO]    ::[0m Added metadata for b1.fits.gz
[1;32m[INFO]    ::[0m Added metadata for b11.fits.gz
[1;32m[INFO]    ::[0m Added metadata for b12.fits.gz
[1;32m[INFO]    ::[0m Added metadata for b13.fits.gz
[1;32m[INFO]    ::[0m Added metadata for b21.fits.gz
[1;32m[INFO]    ::[0m Added metadata for b22.fits.gz
[1;32m[INFO]    ::[0m Added metadata for b23.fits.gz
[1;32m[INFO]    ::[0m Added metadata for b27.fits.gz
[1;32m[INFO]    ::[0m Typing files
[1;31m[WARNING] ::[0m Cannot determine if frames are of type align.
[1;31m[WARNING] ::[0m Cannot determine if frames are of type lampoffflats.
[1;31m[WARNING] ::[0m Cannot determine if frames are of type sky.
[1;32m[INFO]    ::[0m Typing completed!
[1;32m[INFO]    ::[0m Using metadata to determine unique configurations.
[1;32m[INFO]    ::[0m Unique configurations ignore frames with type: ['bias', 'dark']
[1;32m[INFO]    ::[0m Found 1 unique configurations.
[1;32m[INFO]    ::[0m Wrote sorted file data to /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/setup_files/shane_kast_blue.sorted
[1;32m[INFO]    ::[0m Setup is complete.
[1;32m[INFO]    ::[0m Inspect the .sorted file
[1;32m[INFO]    ::[0m PypeIt file successfully vetted.
[1;32m[INFO]    ::[0m PypeIt input file written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/shane_kast_blue_A.pypeit
[1;32m[INFO]    ::[0m [1;34minputfiles.py 117 from_file()[0m - Loading the reduction file
[1;32m[INFO]    ::[0m [1;34minputfiles.py 159 from_file()[0m - PypeIt input file loaded successfully.
[1;32m[INFO]    ::[0m [1;34minputfiles.py 498 vet()[0m - PypeIt file successfully vetted.
[1;32m[INFO]    ::[0m [1;34mpypeit.py 103 __init__()[0m - Loaded spectrograph shane_kast_blue
[1;32m[INFO]    ::[0m [1;34mpypeit.py 119 __init__()[0m - Setting configuration-specific parameters using b27.fits.gz
[1;32m[INFO]    ::[0m [1;34mpypeit.py 127 __init__()[0m - Built full PypeIt parameter set.
[1;32m[INFO]    ::[0m [1;34mpypeit.py 139 __init__()[0m - Compiling metadata
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b1.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b21.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b22.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b23.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b11.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b12.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b13.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b27.fits.gz
[1;31m[WARNING] ::[0m [1;34mmetadata.py 1257 get_frame_types()[0m - Removing existing frametype and framebit columns.
[1;32m[INFO]    ::[0m [1;34mmetadata.py 1264 get_frame_types()[0m - Typing files
[1;32m[INFO]    ::[0m [1;34mmetadata.py 1274 get_frame_types()[0m - Using user-provided frame types.
[1;32m[INFO]    ::[0m [1;34mmetadata.py 680 unique_configurations()[0m - Setup column already set.  Finding unique configurations.
[1;32m[INFO]    ::[0m [1;34mmetadata.py 691 unique_configurations()[0m - Found 1 unique configurations.
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 1004 check_for_calibs()[0m - Congrats!!  You passed the calibrations inspection!!
[1;32m[INFO]    ::[0m [1;34mpypeit.py 173 __init__()[0m - Setting reduction path to /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A
[1;32m[INFO]    ::[0m [1;34mpypeit.py 174 __init__()[0m - Master calibration data output to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters
[1;32m[INFO]    ::[0m [1;34mpypeit.py 175 __init__()[0m - Science data output to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Science
[1;32m[INFO]    ::[0m [1;34mpypeit.py 176 __init__()[0m - Quality assessment plots output to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/QA
[1;32m[INFO]    ::[0m [1;34mpypeit.py 536 reduce_exposure()[0m - Reducing target J1217p3905
Combining frames:
b27.fits.gz

[1;32m[INFO]    ::[0m [1;34mpypeit.py 548 reduce_exposure()[0m - Detectors to work on: [1]
[1;32m[INFO]    ::[0m [1;34mpypeit.py 554 reduce_exposure()[0m - Working on detector 1
[1;32m[INFO]    ::[0m [1;34mpypeit.py 683 calib_one()[0m - Working on detector 1
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterBias_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 679 get_slits()[0m - Creating Master Edges using files:
[1;34mcalibrations.py 681 get_slits()[0m - b11.fits.gz
[1;34mcalibrations.py 681 get_slits()[0m - b12.fits.gz
[1;34mcalibrations.py 681 get_slits()[0m - b13.fits.gz
[1;32m[INFO]    ::[0m [1;34medgetrace.py 923 initial_trace()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 924 initial_trace()[0m -              Initialize Edge Tracing
[1;32m[INFO]    ::[0m [1;34medgetrace.py 925 initial_trace()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34mtrace.py 87 detect_slit_edges()[0m - Detecting slit edges in the trace image
[1;32m[INFO]    ::[0m [1;34mtrace.py 130 detect_slit_edges()[0m - Applying bad pixel mask
[1;32m[INFO]    ::[0m [1;34mtrace.py 171 identify_traces()[0m - Finding unique traces among detected edges.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1797 centroid_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1798 centroid_refine()[0m -              Edge Centroid Refinement
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1799 centroid_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1800 centroid_refine()[0m - Width of window for centroiding the edges: 6.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1801 centroid_refine()[0m - Max shift between spectrally adjacent pixels: 0.15
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1802 centroid_refine()[0m - Max centroid error: None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1803 centroid_refine()[0m - Minimum spectral pixels for a valid trace: 675.84
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1842 centroid_refine()[0m - Found 1 left edge trace(s) to refine
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1862 centroid_refine()[0m - Following 1 left edge(s) from row 1024; 0 trace(s) remain.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2039 check_traces()[0m - Tolerance for finding repeat traces: 3.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 675.84
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1842 centroid_refine()[0m - Found 1 right edge trace(s) to refine
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1862 centroid_refine()[0m - Following 1 right edge(s) from row 1024; 0 trace(s) remain.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2039 check_traces()[0m - Tolerance for finding repeat traces: 3.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 675.84
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;31m[WARNING] ::[0m [1;34medgetrace.py 2598 remove_traces()[0m - No trace to remove.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2903 fit_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2904 fit_refine()[0m -          Fitting Polynomial to Edge Trace
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2905 fit_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2906 fit_refine()[0m - Max shift btwn input and remeasured edge centroids: 0.50
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2907 fit_refine()[0m - Max centroid error: None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2908 fit_refine()[0m - Trace fitting function: legendre
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2909 fit_refine()[0m - Trace fitting order: 5
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2910 fit_refine()[0m - Weighting for remeasuring edge centroids: uniform
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2911 fit_refine()[0m - FWHM parameter for remeasuring edge centroids: 3.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2912 fit_refine()[0m - Maximum deviation for fitted data: 5.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2913 fit_refine()[0m - Maximum number of rejection iterations: 25
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2914 fit_refine()[0m - Number of remeasuring and refitting iterations: 1
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 1228.80
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2194 merge_traces()[0m - No traces merged.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3003 can_pca()[0m - Minium length of traces to include in the PCA: 1228.8
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 1228.80
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3003 can_pca()[0m - Minium length of traces to include in the PCA: 1228.8
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 1228.80
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2799 spatial_sort()[0m - Re-sorting edges based on where they cross row 1024
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2442 check_synced()[0m - Minimum slit gap (binned pixels): None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2443 check_synced()[0m - Minimum slit length (binned pixels): None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2444 check_synced()[0m - Minimum science slit length (binned pixels): None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2445 check_synced()[0m - Range in slit length not limited
[1;31m[WARNING] ::[0m [1;34medgetrace.py 2598 remove_traces()[0m - No trace to remove.
[1;32m[INFO]    ::[0m [1;34mio.py 644 write_to_fits()[0m - Compressing file: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterEdges_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterEdges_A_1_DET01.fits.gz
[1;32m[INFO]    ::[0m [1;34mio.py 644 write_to_fits()[0m - Compressing file: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterSlits_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterSlits_A_1_DET01.fits.gz
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 266 get_arc()[0m - Preparing a master Arc frame
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterArc_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 305 get_tiltimg()[0m - Preparing a master Tiltimg frame
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterTiltimg_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34marc.py 491 get_censpec()[0m - Extracting approximate arc spectrum along the center of slit 0
[1;32m[INFO]    ::[0m [1;34mwaveio.py 189 load_line_lists()[0m - Arc lamps used: CdI, HgI, HeI
[1;32m[INFO]    ::[0m [1;34mautoid.py 1012 full_template()[0m - Processing slit 0
[1;32m[INFO]    ::[0m [1;34mautoid.py 1013 full_template()[0m - Using sigdetect = 5.0
[1;32m[INFO]    ::[0m [1;34mautoid.py 919 set_fwhm()[0m - User-provided arc lines FWHM: 4.0 pixels
[1;32m[INFO]    ::[0m [1;34mautoid.py 1042 full_template()[0m - Shift = 155.9920438376639; cc = 0.6477758746707852
[1;32m[INFO]    ::[0m [1;34mautoid.py 728 reidentify()[0m - Cross-correlating with arxiv slit # 0
[1;32m[INFO]    ::[0m [1;34mautoid.py 728 reidentify()[0m - Cross-correlating with arxiv slit # 0
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterWaveCalib_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34marc.py 491 get_censpec()[0m - Extracting approximate arc spectrum along the center of slit 0
[1;32m[INFO]    ::[0m [1;34mwavetilts.py 602 run()[0m - Computing tilts for slit 0/1
[1;32m[INFO]    ::[0m [1;34mwavetilts.py 604 run()[0m - Finding lines for tilt analysis
[1;32m[INFO]    ::[0m [1;34mtracewave.py 86 tilts_find_lines()[0m - Rejecting 5 lines below sigma threshold.
[1;32m[INFO]    ::[0m [1;34mtracewave.py 107 tilts_find_lines()[0m - Removed 3 lines that were too close to neighboring lines.
[1;32m[INFO]    ::[0m [1;34mtracewave.py 129 tilts_find_lines()[0m - Modeling arc line tilts with 18 arc lines
[1;32m[INFO]    ::[0m [1;34mwavetilts.py 621 run()[0m - Trace the tilts
[1;32m[INFO]    ::[0m [1;34mtracewave.py 486 trace_tilts_work()[0m - Number of usable arc lines for tilts: 14/18
[1;32m[INFO]    ::[0m [1;34mtracewave.py 629 trace_tilts()[0m - PCA modeling 14 good tilts
[1;32m[INFO]    ::[0m [1;34mpca.py 102 pca_decomposition()[0m - The unconstrained PCA yields 14 components.
[1;32m[INFO]    ::[0m [1;34mpca.py 116 pca_decomposition()[0m - PCA will include 2 component(s), containing 99.815% of the total variance.
[1;32m[INFO]    ::[0m [1;34mtracepca.py 407 pca_trace_object()[0m - Order of function fit to each component: [2 1]
[1;32m[INFO]    ::[0m [1;34mtracewave.py 486 trace_tilts_work()[0m - Number of usable arc lines for tilts: 14/18
[1;32m[INFO]    ::[0m [1;34mtracewave.py 696 fit_tilts()[0m - Fitting tilts with a low order, 2D legendre2d
[1;32m[INFO]    ::[0m [1;34mtracewave.py 734 fit_tilts()[0m - Residuals: 2D Legendre Fit
[1;32m[INFO]    ::[0m [1;34mtracewave.py 735 fit_tilts()[0m - RMS (pixels): 0.021512133960223254
[1;32m[INFO]    ::[0m [1;34mtracewave.py 736 fit_tilts()[0m - RMS/FWHM: 0.005378033490055814
[1;32m[INFO]    ::[0m [1;34mtracewave.py 738 fit_tilts()[0m - Inverting the fit to generate the tilts image
[1;32m[INFO]    ::[0m [1;34mtracewave.py 797 fit_tilts()[0m - Rejected 0/666974 pixels in final inversion tilts image fit
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterTilts_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 554 get_flats()[0m - Creating Master Pixel Flat using files:
[1;34mcalibrations.py 556 get_flats()[0m - b11.fits.gz
[1;34mcalibrations.py 556 get_flats()[0m - b12.fits.gz
[1;34mcalibrations.py 556 get_flats()[0m - b13.fits.gz
[1;32m[INFO]    ::[0m [1;34mflatfield.py 520 build_waveimg()[0m - Generating wavelength image
[1;32m[INFO]    ::[0m [1;34mflatfield.py 738 fit()[0m - Modeling the flat-field response for slit spat_id=175: 1/1
[1;32m[INFO]    ::[0m [1;34mflatfield.py 819 fit()[0m - Spectral fit of flatfield for 617197/629485  pixels in the slit.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 617197/617197 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.002       84    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     0.002       84    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.002       84    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mflatfield.py 908 fit()[0m - Spatial fit of flatfield for 468033/649965  pixels in the slit.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 468033/468033 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.000        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.000        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mflat.py 396 tweak_slit_edges()[0m - Tweaking left slit boundary by 0.5% % (1.61 pixels)
[1;32m[INFO]    ::[0m [1;34mflat.py 450 tweak_slit_edges()[0m - Tweaking right slit boundary by 0.7% % (2.16 pixels)
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 468033/468033 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.001        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.001        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mflatfield.py 1018 fit()[0m - Performing 2D illumination + scattered light flat field fit
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 7 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 621577/621663 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     2.381    18993    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     1.328    19209    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      3     1.322    19256    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      4     1.321    19275    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      5     1.320    19279    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      6     1.320    19281    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      7     1.320    19282    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      8     1.320    19282    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     1.320    19282    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterFlat_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mio.py 644 write_to_fits()[0m - Compressing file: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterSlits_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterSlits_A_1_DET01.fits.gz
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 836 run_the_steps()[0m - Calibration complete!
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 837 run_the_steps()[0m - #######################################################################
[1;32m[INFO]    ::[0m [1;34mpypeit.py 733 objfind_one()[0m - Object finding begins for b27-J1217p3905_KASTb_20150520T045733.560 on det=1
[1;31m[WARNING] ::[0m [1;34mflatfield.py 231 get_spat_bsplines()[0m - illumflat has no spatial bspline fit - using the pixelflat
[1;32m[INFO]    ::[0m [1;34mprocimg.py 168 lacosmic()[0m - Detecting cosmic rays with the L.A.Cosmic algorithm
[1;32m[INFO]    ::[0m [1;34mprocimg.py 216 lacosmic()[0m - Convolving image with Laplacian kernel
[1;32m[INFO]    ::[0m [1;34mprocimg.py 227 lacosmic()[0m - Found 85 candidate cosmic-ray pixels
[1;32m[INFO]    ::[0m [1;34mprocimg.py 233 lacosmic()[0m - Reduced to 85 candidates after excluding known bad pixels.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 244 lacosmic()[0m - Reduced to 71 candidates after excluding compact objects.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 248 lacosmic()[0m - Finding neighboring pixels affected by cosmic rays
[1;32m[INFO]    ::[0m [1;34mprocimg.py 258 lacosmic()[0m - Changed to 130 candidates after evaluating neighboring pixels.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 264 lacosmic()[0m - Reduced to 130 candidates after excluding known bad pixels.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 269 lacosmic()[0m - Iteration 1: 130 pixels identified as cosmic rays (130 are new)
[1;32m[INFO]    ::[0m [1;34mprocimg.py 298 lacosmic()[0m - 128 pixels identified as cosmic rays after removing false positives
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 165 __init__()[0m - Initialising slits
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 311 run()[0m - Generating tilts image
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 519 global_skysub()[0m - Global sky subtraction for slit: 175
[1;32m[INFO]    ::[0m [1;34mskysub.py 185 global_skysub()[0m - Full fit in global sky sub.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 3 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 608875/621663 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     1.259    21670    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     0.983    22032    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      3     0.978    22045    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      4     0.978    22045    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.978    22045    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 773 find_objects_pypeline()[0m - Finding objects on slit # 175
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 1372 objs_in_slit()[0m - Automatic finding routine found 1 objects
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 1375 objs_in_slit()[0m - Fitting the object traces
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 1508 objs_in_slit()[0m - Successfully traced a total of 1 objects
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 238 create_skymask()[0m - Generating skymask for slit # 175
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 109 create_skymask()[0m - Masking around object 1 within a radius = 5.544530212328821 pixels
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 519 global_skysub()[0m - Global sky subtraction for slit: 175
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 583316/618643 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.011    35327    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.011    35327    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mskysub.py 185 global_skysub()[0m - Full fit in global sky sub.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 3 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 586038/621663 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.982    37462    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     0.949    37530    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      3     0.948    37534    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      4     0.948    37534    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.948    37534    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mprocimg.py 168 lacosmic()[0m - Detecting cosmic rays with the L.A.Cosmic algorithm
[1;32m[INFO]    ::[0m [1;34mprocimg.py 216 lacosmic()[0m - Convolving image with Laplacian kernel
[1;32m[INFO]    ::[0m [1;34mprocimg.py 227 lacosmic()[0m - Found 95 candidate cosmic-ray pixels
[1;32m[INFO]    ::[0m [1;34mprocimg.py 233 lacosmic()[0m - Reduced to 95 candidates after excluding known bad pixels.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 244 lacosmic()[0m - Reduced to 73 candidates after excluding compact objects.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 248 lacosmic()[0m - Finding neighboring pixels affected by cosmic rays
[1;32m[INFO]    ::[0m [1;34mprocimg.py 258 lacosmic()[0m - Changed to 133 candidates after evaluating neighboring pixels.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 264 lacosmic()[0m - Reduced to 133 candidates after excluding known bad pixels.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 269 lacosmic()[0m - Iteration 1: 133 pixels identified as cosmic rays (133 are new)
[1;32m[INFO]    ::[0m [1;34mprocimg.py 298 lacosmic()[0m - 118 pixels identified as cosmic rays after removing false positives
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 773 find_objects_pypeline()[0m - Finding objects on slit # 175
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 1372 objs_in_slit()[0m - Automatic finding routine found 1 objects
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 1375 objs_in_slit()[0m - Fitting the object traces
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 1508 objs_in_slit()[0m - Successfully traced a total of 1 objects
[1;32m[INFO]    ::[0m [1;34mpypeit.py 683 calib_one()[0m - Working on detector 1
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterBias_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 679 get_slits()[0m - Creating Master Edges using files:
[1;34mcalibrations.py 681 get_slits()[0m - b11.fits.gz
[1;34mcalibrations.py 681 get_slits()[0m - b12.fits.gz
[1;34mcalibrations.py 681 get_slits()[0m - b13.fits.gz
[1;32m[INFO]    ::[0m [1;34medgetrace.py 923 initial_trace()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 924 initial_trace()[0m -              Initialize Edge Tracing
[1;32m[INFO]    ::[0m [1;34medgetrace.py 925 initial_trace()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34mtrace.py 87 detect_slit_edges()[0m - Detecting slit edges in the trace image
[1;32m[INFO]    ::[0m [1;34mtrace.py 130 detect_slit_edges()[0m - Applying bad pixel mask
[1;32m[INFO]    ::[0m [1;34mtrace.py 171 identify_traces()[0m - Finding unique traces among detected edges.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1797 centroid_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1798 centroid_refine()[0m -              Edge Centroid Refinement
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1799 centroid_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1800 centroid_refine()[0m - Width of window for centroiding the edges: 6.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1801 centroid_refine()[0m - Max shift between spectrally adjacent pixels: 0.15
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1802 centroid_refine()[0m - Max centroid error: None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1803 centroid_refine()[0m - Minimum spectral pixels for a valid trace: 675.84
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1842 centroid_refine()[0m - Found 1 left edge trace(s) to refine
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1862 centroid_refine()[0m - Following 1 left edge(s) from row 1024; 0 trace(s) remain.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2039 check_traces()[0m - Tolerance for finding repeat traces: 3.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 675.84
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1842 centroid_refine()[0m - Found 1 right edge trace(s) to refine
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1862 centroid_refine()[0m - Following 1 right edge(s) from row 1024; 0 trace(s) remain.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2039 check_traces()[0m - Tolerance for finding repeat traces: 3.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 675.84
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;31m[WARNING] ::[0m [1;34medgetrace.py 2598 remove_traces()[0m - No trace to remove.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2903 fit_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2904 fit_refine()[0m -          Fitting Polynomial to Edge Trace
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2905 fit_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2906 fit_refine()[0m - Max shift btwn input and remeasured edge centroids: 0.50
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2907 fit_refine()[0m - Max centroid error: None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2908 fit_refine()[0m - Trace fitting function: legendre
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2909 fit_refine()[0m - Trace fitting order: 5
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2910 fit_refine()[0m - Weighting for remeasuring edge centroids: uniform
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2911 fit_refine()[0m - FWHM parameter for remeasuring edge centroids: 3.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2912 fit_refine()[0m - Maximum deviation for fitted data: 5.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2913 fit_refine()[0m - Maximum number of rejection iterations: 25
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2914 fit_refine()[0m - Number of remeasuring and refitting iterations: 1
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 1228.80
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2194 merge_traces()[0m - No traces merged.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3003 can_pca()[0m - Minium length of traces to include in the PCA: 1228.8
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 1228.80
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3003 can_pca()[0m - Minium length of traces to include in the PCA: 1228.8
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 1228.80
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2799 spatial_sort()[0m - Re-sorting edges based on where they cross row 1024
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2442 check_synced()[0m - Minimum slit gap (binned pixels): None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2443 check_synced()[0m - Minimum slit length (binned pixels): None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2444 check_synced()[0m - Minimum science slit length (binned pixels): None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2445 check_synced()[0m - Range in slit length not limited
[1;31m[WARNING] ::[0m [1;34medgetrace.py 2598 remove_traces()[0m - No trace to remove.
[1;32m[INFO]    ::[0m [1;34mio.py 644 write_to_fits()[0m - Compressing file: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterEdges_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterEdges_A_1_DET01.fits.gz
[1;32m[INFO]    ::[0m [1;34mio.py 644 write_to_fits()[0m - Compressing file: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterSlits_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterSlits_A_1_DET01.fits.gz
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 266 get_arc()[0m - Preparing a master Arc frame
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterArc_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 305 get_tiltimg()[0m - Preparing a master Tiltimg frame
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterTiltimg_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34marc.py 491 get_censpec()[0m - Extracting approximate arc spectrum along the center of slit 0
[1;32m[INFO]    ::[0m [1;34mwaveio.py 189 load_line_lists()[0m - Arc lamps used: CdI, HgI, HeI
[1;32m[INFO]    ::[0m [1;34mautoid.py 1012 full_template()[0m - Processing slit 0
[1;32m[INFO]    ::[0m [1;34mautoid.py 1013 full_template()[0m - Using sigdetect = 5.0
[1;32m[INFO]    ::[0m [1;34mautoid.py 919 set_fwhm()[0m - User-provided arc lines FWHM: 4.0 pixels
[1;32m[INFO]    ::[0m [1;34mautoid.py 1042 full_template()[0m - Shift = 155.9920438376639; cc = 0.6477758746707852
[1;32m[INFO]    ::[0m [1;34mautoid.py 728 reidentify()[0m - Cross-correlating with arxiv slit # 0
[1;32m[INFO]    ::[0m [1;34mautoid.py 728 reidentify()[0m - Cross-correlating with arxiv slit # 0
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterWaveCalib_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34marc.py 491 get_censpec()[0m - Extracting approximate arc spectrum along the center of slit 0
[1;32m[INFO]    ::[0m [1;34mwavetilts.py 602 run()[0m - Computing tilts for slit 0/1
[1;32m[INFO]    ::[0m [1;34mwavetilts.py 604 run()[0m - Finding lines for tilt analysis
[1;32m[INFO]    ::[0m [1;34mtracewave.py 86 tilts_find_lines()[0m - Rejecting 5 lines below sigma threshold.
[1;32m[INFO]    ::[0m [1;34mtracewave.py 107 tilts_find_lines()[0m - Removed 3 lines that were too close to neighboring lines.
[1;32m[INFO]    ::[0m [1;34mtracewave.py 129 tilts_find_lines()[0m - Modeling arc line tilts with 18 arc lines
[1;32m[INFO]    ::[0m [1;34mwavetilts.py 621 run()[0m - Trace the tilts
[1;32m[INFO]    ::[0m [1;34mtracewave.py 486 trace_tilts_work()[0m - Number of usable arc lines for tilts: 14/18
[1;32m[INFO]    ::[0m [1;34mtracewave.py 629 trace_tilts()[0m - PCA modeling 14 good tilts
[1;32m[INFO]    ::[0m [1;34mpca.py 102 pca_decomposition()[0m - The unconstrained PCA yields 14 components.
[1;32m[INFO]    ::[0m [1;34mpca.py 116 pca_decomposition()[0m - PCA will include 2 component(s), containing 99.815% of the total variance.
[1;32m[INFO]    ::[0m [1;34mtracepca.py 407 pca_trace_object()[0m - Order of function fit to each component: [2 1]
[1;32m[INFO]    ::[0m [1;34mtracewave.py 486 trace_tilts_work()[0m - Number of usable arc lines for tilts: 14/18
[1;32m[INFO]    ::[0m [1;34mtracewave.py 696 fit_tilts()[0m - Fitting tilts with a low order, 2D legendre2d
[1;32m[INFO]    ::[0m [1;34mtracewave.py 734 fit_tilts()[0m - Residuals: 2D Legendre Fit
[1;32m[INFO]    ::[0m [1;34mtracewave.py 735 fit_tilts()[0m - RMS (pixels): 0.021512133960223254
[1;32m[INFO]    ::[0m [1;34mtracewave.py 736 fit_tilts()[0m - RMS/FWHM: 0.005378033490055814
[1;32m[INFO]    ::[0m [1;34mtracewave.py 738 fit_tilts()[0m - Inverting the fit to generate the tilts image
[1;32m[INFO]    ::[0m [1;34mtracewave.py 797 fit_tilts()[0m - Rejected 0/666974 pixels in final inversion tilts image fit
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterTilts_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 554 get_flats()[0m - Creating Master Pixel Flat using files:
[1;34mcalibrations.py 556 get_flats()[0m - b11.fits.gz
[1;34mcalibrations.py 556 get_flats()[0m - b12.fits.gz
[1;34mcalibrations.py 556 get_flats()[0m - b13.fits.gz
[1;32m[INFO]    ::[0m [1;34mflatfield.py 520 build_waveimg()[0m - Generating wavelength image
[1;32m[INFO]    ::[0m [1;34mflatfield.py 738 fit()[0m - Modeling the flat-field response for slit spat_id=175: 1/1
[1;32m[INFO]    ::[0m [1;34mflatfield.py 819 fit()[0m - Spectral fit of flatfield for 617197/629485  pixels in the slit.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 617197/617197 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.002       84    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     0.002       84    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.002       84    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mflatfield.py 908 fit()[0m - Spatial fit of flatfield for 468033/649965  pixels in the slit.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 468033/468033 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.000        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.000        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mflat.py 396 tweak_slit_edges()[0m - Tweaking left slit boundary by 0.5% % (1.61 pixels)
[1;32m[INFO]    ::[0m [1;34mflat.py 450 tweak_slit_edges()[0m - Tweaking right slit boundary by 0.7% % (2.16 pixels)
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 468033/468033 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.001        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.001        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mflatfield.py 1018 fit()[0m - Performing 2D illumination + scattered light flat field fit
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 7 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 621577/621663 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     2.381    18993    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     1.328    19209    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      3     1.322    19256    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      4     1.321    19275    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      5     1.320    19279    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      6     1.320    19281    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      7     1.320    19282    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      8     1.320    19282    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     1.320    19282    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterFlat_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mio.py 644 write_to_fits()[0m - Compressing file: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterSlits_A_1_DET01.fits
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/REDUX_OUT_TEST/shane_kast_blue_A/Masters/MasterSlits_A_1_DET01.fits.gz
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 836 run_the_steps()[0m - Calibration complete!
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 837 run_the_steps()[0m - #######################################################################
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 238 create_skymask()[0m - Generating skymask for slit # 175
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 109 create_skymask()[0m - Masking around object 1 within a radius = 5.689113792666923 pixels
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 519 global_skysub()[0m - Global sky subtraction for slit: 175
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 582724/618643 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.011    35919    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.011    35919    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mskysub.py 185 global_skysub()[0m - Full fit in global sky sub.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 3 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 585597/621663 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.981    37473    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     0.957    37500    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      3     0.956    37500    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.956    37500    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mprocimg.py 168 lacosmic()[0m - Detecting cosmic rays with the L.A.Cosmic algorithm
[1;32m[INFO]    ::[0m [1;34mprocimg.py 216 lacosmic()[0m - Convolving image with Laplacian kernel
[1;32m[INFO]    ::[0m [1;34mprocimg.py 227 lacosmic()[0m - Found 95 candidate cosmic-ray pixels
[1;32m[INFO]    ::[0m [1;34mprocimg.py 233 lacosmic()[0m - Reduced to 95 candidates after excluding known bad pixels.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 244 lacosmic()[0m - Reduced to 73 candidates after excluding compact objects.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 248 lacosmic()[0m - Finding neighboring pixels affected by cosmic rays
[1;32m[INFO]    ::[0m [1;34mprocimg.py 258 lacosmic()[0m - Changed to 133 candidates after evaluating neighboring pixels.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 264 lacosmic()[0m - Reduced to 133 candidates after excluding known bad pixels.
[1;32m[INFO]    ::[0m [1;34mprocimg.py 269 lacosmic()[0m - Iteration 1: 133 pixels identified as cosmic rays (133 are new)
[1;32m[INFO]    ::[0m [1;34mprocimg.py 298 lacosmic()[0m - 118 pixels identified as cosmic rays after removing false positives
[1;32m[INFO]    ::[0m [1;34mpypeit.py 845 extract_one()[0m - Extraction begins for b27-J1217p3905_KASTb_20150520T045733.560 on det=1
[1;32m[INFO]    ::[0m [1;34mextraction.py 148 __init__()[0m - Initialising slits
[1;32m[INFO]    ::[0m [1;34mextraction.py 333 prepare_extraction()[0m - Generating tilts image
[1;32m[INFO]    ::[0m [1;34mextraction.py 337 prepare_extraction()[0m - Generating wavelength image
[1;32m[INFO]    ::[0m [1;34mextraction.py 480 spec_flexure_correct()[0m - Performing global spectral flexure correction
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflexure.py 631 spec_flexure_slit()[0m - Consider doing 2 passes in flexure as in LowRedux
[1;32m[INFO]    ::[0m [1;34mflexure.py 664 spec_flexure_slit()[0m - Working on spectral flexure of slit: 175
[1;31m[WARNING] ::[0m [1;34mflexure.py 157 spec_flex_shift()[0m - If we use Paranal, cut down on wavelength early on
[1;32m[INFO]    ::[0m [1;34mflexure.py 357 get_fwhm_gauss_smooth()[0m - Resolution (FWHM) of Archive=7.06 Ang and Observation=2.94 Ang
[1;31m[WARNING] ::[0m [1;34mflexure.py 373 get_fwhm_gauss_smooth()[0m - Prefer archival sky spectrum to have higher resolution
[1;31m[WARNING] ::[0m [1;34mflexure.py 375 get_fwhm_gauss_smooth()[0m - New Sky has higher resolution than Archive.  Not smoothing
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflexure.py 225 spec_flex_shift()[0m - Need to mask bad pixels
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflexure.py 228 spec_flex_shift()[0m - Consider taking median first [5 pixel]
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflexure.py 243 spec_flex_shift()[0m - Consider taking median first [5 pixel]
[1;32m[INFO]    ::[0m [1;34mflexure.py 307 spec_flex_shift()[0m - Flexure correction of -0.037 pixels
------------------------------ Captured log call -------------------------------
[33mWARNING [0m matplotlib.font_manager:font_manager.py:1350 findfont: Font family ['times new roman'] not found. Falling back to DejaVu Sans.
[33mWARNING [0m matplotlib.font_manager:font_manager.py:1350 findfont: Font family ['times new roman'] not found. Falling back to DejaVu Sans.
[33mWARNING [0m matplotlib.font_manager:font_manager.py:1350 findfont: Font family ['times new roman'] not found. Falling back to DejaVu Sans.
[33mWARNING [0m matplotlib.font_manager:font_manager.py:1350 findfont: Font family ['Helvetica'] not found. Falling back to DejaVu Sans.
[33mWARNING [0m matplotlib.font_manager:font_manager.py:1350 findfont: Font family ['Helvetica'] not found. Falling back to DejaVu Sans.
[33mWARNING [0m matplotlib.font_manager:font_manager.py:1350 findfont: Font family ['Helvetica'] not found. Falling back to DejaVu Sans.
[33mWARNING [0m matplotlib.font_manager:font_manager.py:1350 findfont: Font family ['Helvetica'] not found. Falling back to DejaVu Sans.
=========================== short test summary info ============================
FAILED ../../PypeIt/pypeit/tests/test_flexure.py::test_flex_shift - NameError...
FAILED ../../PypeIt/pypeit/tests/test_runpypeit.py::test_run_pypeit - NameErr...
[31m=========== [31m[1m2 failed[0m, [32m199 passed[0m, [33m1051 warnings[0m[31m in 449.55s (0:07:29)[0m[31m ===========[0m

Unit Tests Results:
-------------------------
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.5, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 -- /root/miniconda3/bin/python
cachedir: .pytest_cache
hypothesis profile 'default' -> database=DirectoryBasedExampleDatabase('/tmp/REDUX_OUT/.hypothesis/examples')
rootdir: /PypeIt-development-suite/unit_tests
plugins: hypothesis-6.14.2, arraydiff-0.3, astropy-header-0.1.2, cov-2.12.1, doctestplus-0.10.0, filter-subpackage-0.1.1, openfiles-0.5.0, remotedata-0.3.2
[1mcollecting ... [0mcollected 118 items

../../PypeIt-development-suite/unit_tests/test_biasframe.py::test_process [32mPASSED[0m[32m [  0%][0m
../../PypeIt-development-suite/unit_tests/test_biasframe.py::test_io [32mPASSED[0m[32m [  1%][0m
../../PypeIt-development-suite/unit_tests/test_biasframe.py::test_process_multidet [32mPASSED[0m[32m [  2%][0m
../../PypeIt-development-suite/unit_tests/test_biasframe.py::test_mosaic_io [32mPASSED[0m[32m [  3%][0m
../../PypeIt-development-suite/unit_tests/test_bpmimage.py::test_keck_lris_red [32mPASSED[0m[33m [  4%][0m
../../PypeIt-development-suite/unit_tests/test_bpmimage.py::test_keck_deimos [32mPASSED[0m[33m [  5%][0m
../../PypeIt-development-suite/unit_tests/test_buildimage.py::test_combine_deimos_flats [32mPASSED[0m[33m [  5%][0m
../../PypeIt-development-suite/unit_tests/test_buildimage.py::test_lris_red_biases [32mPASSED[0m[33m [  6%][0m
../../PypeIt-development-suite/unit_tests/test_calibrations.py::test_it_all [32mPASSED[0m[33m [  7%][0m
../../PypeIt-development-suite/unit_tests/test_calibrations.py::test_reuse [32mPASSED[0m[33m [  8%][0m
../../PypeIt-development-suite/unit_tests/test_chk_calibs.py::test_chk_calibs_not [32mPASSED[0m[33m [  9%][0m
../../PypeIt-development-suite/unit_tests/test_chk_calibs.py::test_chk_calibs_deimos [32mPASSED[0m[33m [ 10%][0m
../../PypeIt-development-suite/unit_tests/test_frametype.py::test_deimos [32mPASSED[0m[33m [ 11%][0m
../../PypeIt-development-suite/unit_tests/test_frametype.py::test_mosfire [32mPASSED[0m[33m [ 11%][0m
../../PypeIt-development-suite/unit_tests/test_frametype.py::test_nires [32mPASSED[0m[33m [ 12%][0m
../../PypeIt-development-suite/unit_tests/test_input_files.py::test_read_fluxing_files [32mPASSED[0m[33m [ 13%][0m
../../PypeIt-development-suite/unit_tests/test_input_files.py::test_read_coadd1d_files [32mPASSED[0m[33m [ 14%][0m
../../PypeIt-development-suite/unit_tests/test_input_files.py::test_read_coadd2d_files [32mPASSED[0m[33m [ 15%][0m
../../PypeIt-development-suite/unit_tests/test_input_files.py::test_read_flexure_files [32mPASSED[0m[33m [ 16%][0m
../../PypeIt-development-suite/unit_tests/test_input_files.py::test_read_pypeit_files [32mPASSED[0m[33m [ 16%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_deimos [32mPASSED[0m[33m [ 17%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_lris [32mPASSED[0m[33m [ 18%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_nires [32mPASSED[0m[33m [ 19%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_nirspec [32mPASSED[0m[33m [ 20%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_kast [32mPASSED[0m[33m [ 21%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_vlt_xshooter_uvb [32mPASSED[0m[33m [ 22%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_vlt_xshooter_vis [32mPASSED[0m[33m [ 22%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_vlt_xshooter_nir [32mPASSED[0m[33m [ 23%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_gnirs [32mPASSED[0m[33m [ 24%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_mage [32mPASSED[0m[33m [ 25%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_gmos [32mPASSED[0m[33m [ 26%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_osiris [32mPASSED[0m[33m [ 27%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_bok [32mPASSED[0m[33m [ 27%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_efosc2 [32mPASSED[0m[33m [ 28%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_goodman [32mPASSED[0m[33m [ 29%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_deveny [32mPASSED[0m[33m [ 30%][0m
../../PypeIt-development-suite/unit_tests/test_load_images.py::test_load_fire [32mPASSED[0m[33m [ 31%][0m
../../PypeIt-development-suite/unit_tests/test_maskdesign_matching.py::test_maskdef_id [32mPASSED[0m[33m [ 32%][0m
../../PypeIt-development-suite/unit_tests/test_maskdesign_matching.py::test_add_missing_slits [32mPASSED[0m[33m [ 33%][0m
../../PypeIt-development-suite/unit_tests/test_maskdesign_matching.py::test_overlapped_slits [32mPASSED[0m[33m [ 33%][0m
../../PypeIt-development-suite/unit_tests/test_metadata.py::test_lris_red_multi_400 [32mPASSED[0m[33m [ 34%][0m
../../PypeIt-development-suite/unit_tests/test_metadata.py::test_lris_red_multi [32mPASSED[0m[33m [ 35%][0m
../../PypeIt-development-suite/unit_tests/test_metadata.py::test_lris_red_multi_calib [32mPASSED[0m[33m [ 36%][0m
../../PypeIt-development-suite/unit_tests/test_metadata.py::test_lris_red_multi_run [32mPASSED[0m[33m [ 37%][0m
../../PypeIt-development-suite/unit_tests/test_metadata.py::test_lris_blue_pypeit_overwrite [32mPASSED[0m[33m [ 38%][0m
../../PypeIt-development-suite/unit_tests/test_mosaic.py::test_transform [32mPASSED[0m[33m [ 38%][0m
../../PypeIt-development-suite/unit_tests/test_mosaic.py::test_io [32mPASSED[0m[33m [ 39%][0m
../../PypeIt-development-suite/unit_tests/test_mosaic.py::test_gemini_gmos [32mPASSED[0m[33m [ 40%][0m
../../PypeIt-development-suite/unit_tests/test_opticalmodel.py::test_detectormap [32mPASSED[0m[33m [ 41%][0m
../../PypeIt-development-suite/unit_tests/test_opticalmodel.py::test_deimos_distortion [32mPASSED[0m[33m [ 42%][0m
../../PypeIt-development-suite/unit_tests/test_opticalmodel.py::test_deimos_mask_coordinates [32mPASSED[0m[33m [ 43%][0m
../../PypeIt-development-suite/unit_tests/test_opticalmodel.py::test_deimos_ccd_slits [32mPASSED[0m[33m [ 44%][0m
../../PypeIt-development-suite/unit_tests/test_processimage.py::test_instantiate [32mPASSED[0m[33m [ 44%][0m
../../PypeIt-development-suite/unit_tests/test_processimage.py::test_overscan_subtract [32mPASSED[0m[33m [ 45%][0m
../../PypeIt-development-suite/unit_tests/test_processimage.py::test_continuum_subtraction [32mPASSED[0m[33m [ 46%][0m
../../PypeIt-development-suite/unit_tests/test_processimage.py::test_lacosmic [32mPASSED[0m[33m [ 47%][0m
../../PypeIt-development-suite/unit_tests/test_pypeitsetup.py::test_init [32mPASSED[0m[33m [ 48%][0m
../../PypeIt-development-suite/unit_tests/test_pypeitsetup.py::test_build_fitstbl [32mPASSED[0m[33m [ 49%][0m
../../PypeIt-development-suite/unit_tests/test_pypeitsetup.py::test_image_type [32mPASSED[0m[33m [ 50%][0m
../../PypeIt-development-suite/unit_tests/test_pypeitsetup.py::test_type [32mPASSED[0m[33m [ 50%][0m
../../PypeIt-development-suite/unit_tests/test_pypeitsetup.py::test_run [32mPASSED[0m[33m [ 51%][0m
../../PypeIt-development-suite/unit_tests/test_pypeitsetup.py::test_run_calcheck [32mPASSED[0m[33m [ 52%][0m
../../PypeIt-development-suite/unit_tests/test_pypeitsetup.py::test_run_setup [32mPASSED[0m[33m [ 53%][0m
../../PypeIt-development-suite/unit_tests/test_pypeitsetup.py::test_run_on_bad_headers [32mPASSED[0m[33m [ 54%][0m
../../PypeIt-development-suite/unit_tests/test_runcalibonly.py::test_run_pypeit_calib_only [32mPASSED[0m[33m [ 55%][0m
../../PypeIt-development-suite/unit_tests/test_scienceimage.py::test_proc_diff [32mPASSED[0m[33m [ 55%][0m
../../PypeIt-development-suite/unit_tests/test_scripts.py::test_quicklook [31mFAILED[0m[31m [ 56%][0m
../../PypeIt-development-suite/unit_tests/test_scripts.py::test_trace_add_rm [32mPASSED[0m[31m [ 57%][0m
../../PypeIt-development-suite/unit_tests/test_scripts.py::test_view_fits_proc [32mPASSED[0m[31m [ 58%][0m
../../PypeIt-development-suite/unit_tests/test_scripts.py::test_view_fits_mosaic [32mPASSED[0m[31m [ 59%][0m
../../PypeIt-development-suite/unit_tests/test_scripts.py::test_coadd1d_1 [32mPASSED[0m[31m [ 60%][0m
../../PypeIt-development-suite/unit_tests/test_scripts.py::test_obslog [32mPASSED[0m[31m [ 61%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_lris_red_mark4 [32mPASSED[0m[31m [ 61%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_lris_red [32mPASSED[0m[31m [ 62%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_lris_red_orig [32mPASSED[0m[31m [ 63%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_lris_blue [32mPASSED[0m[31m [ 64%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_lris_blue_orig [32mPASSED[0m[31m [ 65%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_shane_kast_blue [32mPASSED[0m[31m [ 66%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_shane_kast_red [32mPASSED[0m[31m [ 66%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_deimos [32mPASSED[0m[31m [ 67%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_deimos_multiconfig [32mPASSED[0m[31m [ 68%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_deimos_multiconfig_clean [32mPASSED[0m[31m [ 69%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_mosfire [32mPASSED[0m[31m [ 70%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_mosfire_multiconfig [32mPASSED[0m[31m [ 71%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_nires [32mPASSED[0m[31m [ 72%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_keck_nirspec [32mPASSED[0m[31m [ 72%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_magellan_mage [32mPASSED[0m[31m [ 73%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_wht_isis_blue [32mPASSED[0m[31m [ 74%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_vlt_xshooter_uvb [32mPASSED[0m[31m [ 75%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_vlt_xshooter_vis [32mPASSED[0m[31m [ 76%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_vlt_xshooter_nir [32mPASSED[0m[31m [ 77%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_gemini_gnirs [32mPASSED[0m[31m [ 77%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_not_alfosc [32mPASSED[0m[31m [ 78%][0m
../../PypeIt-development-suite/unit_tests/test_setups.py::test_setup_vlt_fors2 [32mPASSED[0m[31m [ 79%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_mdm_osmos [32mPASSED[0m[31m [ 80%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_gemini_flamingos [32mPASSED[0m[31m [ 81%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_gemini_gnirs [32mPASSED[0m[31m [ 82%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_lbt_luci_ii [32mPASSED[0m[31m [ 83%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_lbt_luci_i [32mPASSED[0m[31m [ 83%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_gemini_gmos_gmossham [32mPASSED[0m[31m [ 84%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_gemini_gmos_gmossham_mosaic [32mPASSED[0m[31m [ 85%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_magellanfire_echelle [32mPASSED[0m[31m [ 86%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_magellanfire_long [32mPASSED[0m[31m [ 87%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_keckdeimos [32mPASSED[0m[31m [ 88%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_kecklrisblue [32mPASSED[0m[31m [ 88%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_kecklrisred [32mPASSED[0m[31m [ 89%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_kecknires [32mPASSED[0m[31m [ 90%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_kecknirspec [32mPASSED[0m[31m [ 91%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_shanekastredret [32mPASSED[0m[31m [ 92%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_shanekastred [32mPASSED[0m[31m [ 93%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_tngdolores [32mPASSED[0m[31m [ 94%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_vltxshooteruvb [32mPASSED[0m[31m [ 94%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_vltxshootervis [32mPASSED[0m[31m [ 95%][0m
../../PypeIt-development-suite/unit_tests/test_spectrographs.py::test_vltxshooternir [32mPASSED[0m[31m [ 96%][0m
../../PypeIt-development-suite/unit_tests/test_telluric.py::test_telluric_init [32mPASSED[0m[31m [ 97%][0m
../../PypeIt-development-suite/unit_tests/test_telluric.py::test_telluric_io [32mPASSED[0m[31m [ 98%][0m
../../PypeIt-development-suite/unit_tests/test_traceimage.py::test_process [32mPASSED[0m[31m [ 99%][0m
../../PypeIt-development-suite/unit_tests/test_wmko_flux_std.py::test_wmko_flux_std [32mPASSED[0m[31m [100%][0m

=================================== FAILURES ===================================
[31m[1m________________________________ test_quicklook ________________________________[0m

[94mdef[39;49;00m [92mtest_quicklook[39;49;00m():
[90m# The following needs the LRISb calibration files to be[39;49;00m
[90m# found in a CALIBS/ folder in the DEV Suite.  You can get[39;49;00m
[90m# that folder here:[39;49;00m
[90m# https://drive.google.com/drive/folders/1NSg5Rmr8hD_1-fOchQc3WXjt59D6f9od?usp=sharing[39;49;00m
calib_dir = os.path.join(os.environ[[33m'[39;49;00m[33mPYPEIT_DEV[39;49;00m[33m'[39;49;00m], [33m'[39;49;00m[33mCALIBS[39;49;00m[33m'[39;49;00m)
[94mif[39;49;00m [95mnot[39;49;00m os.path.isdir(calib_dir):
[94mraise[39;49;00m [96mIOError[39;49;00m([33m"[39;49;00m[33mYou need to get the CALIBS folder as described above!![39;49;00m[33m"[39;49;00m)

[90m# Define the output directories (HARDCODED!!)[39;49;00m
cdir = os.getcwd()
os.chdir(data_path([33m'[39;49;00m[33m'[39;49;00m))
outdir = data_path([33m'[39;49;00m[33mkeck_lris_blue_A[39;49;00m[33m'[39;49;00m)
[90m# Remove them if they already exist[39;49;00m
[94mif[39;49;00m os.path.isdir(outdir):
shutil.rmtree(outdir)

[90m# Raw path[39;49;00m
droot = os.path.join(os.environ[[33m'[39;49;00m[33mPYPEIT_DEV[39;49;00m[33m'[39;49;00m], [33m'[39;49;00m[33mRAW_DATA[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mkeck_lris_blue[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mlong_600_4000_d560[39;49;00m[33m'[39;49;00m)
pixflat = os.path.join(calib_dir, [33m'[39;49;00m[33mPYPEIT_LRISb_pixflat_B600_2x2_17sep2009.fits.gz[39;49;00m[33m'[39;49;00m)
>       scripts.ql_mos.QLMOS.main(
scripts.ql_mos.QLMOS.parse_args([[33m'[39;49;00m[33mkeck_lris_blue[39;49;00m[33m'[39;49;00m, droot, [33m'[39;49;00m[33mb150910_2033.fits.gz[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mb150910_2051.fits.gz[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mb150910_2070.fits.gz[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33m--det=2[39;49;00m[33m'[39;49;00m, [33mf[39;49;00m[33m'[39;49;00m[33m--user_pixflat=[39;49;00m[33m{[39;49;00mpixflat[33m}[39;49;00m[33m'[39;49;00m]))

[1m[31m/PypeIt-development-suite/unit_tests/test_scripts.py[0m:49:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/scripts/ql_mos.py[0m:128: in main
pypeIt.reduce_all()
[1m[31m/PypeIt/pypeit/pypeit.py[0m:449: in reduce_all
sci_spec2d, sci_sobjs = [96mself[39;49;00m.reduce_exposure(frames, bg_frames=bg_frames,
[1m[31m/PypeIt/pypeit/pypeit.py[0m:622: in reduce_exposure
= [96mself[39;49;00m.extract_one(frames, [96mself[39;49;00m.det, sciImg_list[i], objFind_list[i],
[1m[31m/PypeIt/pypeit/pypeit.py[0m:862: in extract_one
tilts = [96mself[39;49;00m.exTract.run(final_global_sky, ra=[96mself[39;49;00m.fitstbl[[33m"[39;49;00m[33mra[39;49;00m[33m"[39;49;00m][frames[[94m0[39;49;00m]],
[1m[31m/PypeIt/pypeit/extraction.py[0m:394: in run
[96mself[39;49;00m.spec_flexure_correct(mode=[33m'[39;49;00m[33mglobal[39;49;00m[33m'[39;49;00m)
[1m[31m/PypeIt/pypeit/extraction.py[0m:515: in spec_flexure_correct
flex_list = flexure.spec_flexure_slit([96mself[39;49;00m.slits, [96mself[39;49;00m.slits.slitord_id, [96mself[39;49;00m.extract_bpm,
[1m[31m/PypeIt/pypeit/core/flexure.py[0m:680: in spec_flexure_slit
flex_list = spec_flex_shift_global(slit_specs, islit, sky_spectrum, arx_fwhm_pix, empty_flex_dict,
[1m[31m/PypeIt/pypeit/core/flexure.py[0m:449: in spec_flex_shift_global
fdict = spec_flex_shift(slit_specs[islit], sky_spectrum, arx_fwhm_pix, mxshft=mxshft, excess_shft=excess_shft,
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

obj_skyspec = <XSpectrum1D: file=none, nspec=1, select=0, wvmin=3104.02 Angstrom, wvmax=5550.93 Angstrom>
arx_skyspec = <XSpectrum1D: file=none, nspec=1, select=0, wvmin=3104.02 Angstrom, wvmax=5550.93 Angstrom>
arx_fwhm_pix = 6.227359018359254, spec_fwhm = 4.260319773257593, mxshft = 20
excess_shft = 'use_median', method = 'slitcen'

[94mdef[39;49;00m [92mspec_flex_shift[39;49;00m(obj_skyspec, arx_skyspec, arx_fwhm_pix, spec_fwhm=[94mNone[39;49;00m, mxshft=[94m20[39;49;00m, excess_shft=[33m"[39;49;00m[33mcrash[39;49;00m[33m"[39;49;00m,
method=[33m"[39;49;00m[33mboxcar[39;49;00m[33m"[39;49;00m):
[33m""" Calculate shift between object sky spectrum and archive sky spectrum[39;49;00m
[33m[39;49;00m
[33m    Args:[39;49;00m
[33m        obj_skyspec (:class:`linetools.spectra.xspectrum1d.XSpectrum1d`):[39;49;00m
[33m            Spectrum of the sky related to our object[39;49;00m
[33m        arx_skyspec (:class:`linetools.spectra.xspectrum1d.XSpectrum1d`):[39;49;00m
[33m            Archived sky spectrum[39;49;00m
[33m        arx_fwhm_pix (:obj:`float`):[39;49;00m
[33m            Spectral FWHM (in pixels) of the archived sky spectrum.[39;49;00m
[33m        spec_fwhm (:obj:`float`, optional):[39;49;00m
[33m            Spectral FWHM (in pixels) of the sky spectrum related to our object/slit.[39;49;00m
[33m        mxshft (:obj:`float`, optional):[39;49;00m
[33m            Maximum allowed shift from flexure;  note there are cases that[39;49;00m
[33m            have been known to exceed even 30 pixels..[39;49;00m
[33m        excess_shft (:obj:`str`, optional):[39;49;00m
[33m            Behavior of the code when a measured flexure exceeds ``mxshft``.[39;49;00m
[33m            Options are "crash", "set_to_zero", and "continue", where[39;49;00m
[33m            "set_to_zero" sets the shift to zero and moves on, and[39;49;00m
[33m            "continue" simply uses the large flexure shift value.[39;49;00m
[33m        method (:obj:`str`, optional):[39;49;00m
[33m            Which method is used for the spectral flexure correction.[39;49;00m
[33m            Two methods are available: 'boxcar' and 'slitcen' (see spec_flexure_slit()).[39;49;00m
[33m            In this routine, 'method' is only passed to final dict.[39;49;00m
[33m[39;49;00m
[33m    Returns:[39;49;00m
[33m        dict: Contains flexure info.  Keys are:[39;49;00m
[33m[39;49;00m
[33m          - polyfit= fit to the cross-correlation[39;49;00m
[33m          - shift= best shift in pixels[39;49;00m
[33m          - subpix= subpixelation of input spectrum[39;49;00m
[33m          - corr= correlation function[39;49;00m
[33m          - sky_spec= object sky spectrum used (rebinned, etc.)[39;49;00m
[33m          - arx_spec= archived sky spectrum used[39;49;00m
[33m          - corr_cen= center of the correlation function[39;49;00m
[33m          - smooth= Degree of smoothing of input spectrum to match archive[39;49;00m
[33m    """[39;49;00m

[90m# TODO None of these routines should have dependencies on XSpectrum1d![39;49;00m

msgs.warn([33m"[39;49;00m[33mIf we use Paranal, cut down on wavelength early on[39;49;00m[33m"[39;49;00m)

[90m# get gaussian sigma (pixels) for smoothing[39;49;00m
smooth_fwhm_pix = get_fwhm_gauss_smooth(arx_skyspec, obj_skyspec, arx_fwhm_pix, spec_fwhm=spec_fwhm)

[94mif[39;49;00m smooth_fwhm_pix [95mis[39;49;00m [94mNone[39;49;00m:
[90m# smooth_fwhm_pix is None if spec_fwhm<0, i.e., the wavelength calibration is bad[39;49;00m
msgs.warn([33m'[39;49;00m[33mNo flexure correction could be computed for this slit/object[39;49;00m[33m'[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[94mif[39;49;00m smooth_fwhm_pix > [94m0[39;49;00m:
arx_skyspec = arx_skyspec.gauss_smooth(smooth_fwhm_pix)

[90m#Determine region of wavelength overlap[39;49;00m
min_wave = [96mmax[39;49;00m(np.amin(arx_skyspec.wavelength.value), np.amin(obj_skyspec.wavelength.value))
max_wave = [96mmin[39;49;00m(np.amax(arx_skyspec.wavelength.value), np.amax(obj_skyspec.wavelength.value))

[90m#Smooth higher resolution spectrum by smooth_sig (flux is conserved!)[39;49;00m
[90m#    if np.median(obj_res) >= np.median(arx_res):[39;49;00m
[90m#        msgs.warn("New Sky has higher resolution than Archive.  Not smoothing")[39;49;00m
[90m#obj_sky_newflux = ndimage.gaussian_filter(obj_sky.flux, smooth_sig)[39;49;00m
[90m#    else:[39;49;00m
[90m#tmp = ndimage.gaussian_filter(arx_sky.flux, smooth_sig)[39;49;00m
[90m#        arx_skyspec = arx_skyspec.gauss_smooth(smooth_sig_pix*2*np.sqrt(2*np.log(2)))[39;49;00m
[90m#arx_sky.flux = ndimage.gaussian_filter(arx_sky.flux, smooth_sig)[39;49;00m

[90m# Define wavelengths of overlapping spectra[39;49;00m
keep_idx = np.where((obj_skyspec.wavelength.value>=min_wave) &
(obj_skyspec.wavelength.value<=max_wave))[[94m0[39;49;00m]
[90m#keep_wave = [i for i in obj_sky.wavelength.value if i>=min_wave if i<=max_wave][39;49;00m

[90m#Rebin both spectra onto overlapped wavelength range[39;49;00m
[94mif[39;49;00m [96mlen[39;49;00m(keep_idx) <= [94m50[39;49;00m:
msgs.warn([33m"[39;49;00m[33mNot enough overlap between sky spectra[39;49;00m[33m"[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[90m# rebin onto object ALWAYS[39;49;00m
keep_wave = obj_skyspec.wavelength[keep_idx]
arx_skyspec = arx_skyspec.rebin(keep_wave)
obj_skyspec = obj_skyspec.rebin(keep_wave)
[90m# Trim edges (rebinning is junk there)[39;49;00m
arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:[94m2[39;49;00m] = [94m0.[39;49;00m
arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,-[94m2[39;49;00m:] = [94m0.[39;49;00m
obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:[94m2[39;49;00m] = [94m0.[39;49;00m
obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,-[94m2[39;49;00m:] = [94m0.[39;49;00m

[90m# Set minimum to 0.  For bad rebinning and for pernicious extractions[39;49;00m
obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:] = np.maximum(obj_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:], [94m0.[39;49;00m)
arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:] = np.maximum(arx_skyspec.data[[33m'[39;49;00m[33mflux[39;49;00m[33m'[39;49;00m][[94m0[39;49;00m,:], [94m0.[39;49;00m)

[90m# Normalize spectra to unit average sky count[39;49;00m
norm = np.sum(obj_skyspec.flux.value)/obj_skyspec.npix
norm2 = np.sum(arx_skyspec.flux.value)/arx_skyspec.npix
[94mif[39;49;00m norm <= [94m0[39;49;00m:
msgs.warn([33m"[39;49;00m[33mBad normalization of object in flexure algorithm[39;49;00m[33m"[39;49;00m)
msgs.warn([33m"[39;49;00m[33mWill try the median[39;49;00m[33m"[39;49;00m)
norm = np.median(obj_skyspec.flux.value)
[94mif[39;49;00m norm <= [94m0[39;49;00m:
msgs.warn([33m"[39;49;00m[33mImproper sky spectrum for flexure.  Is it too faint??[39;49;00m[33m"[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m
[94mif[39;49;00m norm2 <= [94m0[39;49;00m:
msgs.warn([33m'[39;49;00m[33mBad normalization of archive in flexure. You are probably using wavelengths [39;49;00m[33m'[39;49;00m
[33m'[39;49;00m[33mwell beyond the archive.[39;49;00m[33m'[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m
obj_skyspec.flux = obj_skyspec.flux / norm
arx_skyspec.flux = arx_skyspec.flux / norm2

[90m# Deal with bad pixels[39;49;00m
msgs.work([33m"[39;49;00m[33mNeed to mask bad pixels[39;49;00m[33m"[39;49;00m)

[90m# Deal with underlying continuum[39;49;00m
msgs.work([33m"[39;49;00m[33mConsider taking median first [5 pixel][39;49;00m[33m"[39;49;00m)
everyn = obj_skyspec.npix // [94m20[39;49;00m
pypeitFit_obj, _ = fitting.iterfit(obj_skyspec.wavelength.value, obj_skyspec.flux.value,
nord = [94m3[39;49;00m,  kwargs_bspline={[33m'[39;49;00m[33meveryn[39;49;00m[33m'[39;49;00m: everyn}, kwargs_reject={[33m'[39;49;00m[33mgroupbadpix[39;49;00m[33m'[39;49;00m:[94mTrue[39;49;00m,[33m'[39;49;00m[33mmaxrej[39;49;00m[33m'[39;49;00m:[94m1[39;49;00m},
maxiter = [94m15[39;49;00m, upper = [94m3.0[39;49;00m, lower = [94m3.0[39;49;00m)
obj_sky_cont, _ = pypeitFit_obj.value(obj_skyspec.wavelength.value)

obj_sky_flux = obj_skyspec.flux.value - obj_sky_cont
pypeitFit_sky, _ = fitting.iterfit(arx_skyspec.wavelength.value, arx_skyspec.flux.value,
nord = [94m3[39;49;00m,  kwargs_bspline={[33m'[39;49;00m[33meveryn[39;49;00m[33m'[39;49;00m: everyn}, kwargs_reject={[33m'[39;49;00m[33mgroupbadpix[39;49;00m[33m'[39;49;00m:[94mTrue[39;49;00m,[33m'[39;49;00m[33mmaxrej[39;49;00m[33m'[39;49;00m:[94m1[39;49;00m},
maxiter = [94m15[39;49;00m, upper = [94m3.0[39;49;00m, lower = [94m3.0[39;49;00m)
arx_sky_cont, _ = pypeitFit_sky.value(arx_skyspec.wavelength.value)
arx_sky_flux = arx_skyspec.flux.value - arx_sky_cont

[90m# Consider sharpness filtering (e.g. LowRedux)[39;49;00m
msgs.work([33m"[39;49;00m[33mConsider taking median first [5 pixel][39;49;00m[33m"[39;49;00m)

[90m#Cross correlation of spectra[39;49;00m
[90m#corr = np.correlate(arx_skyspec.flux, obj_skyspec.flux, "same")[39;49;00m
corr = np.correlate(arx_sky_flux, obj_sky_flux, [33m"[39;49;00m[33msame[39;49;00m[33m"[39;49;00m)

[90m#Create array around the max of the correlation function for fitting for subpixel max[39;49;00m
[90m# Restrict to pixels within maxshift of zero lag[39;49;00m
lag0 = corr.size//[94m2[39;49;00m
[90m#mxshft = settings.argflag['reduce']['flexure']['maxshift'][39;49;00m
max_corr = np.argmax(corr[lag0-mxshft:lag0+mxshft]) + lag0-mxshft
subpix_grid = np.linspace(max_corr-[94m3.[39;49;00m, max_corr+[94m3.[39;49;00m, [94m7[39;49;00m)

[90m#Fit a 2-degree polynomial to peak of correlation function. JFH added this if/else to not crash for bad slits[39;49;00m
[94mif[39;49;00m np.any(np.isfinite(corr[subpix_grid.astype(np.int)])):
fit = fitting.PypeItFit(xval=subpix_grid, yval=corr[subpix_grid.astype(np.int)],
func=[33m'[39;49;00m[33mpolynomial[39;49;00m[33m'[39;49;00m, order=np.atleast_1d([94m2[39;49;00m))
fit.fit()
max_fit = -[94m0.5[39;49;00m * fit.fitc[[94m1[39;49;00m] / fit.fitc[[94m2[39;49;00m]

shift = [96mfloat[39;49;00m(max_fit) - lag0
[90m# Deal with the case of shifts greater than ``mxshft``[39;49;00m
[90m# We need to compare the absolute value of shift to ``mxshft``, since shift can be[39;49;00m
[90m# positive or negative, while ``mxshft`` is generally only positive[39;49;00m
[90m# We use the int of abs(shift) to avoid to trigger the error/warning for differences <1pixel[39;49;00m
[94mif[39;49;00m [96mint[39;49;00m([96mabs[39;49;00m(shift)) > mxshft:
msgs.warn([33mf[39;49;00m[33m"[39;49;00m[33mComputed shift [39;49;00m[33m{[39;49;00mshift[33m:[39;49;00m[33m.1f[39;49;00m[33m}[39;49;00m[33m pix is [39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mlarger than specified maximum [39;49;00m[33m{[39;49;00mmxshft[33m}[39;49;00m[33m pix.[39;49;00m[33m"[39;49;00m)

[94mif[39;49;00m excess_shft == [33m"[39;49;00m[33mcrash[39;49;00m[33m"[39;49;00m:
msgs.error([33mf[39;49;00m[33m"[39;49;00m[33mFlexure compensation failed for one of your[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mobjects.  Either adjust the [39;49;00m[33m\"[39;49;00m[33mspec_maxshift[39;49;00m[33m\"[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mFlexurePar Keyword, or see the flexure documentation[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33mfor information on how to bypass this error using the[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33mf[39;49;00m[33m"[39;49;00m[33m\"[39;49;00m[33mexcessive_shift[39;49;00m[33m\"[39;49;00m[33m keyword.[39;49;00m[33m{[39;49;00mmsgs.newline()[33m}[39;49;00m[33m"[39;49;00m
[33m"[39;49;00m[33mhttps://pypeit.readthedocs.io/en/release/flexure.html[39;49;00m[33m"[39;49;00m)

[94melif[39;49;00m excess_shft == [33m"[39;49;00m[33mset_to_zero[39;49;00m[33m"[39;49;00m:
msgs.warn([33m"[39;49;00m[33mFlexure compensation failed for one of your objects.[39;49;00m[33m"[39;49;00m)
msgs.warn([33m"[39;49;00m[33mSetting the flexure correction shift to 0 pixels.[39;49;00m[33m"[39;49;00m)
[90m# Return the usual dictionary, but with a shift == 0[39;49;00m
shift = [94m0.0[39;49;00m

[94melif[39;49;00m excess_shft == [33m"[39;49;00m[33mcontinue[39;49;00m[33m"[39;49;00m:
msgs.warn([33m"[39;49;00m[33mApplying flexure shift larger than specified max![39;49;00m[33m"[39;49;00m)

[94melif[39;49;00m excess_shft == [33m"[39;49;00m[33muse_median[39;49;00m[33m"[39;49;00m:
msgs.warn([33m"[39;49;00m[33mWill try to use a flexure shift from other slit/object. [39;49;00m[33m"[39;49;00m
[33m"[39;49;00m[33mIf not available, flexure correction will not be applied.[39;49;00m[33m"[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[94melse[39;49;00m:
msgs.error([33mf[39;49;00m[33m"[39;49;00m[33mFlexurePar Keyword excessive_shift = [39;49;00m[33m\"[39;49;00m[33m{[39;49;00mexcess_shft[33m}[39;49;00m[33m\"[39;49;00m[33m [39;49;00m[33m"[39;49;00m
[33m"[39;49;00m[33mnot recognized.[39;49;00m[33m"[39;49;00m)

[94melse[39;49;00m:
fit = fitting.PypeItFit(xval=subpix_grid, yval=[94m0.0[39;49;00m*subpix_grid,
func=[33m'[39;49;00m[33mpolynomial[39;49;00m[33m'[39;49;00m, order=np.atleast_1d([94m2[39;49;00m))
fit.fit()
msgs.warn([33m'[39;49;00m[33mFlexure compensation failed for one of your objects[39;49;00m[33m'[39;49;00m)
[94mreturn[39;49;00m [94mNone[39;49;00m

[90m#Calculate and apply shift in wavelength[39;49;00m
[90m# shift = float(max_fit)-lag0[39;49;00m
msgs.info([33mf[39;49;00m[33m"[39;49;00m[33mFlexure correction of [39;49;00m[33m{[39;49;00mshift[33m:[39;49;00m[33m.3f[39;49;00m[33m}[39;49;00m[33m pixels[39;49;00m[33m"[39;49;00m)
[90m#model = (fit[2]*(subpix_grid**2.))+(fit[1]*subpix_grid)+fit[0][39;49;00m

[94mreturn[39;49;00m [96mdict[39;49;00m(polyfit=fit,
shift=shift,
subpix=subpix_grid,
corr=corr[subpix_grid.astype(np.int)],
sky_spec=obj_skyspec,
arx_spec=arx_skyspec,
corr_cen=corr.size/[94m2[39;49;00m,
>                   smooth=smooth_sig_pix)
[1m[31mE       NameError: name 'smooth_sig_pix' is not defined[0m

[1m[31m/PypeIt/pypeit/core/flexure.py[0m:317: NameError
----------------------------- Captured stderr call -----------------------------
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b150910_2033.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b150910_2051.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b150910_2070.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 680 unique_configurations()[0m - Setup column already set.  Finding unique configurations.
[1;32m[INFO]    ::[0m [1;34mmetadata.py 691 unique_configurations()[0m - Found 1 unique configurations.
[1;32m[INFO]    ::[0m [1;34minputfiles.py 498 vet()[0m - PypeIt file successfully vetted.
[1;32m[INFO]    ::[0m [1;34minputfiles.py 467 write()[0m - PypeIt input file written to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/keck_lris_blue_A.pypeit
[1;32m[INFO]    ::[0m [1;34minputfiles.py 117 from_file()[0m - Loading the reduction file
[1;32m[INFO]    ::[0m [1;34minputfiles.py 159 from_file()[0m - PypeIt input file loaded successfully.
[1;32m[INFO]    ::[0m [1;34minputfiles.py 498 vet()[0m - PypeIt file successfully vetted.
[1;32m[INFO]    ::[0m [1;34mpypeit.py 103 __init__()[0m - Loaded spectrograph keck_lris_blue
[1;32m[INFO]    ::[0m [1;34mpypeit.py 119 __init__()[0m - Setting configuration-specific parameters using b150910_2070.fits.gz
[1;32m[INFO]    ::[0m [1;34mpypeit.py 127 __init__()[0m - Built full PypeIt parameter set.
[1;32m[INFO]    ::[0m [1;34mpypeit.py 139 __init__()[0m - Compiling metadata
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b150910_2033.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b150910_2051.fits.gz
[1;32m[INFO]    ::[0m [1;34mmetadata.py 213 _build()[0m - Added metadata for b150910_2070.fits.gz
[1;31m[WARNING] ::[0m [1;34mmetadata.py 1257 get_frame_types()[0m - Removing existing frametype and framebit columns.
[1;32m[INFO]    ::[0m [1;34mmetadata.py 1264 get_frame_types()[0m - Typing files
[1;32m[INFO]    ::[0m [1;34mmetadata.py 1274 get_frame_types()[0m - Using user-provided frame types.
[1;32m[INFO]    ::[0m [1;34mmetadata.py 680 unique_configurations()[0m - Setup column already set.  Finding unique configurations.
[1;32m[INFO]    ::[0m [1;34mmetadata.py 691 unique_configurations()[0m - Found 1 unique configurations.
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 1004 check_for_calibs()[0m - Congrats!!  You passed the calibrations inspection!!
[1;32m[INFO]    ::[0m [1;34mpypeit.py 173 __init__()[0m - Setting reduction path to /PypeIt/pypeit/tests/files/keck_lris_blue_A
[1;32m[INFO]    ::[0m [1;34mpypeit.py 174 __init__()[0m - Master calibration data output to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters
[1;32m[INFO]    ::[0m [1;34mpypeit.py 175 __init__()[0m - Science data output to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Science
[1;32m[INFO]    ::[0m [1;34mpypeit.py 176 __init__()[0m - Quality assessment plots output to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/QA
[1;32m[INFO]    ::[0m [1;34mpypeit.py 536 reduce_exposure()[0m - Reducing target s2
Combining frames:
b150910_2070.fits.gz

[1;32m[INFO]    ::[0m [1;34mpypeit.py 548 reduce_exposure()[0m - Detectors to work on: [2]
[1;32m[INFO]    ::[0m [1;34mpypeit.py 554 reduce_exposure()[0m - Working on detector 2
[1;32m[INFO]    ::[0m [1;34mpypeit.py 683 calib_one()[0m - Working on detector 2
[1;32m[INFO]    ::[0m [1;34mkeck_lris.py 361 get_rawimage()[0m - Reading LRIS file: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/long_600_4000_d560/b150910_2070.fits.gz
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 679 get_slits()[0m - Creating Master Edges using files:
[1;34mcalibrations.py 681 get_slits()[0m - b150910_2051.fits.gz
[1;32m[INFO]    ::[0m [1;34mkeck_lris.py 361 get_rawimage()[0m - Reading LRIS file: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/long_600_4000_d560/b150910_2051.fits.gz
[1;32m[INFO]    ::[0m [1;34medgetrace.py 923 initial_trace()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 924 initial_trace()[0m -              Initialize Edge Tracing
[1;32m[INFO]    ::[0m [1;34medgetrace.py 925 initial_trace()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34mtrace.py 87 detect_slit_edges()[0m - Detecting slit edges in the trace image
[1;32m[INFO]    ::[0m [1;34mtrace.py 130 detect_slit_edges()[0m - Applying bad pixel mask
[1;32m[INFO]    ::[0m [1;34mtrace.py 171 identify_traces()[0m - Finding unique traces among detected edges.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1797 centroid_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1798 centroid_refine()[0m -              Edge Centroid Refinement
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1799 centroid_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1800 centroid_refine()[0m - Width of window for centroiding the edges: 6.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1801 centroid_refine()[0m - Max shift between spectrally adjacent pixels: 0.15
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1802 centroid_refine()[0m - Max centroid error: None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1803 centroid_refine()[0m - Minimum spectral pixels for a valid trace: 204.8
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1842 centroid_refine()[0m - Found 2 left edge trace(s) to refine
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1862 centroid_refine()[0m - Following 2 left edge(s) from row 255; 0 trace(s) remain.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2039 check_traces()[0m - Tolerance for finding repeat traces: 3.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 204.80
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2065 check_traces()[0m - Found 1 short trace(s).
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 1 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1842 centroid_refine()[0m - Found 2 right edge trace(s) to refine
[1;32m[INFO]    ::[0m [1;34medgetrace.py 1862 centroid_refine()[0m - Following 2 right edge(s) from row 117; 0 trace(s) remain.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2039 check_traces()[0m - Tolerance for finding repeat traces: 3.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 204.80
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2065 check_traces()[0m - Found 1 short trace(s).
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 1 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2606 remove_traces()[0m - Removing 2 edge traces.
[1;31m[WARNING] ::[0m [1;34medgetrace.py 2779 spatial_sort()[0m - Fit data is not available; cannot use it for spatially sorting the edges.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2799 spatial_sort()[0m - Re-sorting edges based on where they cross row 1024
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2903 fit_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2904 fit_refine()[0m -          Fitting Polynomial to Edge Trace
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2905 fit_refine()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2906 fit_refine()[0m - Max shift btwn input and remeasured edge centroids: 0.50
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2907 fit_refine()[0m - Max centroid error: None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2908 fit_refine()[0m - Trace fitting function: legendre
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2909 fit_refine()[0m - Trace fitting order: 3
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2910 fit_refine()[0m - Weighting for remeasuring edge centroids: uniform
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2911 fit_refine()[0m - FWHM parameter for remeasuring edge centroids: 3.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2912 fit_refine()[0m - Maximum deviation for fitted data: 5.0
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2913 fit_refine()[0m - Maximum number of rejection iterations: 25
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2914 fit_refine()[0m - Number of remeasuring and refitting iterations: 1
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 409.60
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2194 merge_traces()[0m - No traces merged.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3003 can_pca()[0m - Minium length of traces to include in the PCA: 409.6
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 409.60
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3003 can_pca()[0m - Minium length of traces to include in the PCA: 409.6
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2060 check_traces()[0m - Minimum spectral length of any trace (pixels): 409.60
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2101 check_traces()[0m - Identified 0 bad trace(s) in all.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2799 spatial_sort()[0m - Re-sorting edges based on where they cross row 1024
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2433 check_synced()[0m - Binning: 2,2
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2434 check_synced()[0m - Platescale per binned pixel: 0.27
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2442 check_synced()[0m - Minimum slit gap (binned pixels): None
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2443 check_synced()[0m - Minimum slit length (binned pixels): 14.814814814814813
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2444 check_synced()[0m - Minimum science slit length (binned pixels): 22.22222222222222
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2445 check_synced()[0m - Range in slit length not limited
[1;31m[WARNING] ::[0m [1;34medgetrace.py 2311 _masked_single_slit()[0m - The single slit found has been rejected because it is too short.  If this was by mistake, re-run pypeit with a smaller `minimum_slit_length` parameter.  Otherwise, we assume this is a long-slit with one edge off the detector and with the current slit edges errantly isolating some feature in the data.
[1;31m[WARNING] ::[0m [1;34medgetrace.py 2324 _masked_single_slit()[0m - The mean of the trace image to the left of the left trace is larger than it is to the right of the right trace. Removing the right trace and re-synchronizing.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2606 remove_traces()[0m - Removing 1 edge traces.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2799 spatial_sort()[0m - Re-sorting edges based on where they cross row 1084
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2799 spatial_sort()[0m - Re-sorting edges based on where they cross row 1084
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3803 sync()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3804 sync()[0m -        Synchronizing left and right traces
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3805 sync()[0m - --------------------------------------------------
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3806 sync()[0m - Found 1 left and 0 right trace(s) to add.
[1;31m[WARNING] ::[0m [1;34medgetrace.py 3817 sync()[0m - Only one edge traced.  Ignoring center_mode and adding edge at the opposite edge of the detector.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 3819 sync()[0m - Detector edge buffer: 5
[1;32m[INFO]    ::[0m [1;34medgetrace.py 4048 insert_traces()[0m - Inserting 1 new traces.
[1;32m[INFO]    ::[0m [1;34medgetrace.py 2799 spatial_sort()[0m - Re-sorting edges based on where they cross row 1024
[1;32m[INFO]    ::[0m [1;34mio.py 644 write_to_fits()[0m - Compressing file: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterEdges_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterEdges_A_1_DET02.fits.gz
[1;32m[INFO]    ::[0m [1;34mio.py 644 write_to_fits()[0m - Compressing file: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterSlits_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterSlits_A_1_DET02.fits.gz
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 266 get_arc()[0m - Preparing a master Arc frame
[1;32m[INFO]    ::[0m [1;34mkeck_lris.py 361 get_rawimage()[0m - Reading LRIS file: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/long_600_4000_d560/b150910_2033.fits.gz
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterArc_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 305 get_tiltimg()[0m - Preparing a master Tiltimg frame
[1;32m[INFO]    ::[0m [1;34mkeck_lris.py 361 get_rawimage()[0m - Reading LRIS file: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/long_600_4000_d560/b150910_2033.fits.gz
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterTiltimg_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34marc.py 491 get_censpec()[0m - Extracting approximate arc spectrum along the center of slit 0
[1;32m[INFO]    ::[0m [1;34mwaveio.py 189 load_line_lists()[0m - Arc lamps used: NeI, ArI, CdI, KrI, XeI, ZnI, HgI
[1;32m[INFO]    ::[0m [1;34mautoid.py 1012 full_template()[0m - Processing slit 0
[1;32m[INFO]    ::[0m [1;34mautoid.py 1013 full_template()[0m - Using sigdetect = 10.0
[1;32m[INFO]    ::[0m [1;34mautoid.py 919 set_fwhm()[0m - User-provided arc lines FWHM: 4.0 pixels
[1;32m[INFO]    ::[0m [1;34mautoid.py 1042 full_template()[0m - Shift = -167.990314177664; cc = 0.6317359337736254
[1;32m[INFO]    ::[0m [1;34mautoid.py 728 reidentify()[0m - Cross-correlating with arxiv slit # 0
[1;32m[INFO]    ::[0m [1;34mautoid.py 728 reidentify()[0m - Cross-correlating with arxiv slit # 0
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterWaveCalib_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34marc.py 491 get_censpec()[0m - Extracting approximate arc spectrum along the center of slit 0
[1;32m[INFO]    ::[0m [1;34mwavetilts.py 602 run()[0m - Computing tilts for slit 0/1
[1;32m[INFO]    ::[0m [1;34mwavetilts.py 604 run()[0m - Finding lines for tilt analysis
[1;32m[INFO]    ::[0m [1;34mtracewave.py 86 tilts_find_lines()[0m - Rejecting 1 lines below sigma threshold.
[1;32m[INFO]    ::[0m [1;34mtracewave.py 107 tilts_find_lines()[0m - Removed 4 lines that were too close to neighboring lines.
[1;32m[INFO]    ::[0m [1;34mtracewave.py 129 tilts_find_lines()[0m - Modeling arc line tilts with 17 arc lines
[1;32m[INFO]    ::[0m [1;34mwavetilts.py 621 run()[0m - Trace the tilts
[1;32m[INFO]    ::[0m [1;34mtracewave.py 486 trace_tilts_work()[0m - Number of usable arc lines for tilts: 15/17
[1;32m[INFO]    ::[0m [1;34mtracewave.py 629 trace_tilts()[0m - PCA modeling 15 good tilts
[1;32m[INFO]    ::[0m [1;34mpca.py 102 pca_decomposition()[0m - The unconstrained PCA yields 15 components.
[1;32m[INFO]    ::[0m [1;34mpca.py 116 pca_decomposition()[0m - PCA will include 2 component(s), containing 99.983% of the total variance.
[1;32m[INFO]    ::[0m [1;34mtracepca.py 407 pca_trace_object()[0m - Order of function fit to each component: [2 1]
[1;32m[INFO]    ::[0m [1;34mtracewave.py 486 trace_tilts_work()[0m - Number of usable arc lines for tilts: 15/17
[1;32m[INFO]    ::[0m [1;34mtracewave.py 696 fit_tilts()[0m - Fitting tilts with a low order, 2D legendre2d
[1;32m[INFO]    ::[0m [1;34mtracewave.py 734 fit_tilts()[0m - Residuals: 2D Legendre Fit
[1;32m[INFO]    ::[0m [1;34mtracewave.py 735 fit_tilts()[0m - RMS (pixels): 0.02508768430785326
[1;32m[INFO]    ::[0m [1;34mtracewave.py 736 fit_tilts()[0m - RMS/FWHM: 0.006271921076963315
[1;32m[INFO]    ::[0m [1;34mtracewave.py 738 fit_tilts()[0m - Inverting the fit to generate the tilts image
[1;32m[INFO]    ::[0m [1;34mtracewave.py 797 fit_tilts()[0m - Rejected 0/631953 pixels in final inversion tilts image fit
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterTilts_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 581 get_flats()[0m - Creating Master Illumination Flat using files:
[1;34mcalibrations.py 583 get_flats()[0m - b150910_2051.fits.gz
[1;32m[INFO]    ::[0m [1;34mkeck_lris.py 361 get_rawimage()[0m - Reading LRIS file: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/long_600_4000_d560/b150910_2051.fits.gz
[1;32m[INFO]    ::[0m [1;34mflatfield.py 520 build_waveimg()[0m - Generating wavelength image
[1;32m[INFO]    ::[0m [1;34mflatfield.py 738 fit()[0m - Modeling the flat-field response for slit spat_id=153: 1/1
[1;32m[INFO]    ::[0m [1;34mflatfield.py 819 fit()[0m - Spectral fit of flatfield for 582939/595231  pixels in the slit.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 582939/582939 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.020     9523    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     0.007     9913    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      3     0.006    10094    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      4     0.006    10158    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      5     0.006    10194    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      6     0.006    10203    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      7     0.006    10206    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      8     0.006    10208    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      9     0.006    10210    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                     10     0.006    10211    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                     11     0.006    10211    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.006    10211    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mflatfield.py 908 fit()[0m - Spatial fit of flatfield for 541847/615711  pixels in the slit.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 541847/541847 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.000        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.000        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mflat.py 450 tweak_slit_edges()[0m - Tweaking right slit boundary by 0.3% % (0.79 pixels)
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 541847/541847 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.000        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.000        0    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterFlat_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mio.py 644 write_to_fits()[0m - Compressing file: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterSlits_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterSlits_A_1_DET02.fits.gz
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 627 get_flats()[0m - Using user-defined file: pixelflat_file
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 836 run_the_steps()[0m - Calibration complete!
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 837 run_the_steps()[0m - #######################################################################
[1;32m[INFO]    ::[0m [1;34mpypeit.py 733 objfind_one()[0m - Object finding begins for b150910_2070-s2_LRISb_20150910T053336.806 on det=2
[1;32m[INFO]    ::[0m [1;34mkeck_lris.py 361 get_rawimage()[0m - Reading LRIS file: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/long_600_4000_d560/b150910_2070.fits.gz
[1;31m[WARNING] ::[0m [1;34marc.py 1042 detect_lines()[0m - Requested 1 peaks but only found 0.   Returning all the peaks found.
[1;31m[WARNING] ::[0m [1;34mflexure.py 82 spat_flexure_shift()[0m - No peak found in spatial flexure.  Assuming there is none..
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 165 __init__()[0m - Initialising slits
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 311 run()[0m - Generating tilts image
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 519 global_skysub()[0m - Global sky subtraction for slit: 153
[1;32m[INFO]    ::[0m [1;34mskysub.py 185 global_skysub()[0m - Full fit in global sky sub.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 3 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 581423/593710 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     5.431    32323    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     1.041    33364    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      3     1.024    33413    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      4     1.023    33414    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      5     1.023    33414    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     1.023    33414    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 773 find_objects_pypeline()[0m - Finding objects on slit # 153
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 1372 objs_in_slit()[0m - Automatic finding routine found 2 objects
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 1375 objs_in_slit()[0m - Fitting the object traces
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 1508 objs_in_slit()[0m - Successfully traced a total of 2 objects
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 238 create_skymask()[0m - Generating skymask for slit # 153
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 109 create_skymask()[0m - Masking around object 1 within a radius = 3.9534375870290335 pixels
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 109 create_skymask()[0m - Masking around object 2 within a radius = 4.050235522550525 pixels
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 519 global_skysub()[0m - Global sky subtraction for slit: 153
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 547314/590306 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.006    42992    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.006    42992    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mskysub.py 185 global_skysub()[0m - Full fit in global sky sub.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 3 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 549802/593710 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     1.053    46171    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     1.009    46243    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      3     1.008    46244    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      4     1.008    46245    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      5     1.008    46245    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     1.008    46245    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 343 run()[0m - Skipping 2nd run of finding objects
[1;32m[INFO]    ::[0m [1;34mpypeit.py 683 calib_one()[0m - Working on detector 2
[1;32m[INFO]    ::[0m [1;34mkeck_lris.py 361 get_rawimage()[0m - Reading LRIS file: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/long_600_4000_d560/b150910_2070.fits.gz
[1;32m[INFO]    ::[0m [1;34mdatamodel.py 1539 from_file()[0m - Loading SlitTraceSet from /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterSlits_A_1_DET02.fits.gz
[1;32m[INFO]    ::[0m [1;34mdatamodel.py 1539 from_file()[0m - Loading ArcImage from /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterArc_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mdatamodel.py 1539 from_file()[0m - Loading TiltImage from /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterTiltimg_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mdatamodel.py 1539 from_file()[0m - Loading WaveCalib from /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterWaveCalib_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mdatamodel.py 1539 from_file()[0m - Loading WaveTilts from /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterTilts_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mdatamodel.py 1539 from_file()[0m - Loading FlatImages from /PypeIt/pypeit/tests/files/keck_lris_blue_A/Masters/MasterFlat_A_1_DET02.fits
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 541 get_flats()[0m - Using user-defined file: pixelflat_file
[1;31m[WARNING] ::[0m [1;34mflatfield.py 209 get_bpmflats()[0m - pixelflat has no BPM - using the illumflat BPM
[1;31m[WARNING] ::[0m [1;34mflatfield.py 209 get_bpmflats()[0m - pixelflat has no BPM - using the illumflat BPM
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 836 run_the_steps()[0m - Calibration complete!
[1;32m[INFO]    ::[0m [1;34mcalibrations.py 837 run_the_steps()[0m - #######################################################################
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 238 create_skymask()[0m - Generating skymask for slit # 153
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 109 create_skymask()[0m - Masking around object 1 within a radius = 3.9534375870290335 pixels
[1;32m[INFO]    ::[0m [1;34mfindobj_skymask.py 109 create_skymask()[0m - Masking around object 2 within a radius = 4.050235522550525 pixels
[1;32m[INFO]    ::[0m [1;34mfind_objects.py 519 global_skysub()[0m - Global sky subtraction for slit: 153
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 1 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 547314/590306 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     0.006    42992    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     0.006    42992    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mskysub.py 185 global_skysub()[0m - Full fit in global sky sub.
[1;32m[INFO]    ::[0m [1;34mfitting.py 1119 bspline_profile()[0m - B-spline fit:
[1;32m[INFO]    ::[0m [1;34mfitting.py 1120 bspline_profile()[0m -     npoly = 3 profile basis functions
[1;32m[INFO]    ::[0m [1;34mfitting.py 1121 bspline_profile()[0m -     ngood = 549915/593710 measurements
[1;32m[INFO]    ::[0m [1;34mfitting.py 1122 bspline_profile()[0m - ***************** Iter     Chi^2    N Rej  R. Fac *****************
[1;32m[INFO]    ::[0m [1;34mfitting.py 1126 bspline_profile()[0m -                   ----  --------  -------  ------
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      1     1.059    45973    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      2     1.016    46035    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      3     1.015    46037    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1220 bspline_profile()[0m -                      4     1.015    46037    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1235 bspline_profile()[0m -                   DONE     1.015    46037    1.00
[1;32m[INFO]    ::[0m [1;34mfitting.py 1238 bspline_profile()[0m - *******************************************************************
[1;32m[INFO]    ::[0m [1;34mpypeit.py 845 extract_one()[0m - Extraction begins for b150910_2070-s2_LRISb_20150910T053336.806 on det=2
[1;32m[INFO]    ::[0m [1;34mextraction.py 148 __init__()[0m - Initialising slits
[1;32m[INFO]    ::[0m [1;34mextraction.py 333 prepare_extraction()[0m - Generating tilts image
[1;32m[INFO]    ::[0m [1;34mextraction.py 337 prepare_extraction()[0m - Generating wavelength image
[1;32m[INFO]    ::[0m [1;34mextraction.py 480 spec_flexure_correct()[0m - Performing global spectral flexure correction
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflexure.py 631 spec_flexure_slit()[0m - Consider doing 2 passes in flexure as in LowRedux
[1;32m[INFO]    ::[0m [1;34mflexure.py 664 spec_flexure_slit()[0m - Working on spectral flexure of slit: 153
[1;31m[WARNING] ::[0m [1;34mflexure.py 157 spec_flex_shift()[0m - If we use Paranal, cut down on wavelength early on
[1;32m[INFO]    ::[0m [1;34mflexure.py 357 get_fwhm_gauss_smooth()[0m - Resolution (FWHM) of Archive=7.72 Ang and Observation=4.26 Ang
[1;31m[WARNING] ::[0m [1;34mflexure.py 373 get_fwhm_gauss_smooth()[0m - Prefer archival sky spectrum to have higher resolution
[1;31m[WARNING] ::[0m [1;34mflexure.py 375 get_fwhm_gauss_smooth()[0m - New Sky has higher resolution than Archive.  Not smoothing
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflexure.py 225 spec_flex_shift()[0m - Need to mask bad pixels
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflexure.py 228 spec_flex_shift()[0m - Consider taking median first [5 pixel]
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflexure.py 243 spec_flex_shift()[0m - Consider taking median first [5 pixel]
[1;32m[INFO]    ::[0m [1;34mflexure.py 307 spec_flex_shift()[0m - Flexure correction of 1.125 pixels
=========================== short test summary info ============================
FAILED ../../PypeIt-development-suite/unit_tests/test_scripts.py::test_quicklook
[31m========== [31m[1m1 failed[0m, [32m117 passed[0m, [33m1749 warnings[0m[31m in 2699.13s (0:44:59)[0m[31m ===========[0m

Reduced data for the following setups:
    bok_bc/300
    bok_bc/600
    gemini_gnirs/32_SB_SXD
    gemini_gnirs/10_LB_SXD
    gemini_gmos/GS_HAM_R400_700
    gemini_gmos/GS_HAM_R400_860
    gemini_gmos/GN_HAM_R400_885
    gemini_gmos/GN_HAM_NS_B600_620
    gemini_gmos/GS_HAM_MULTI_R400_700
    gemini_gmos/GN_E2V_MULTI_R400_600
    gemini_flamingos2/HK_HK
    gemini_flamingos2/JH_JH
    gtc_osiris/R1000B
    gtc_osiris/R1000BMOS
    gtc_osiris/R1000RMOS
    gtc_osiris/R2500R
    gtc_osiris/R2500V
    keck_deimos/600ZD_M_6500
    keck_deimos/600ZD_tilted
    keck_deimos/1200G_M_7750
    keck_deimos/830G_LVM_8400
    keck_deimos/830G_M_8100_26
    keck_deimos/830G_M_8500
    keck_deimos/830G_L_8100
    keck_deimos/1200B_M_5200
    keck_deimos/1200G_M_5500
    keck_deimos/900ZD_M_6000
    keck_deimos/1200B_LVM_5200
    keck_deimos/900ZD_LVM_5500
    keck_deimos/830G_M_9000_dither
    keck_deimos/QL
    keck_kcwi/bh2_4200
    keck_kcwi/bl
    keck_nires/NIRES
    keck_nirspec/LOW_NIRSPEC-1
    keck_mosfire/Y_long
    keck_mosfire/J_multi
    keck_mosfire/K_long
    keck_mosfire/Y_multi
    keck_mosfire/long2pos1_H
    keck_mosfire/longslit_3x0.7_H
    keck_mosfire/mask1_K_with_continuum
    keck_mosfire/mask1_J_with_continuum
    keck_mosfire/J2_long
    keck_lris_blue/multi_600_4000_d560
    keck_lris_blue/long_400_3400_d560
    keck_lris_blue/long_600_4000_d560
    keck_lris_blue/multi_300_5000_d680
    keck_lris_blue/multi_600_4000_slitmask
    keck_lris_blue_orig/long_600_4000_d500
    keck_lris_red/long_600_7500_d560
    keck_lris_red/multi_1200_9000_d680_1x2
    keck_lris_red/multi_600_5000_d560
    keck_lris_red/multi_1200_9000_d680
    keck_lris_red/multi_400_8500_d560
    keck_lris_red/long_600_10000_d680
    keck_lris_red/long_400_8500_longread
    keck_lris_red_orig/long_300_5000
    keck_lris_red_mark4/long_400_8500_d560
    keck_lris_red_mark4/long_600_10000_d680
    lbt_luci/LUCI-I
    lbt_luci/LUCI-II
    lbt_mods/MODS1R_Longslit
    lbt_mods/MODS2R_Longslit
    ldt_deveny/DV1
    ldt_deveny/DV2
    ldt_deveny/DV5
    ldt_deveny/DV6
    ldt_deveny/DV8
    ldt_deveny/DV9
    magellan_mage/1x1
    magellan_fire/FIRE_Echelle
    magellan_fire/FIRE_Long
    mdm_osmos/MDM4K
    mmt_binospec/Longslit_G600
    mmt_binospec/Multislit_G270
    mmt_mmirs/HK_zJ
    mmt_mmirs/J_zJ
    mmt_mmirs/K_K
    mmt_bluechannel/300l
    ntt_efosc2/gr5
    ntt_efosc2/gr6
    not_alfosc/grism4
    not_alfosc/grism19
    p200_dbsp_blue/600_4000_d55
    p200_dbsp_blue/600_4000_d68
    p200_dbsp_blue/1200_5000_d68
    p200_dbsp_red/316_7500_d55
    p200_dbsp_red/600_10000_d55
    p200_dbsp_red/1200_7100_d68
    p200_tspec/TSPEC
    shane_kast_blue/452_3306_d57
    shane_kast_blue/600_4310_d55
    shane_kast_blue/830_3460_d46
    shane_kast_red/300_7500_Ne
    shane_kast_red/600_7500_d55_ret
    shane_kast_red/600_7500_d57
    shane_kast_red/600_5000_d46
    shane_kast_red/1200_5000_d57
    soar_goodman_red/M1
    soar_goodman_red/M2
    tng_dolores/LRB
    vlt_fors2/300I
    vlt_fors2/600Z
    vlt_sinfoni/K_0.8
    vlt_xshooter/VIS_1x1
    vlt_xshooter/VIS_2x1
    vlt_xshooter/VIS_2x2
    vlt_xshooter/VIS_manual
    vlt_xshooter/NIR
    vlt_xshooter/UVB_1x1

Ran tests in 6 parallel processes

-------------------------
Test Setup: lbt_mods/MODS2R_Longslit

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/lbt_mods/MODS2R_Longslit
    PypeIt output: /tmp/REDUX_OUT/lbt_mods/MODS2R_Longslit
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
lbt_mods/MODS2R_Longslit pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/lbt_mods/MODS2R_Longslit/lbt_mods_mods2r_longslit.test.log
Process Id: 2554
Start time: Sun Sep 25 15:27:24 2022
End time:   Sun Sep 25 17:45:26 2022
Duration:   2:18:01.927464
Command:    run_pypeit /tmp/REDUX_OUT/lbt_mods/MODS2R_Longslit/lbt_mods_mods2r_longslit.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_deimos/830G_M_9000_dither

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/830G_M_9000_dither
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/830G_M_9000_dither
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/830G_M_9000_dither pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/830G_M_9000_dither/keck_deimos_830g_m_9000_dither.test.log
Process Id: 2556
Start time: Sun Sep 25 15:27:24 2022
End time:   Sun Sep 25 18:01:14 2022
Duration:   2:33:49.992881
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/830G_M_9000_dither/keck_deimos_830g_m_9000_dither.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_deimos/830G_M_9000_dither pypeit_coadd_2dspec Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: mmt_mmirs/J_zJ

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/mmt_mmirs/J_zJ
    PypeIt output: /tmp/REDUX_OUT/mmt_mmirs/J_zJ
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
mmt_mmirs/J_zJ pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/mmt_mmirs/J_zJ/mmt_mmirs_j_zj.test.log
Process Id: 2557
Start time: Sun Sep 25 15:27:24 2022
End time:   Sun Sep 25 18:12:03 2022
Duration:   2:44:38.988890
Command:    run_pypeit /tmp/REDUX_OUT/mmt_mmirs/J_zJ/mmt_mmirs_j_zj.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/mmt_mmirs/J_zJ/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/mmt_mmirs/J_zJ/QA/MF_A.html



-------------------------
Test Setup: keck_deimos/1200G_M_7750

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/1200G_M_7750
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/1200G_M_7750
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/1200G_M_7750 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/1200G_M_7750/keck_deimos_1200g_m_7750.test.log
Process Id: 2558
Start time: Sun Sep 25 15:27:24 2022
End time:   Sun Sep 25 18:36:58 2022
Duration:   3:09:34.228068
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/1200G_M_7750/keck_deimos_1200g_m_7750.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_lris_red/long_400_8500_longread

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_red/long_400_8500_longread
    PypeIt output: /tmp/REDUX_OUT/keck_lris_red/long_400_8500_longread
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_red/long_400_8500_longread pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red/long_400_8500_longread/keck_lris_red_long_400_8500_longread.test.log
Process Id: 2572
Start time: Sun Sep 25 18:01:14 2022
End time:   Sun Sep 25 18:19:00 2022
Duration:   0:17:46.325546
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red/long_400_8500_longread/keck_lris_red_long_400_8500_longread.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_lris_red/long_400_8500_longread/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_lris_red/long_400_8500_longread/QA/MF_A.html



----
keck_lris_red/long_400_8500_longread pypeit (ignore masters) Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red/long_400_8500_longread/keck_lris_red_long_400_8500_longread.test.2.log
Process Id: 2577
Start time: Sun Sep 25 18:19:00 2022
End time:   Sun Sep 25 18:52:32 2022
Duration:   0:33:31.547490
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red/long_400_8500_longread/keck_lris_red_long_400_8500_longread.pypeit -o -m

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_lris_red/long_400_8500_longread/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_lris_red/long_400_8500_longread/QA/MF_A.html



-------------------------
Test Setup: keck_kcwi/bh2_4200

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_kcwi/bh2_4200
    PypeIt output: /tmp/REDUX_OUT/keck_kcwi/bh2_4200
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_kcwi/bh2_4200 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_kcwi/bh2_4200/keck_kcwi_bh2_4200.test.log
Process Id: 2559
Start time: Sun Sep 25 15:27:24 2022
End time:   Sun Sep 25 19:23:32 2022
Duration:   3:56:08.096618
Command:    run_pypeit /tmp/REDUX_OUT/keck_kcwi/bh2_4200/keck_kcwi_bh2_4200.pypeit -o

Error Messages:

End of Log:
             -------------------------  -----------------
Wrote: /tmp/REDUX_OUT/keck_kcwi/bh2_4200/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_kcwi/bh2_4200/QA/MF_A.html



-------------------------
Test Setup: keck_deimos/600ZD_tilted

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/600ZD_tilted
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/600ZD_tilted
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/600ZD_tilted pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/600ZD_tilted/keck_deimos_600zd_tilted.test.log
Process Id: 2568
Start time: Sun Sep 25 17:45:26 2022
End time:   Sun Sep 25 19:26:36 2022
Duration:   1:41:10.350905
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/600ZD_tilted/keck_deimos_600zd_tilted.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: lbt_mods/MODS1R_Longslit

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/lbt_mods/MODS1R_Longslit
    PypeIt output: /tmp/REDUX_OUT/lbt_mods/MODS1R_Longslit
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
lbt_mods/MODS1R_Longslit pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/lbt_mods/MODS1R_Longslit/lbt_mods_mods1r_longslit.test.log
Process Id: 2575
Start time: Sun Sep 25 18:12:03 2022
End time:   Sun Sep 25 19:47:26 2022
Duration:   1:35:23.087212
Command:    run_pypeit /tmp/REDUX_OUT/lbt_mods/MODS1R_Longslit/lbt_mods_mods1r_longslit.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: mmt_binospec/Longslit_G600

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/mmt_binospec/Longslit_G600
    PypeIt output: /tmp/REDUX_OUT/mmt_binospec/Longslit_G600
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
mmt_binospec/Longslit_G600 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/mmt_binospec/Longslit_G600/mmt_binospec_longslit_g600.test.log
Process Id: 2585
Start time: Sun Sep 25 18:52:32 2022
End time:   Sun Sep 25 19:56:20 2022
Duration:   1:03:48.512981
Command:    run_pypeit /tmp/REDUX_OUT/mmt_binospec/Longslit_G600/mmt_binospec_longslit_g600.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_deimos/1200B_M_5200

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/1200B_M_5200
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/1200B_M_5200
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/1200B_M_5200 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/1200B_M_5200/keck_deimos_1200b_m_5200.test.log
Process Id: 2581
Start time: Sun Sep 25 18:36:58 2022
End time:   Sun Sep 25 20:20:08 2022
Duration:   1:43:09.351221
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/1200B_M_5200/keck_deimos_1200b_m_5200.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_lris_red/multi_1200_9000_d680_1x2

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_red/multi_1200_9000_d680_1x2
    PypeIt output: /tmp/REDUX_OUT/keck_lris_red/multi_1200_9000_d680_1x2
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_red/multi_1200_9000_d680_1x2 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red/multi_1200_9000_d680_1x2/keck_lris_red_multi_1200_9000_d680_1x2.test.log
Process Id: 2596
Start time: Sun Sep 25 19:47:26 2022
End time:   Sun Sep 25 20:23:45 2022
Duration:   0:36:19.385260
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red/multi_1200_9000_d680_1x2/keck_lris_red_multi_1200_9000_d680_1x2.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_lris_red/multi_1200_9000_d680_1x2 pypeit (ignore masters) Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: gemini_gmos/GS_HAM_R400_860

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gemini_gmos/GS_HAM_R400_860
    PypeIt output: /tmp/REDUX_OUT/gemini_gmos/GS_HAM_R400_860
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gemini_gmos/GS_HAM_R400_860 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gmos/GS_HAM_R400_860/gemini_gmos_gs_ham_r400_860.test.log
Process Id: 2604
Start time: Sun Sep 25 20:20:08 2022
End time:   Sun Sep 25 20:43:20 2022
Duration:   0:23:12.175458
Command:    run_pypeit /tmp/REDUX_OUT/gemini_gmos/GS_HAM_R400_860/gemini_gmos_gs_ham_r400_860.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
gemini_gmos/GS_HAM_R400_860 pypeit standards  Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
gemini_gmos/GS_HAM_R400_860 pypeit_sensfunc Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
gemini_gmos/GS_HAM_R400_860 pypeit_flux_setup Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
gemini_gmos/GS_HAM_R400_860 pypeit_flux Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
gemini_gmos/GS_HAM_R400_860 pypeit_coadd_1dspec Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: keck_lris_red/multi_400_8500_d560

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_red/multi_400_8500_d560
    PypeIt output: /tmp/REDUX_OUT/keck_lris_red/multi_400_8500_d560
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_red/multi_400_8500_d560 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red/multi_400_8500_d560/keck_lris_red_multi_400_8500_d560.test.log
Process Id: 2608
Start time: Sun Sep 25 20:23:45 2022
End time:   Sun Sep 25 20:49:15 2022
Duration:   0:25:29.377636
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red/multi_400_8500_d560/keck_lris_red_multi_400_8500_d560.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_lris_red/multi_400_8500_d560 pypeit (ignore masters) Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: magellan_fire/FIRE_Echelle

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/magellan_fire/FIRE_Echelle
    PypeIt output: /tmp/REDUX_OUT/magellan_fire/FIRE_Echelle
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
magellan_fire/FIRE_Echelle pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/magellan_fire/FIRE_Echelle/magellan_fire_fire_echelle.test.log
Process Id: 2588
Start time: Sun Sep 25 19:23:32 2022
End time:   Sun Sep 25 20:51:06 2022
Duration:   1:27:34.170918
Command:    run_pypeit /tmp/REDUX_OUT/magellan_fire/FIRE_Echelle/magellan_fire_fire_echelle.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/magellan_fire/FIRE_Echelle/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/magellan_fire/FIRE_Echelle/QA/MF_A.html



-------------------------
Test Setup: keck_deimos/600ZD_M_6500

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/600ZD_M_6500
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/600ZD_M_6500
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/600ZD_M_6500 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/600ZD_M_6500/keck_deimos_600zd_m_6500.test.log
Process Id: 2592
Start time: Sun Sep 25 19:26:36 2022
End time:   Sun Sep 25 21:03:29 2022
Duration:   1:36:52.423830
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/600ZD_M_6500/keck_deimos_600zd_m_6500.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_deimos/600ZD_M_6500 pypeit_flux Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: keck_lris_red/multi_600_5000_d560

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_red/multi_600_5000_d560
    PypeIt output: /tmp/REDUX_OUT/keck_lris_red/multi_600_5000_d560
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_red/multi_600_5000_d560 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red/multi_600_5000_d560/keck_lris_red_multi_600_5000_d560.test.log
Process Id: 2612
Start time: Sun Sep 25 20:43:20 2022
End time:   Sun Sep 25 21:16:29 2022
Duration:   0:33:09.457934
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red/multi_600_5000_d560/keck_lris_red_multi_600_5000_d560.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_lris_red/multi_600_5000_d560 pypeit (ignore masters) Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: keck_deimos/830G_M_8500

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/830G_M_8500
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/830G_M_8500
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/830G_M_8500 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/830G_M_8500/keck_deimos_830g_m_8500.test.log
Process Id: 2600
Start time: Sun Sep 25 19:56:20 2022
End time:   Sun Sep 25 21:16:45 2022
Duration:   1:20:24.906884
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/830G_M_8500/keck_deimos_830g_m_8500.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_deimos/830G_M_8500/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_deimos/830G_M_8500/QA/MF_A.html



----
keck_deimos/830G_M_8500 pypeit_multislit_flexure Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/830G_M_8500/keck_deimos_830g_m_8500.test_flexure.log
Process Id: 2629
Start time: Sun Sep 25 21:16:45 2022
End time:   Sun Sep 25 21:16:54 2022
Duration:   0:00:08.993184
Command:    pypeit_multislit_flexure /PypeIt-development-suite/flexure_files/keck_deimos_830g_m_8500.flex testing_

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m File written to: testing_CFHQS1_22358.fits
-6.110960863762354e-05 6.110960863762354e-05
All done!!



----
keck_deimos/830G_M_8500 pypeit_collate Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/830G_M_8500/keck_deimos_830g_m_8500.test_collate.log
Process Id: 2631
Start time: Sun Sep 25 21:16:54 2022
End time:   Sun Sep 25 21:18:57 2022
Duration:   0:02:02.378612
Command:    pypeit_collate_1d --spec1d_outdir /tmp/REDUX_OUT/keck_deimos/830G_M_8500 --spec1d_files /tmp/REDUX_OUT/keck_deimos/830G_M_8500/Science/spec1d_DE.20100913.22358-CFHQS1_DEIMOS_20100913T061231.334.fits --refframe heliocentric --wv_rms_thresh 0.1 --flux

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m File written to: /tmp/REDUX_OUT/keck_deimos/830G_M_8500/J232856.20-030325.90_DEIMOS_20100913_20100913.fits
[1;32m[INFO]    ::[0m Total duration: 0:01:57.386614
Writing the parameters to /tmp/REDUX_OUT/keck_deimos/830G_M_8500/collate1d.par



-------------------------
Test Setup: keck_lris_red/multi_1200_9000_d680

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_red/multi_1200_9000_d680
    PypeIt output: /tmp/REDUX_OUT/keck_lris_red/multi_1200_9000_d680
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_red/multi_1200_9000_d680 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red/multi_1200_9000_d680/keck_lris_red_multi_1200_9000_d680.test.log
Process Id: 2636
Start time: Sun Sep 25 21:18:57 2022
End time:   Sun Sep 25 21:50:47 2022
Duration:   0:31:49.846851
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red/multi_1200_9000_d680/keck_lris_red_multi_1200_9000_d680.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_lris_red/multi_1200_9000_d680 pypeit (ignore masters) Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: gemini_gmos/GN_HAM_NS_B600_620

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gemini_gmos/GN_HAM_NS_B600_620
    PypeIt output: /tmp/REDUX_OUT/gemini_gmos/GN_HAM_NS_B600_620
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gemini_gmos/GN_HAM_NS_B600_620 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gmos/GN_HAM_NS_B600_620/gemini_gmos_gn_ham_ns_b600_620.test.log
Process Id: 2623
Start time: Sun Sep 25 21:03:29 2022
End time:   Sun Sep 25 21:53:20 2022
Duration:   0:49:50.856379
Command:    run_pypeit /tmp/REDUX_OUT/gemini_gmos/GN_HAM_NS_B600_620/gemini_gmos_gn_ham_ns_b600_620.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: gtc_osiris/R2500R

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gtc_osiris/R2500R
    PypeIt output: /tmp/REDUX_OUT/gtc_osiris/R2500R
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gtc_osiris/R2500R pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gtc_osiris/R2500R/gtc_osiris_r2500r.test.log
Process Id: 2619
Start time: Sun Sep 25 20:51:06 2022
End time:   Sun Sep 25 22:14:56 2022
Duration:   1:23:49.421571
Command:    run_pypeit /tmp/REDUX_OUT/gtc_osiris/R2500R/gtc_osiris_r2500r.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/gtc_osiris/R2500R/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/gtc_osiris/R2500R/QA/MF_A.html



-------------------------
Test Setup: mmt_binospec/Multislit_G270

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/mmt_binospec/Multislit_G270
    PypeIt output: /tmp/REDUX_OUT/mmt_binospec/Multislit_G270
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
mmt_binospec/Multislit_G270 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/mmt_binospec/Multislit_G270/mmt_binospec_multislit_g270.test.log
Process Id: 2552
Start time: Sun Sep 25 15:27:24 2022
End time:   Sun Sep 25 22:23:56 2022
Duration:   6:56:31.853210
Command:    run_pypeit /tmp/REDUX_OUT/mmt_binospec/Multislit_G270/mmt_binospec_multislit_g270.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/mmt_binospec/Multislit_G270/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/mmt_binospec/Multislit_G270/QA/MF_A.html



-------------------------
Test Setup: keck_deimos/900ZD_M_6000

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/900ZD_M_6000
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/900ZD_M_6000
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/900ZD_M_6000 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/900ZD_M_6000/keck_deimos_900zd_m_6000.test.log
Process Id: 2627
Start time: Sun Sep 25 21:16:29 2022
End time:   Sun Sep 25 22:33:57 2022
Duration:   1:17:27.470380
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/900ZD_M_6000/keck_deimos_900zd_m_6000.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_mosfire/K_long

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_mosfire/K_long
    PypeIt output: /tmp/REDUX_OUT/keck_mosfire/K_long
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_mosfire/K_long pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/K_long/keck_mosfire_k_long.test.log
Process Id: 2616
Start time: Sun Sep 25 20:49:15 2022
End time:   Sun Sep 25 22:36:42 2022
Duration:   1:47:26.953088
Command:    run_pypeit /tmp/REDUX_OUT/keck_mosfire/K_long/keck_mosfire_k_long.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_mosfire/K_long/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_mosfire/K_long/QA/MF_A.html



-------------------------
Test Setup: gemini_gmos/GN_E2V_MULTI_R400_600

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gemini_gmos/GN_E2V_MULTI_R400_600
    PypeIt output: /tmp/REDUX_OUT/gemini_gmos/GN_E2V_MULTI_R400_600
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gemini_gmos/GN_E2V_MULTI_R400_600 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gmos/GN_E2V_MULTI_R400_600/gemini_gmos_gn_e2v_multi_r400_600.test.log
Process Id: 2654
Start time: Sun Sep 25 22:33:57 2022
End time:   Sun Sep 25 23:00:19 2022
Duration:   0:26:22.070125
Command:    run_pypeit /tmp/REDUX_OUT/gemini_gmos/GN_E2V_MULTI_R400_600/gemini_gmos_gn_e2v_multi_r400_600.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_deimos/QL

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/QL
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/QL
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/QL pypeit_ql Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/QL/keck_deimos_ql.test_ql.2.log
Process Id: 2663
Start time: Sun Sep 25 21:50:47 2022
End time:   Sun Sep 25 23:02:49 2022
Duration:   1:12:02.023583
Command:    pypeit_ql_keck_deimos /PypeIt-development-suite/RAW_DATA/keck_deimos/QL --science=DE.20130409.20629.fits --slit_spat=3:763 --redux_path=/PypeIt-development-suite/REDUX_OUT/keck_deimos/QL

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_mosfire/Y_multi

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_mosfire/Y_multi
    PypeIt output: /tmp/REDUX_OUT/keck_mosfire/Y_multi
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_mosfire/Y_multi pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/Y_multi/keck_mosfire_y_multi.test.log
Process Id: 2644
Start time: Sun Sep 25 21:53:20 2022
End time:   Sun Sep 25 23:03:08 2022
Duration:   1:09:47.994844
Command:    run_pypeit /tmp/REDUX_OUT/keck_mosfire/Y_multi/keck_mosfire_y_multi.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_mosfire/Y_multi/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_mosfire/Y_multi/QA/MF_A.html



-------------------------
Test Setup: ldt_deveny/DV1

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/ldt_deveny/DV1
    PypeIt output: /tmp/REDUX_OUT/ldt_deveny/DV1
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
ldt_deveny/DV1 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/ldt_deveny/DV1/ldt_deveny_dv1.test.log
Process Id: 2661
Start time: Sun Sep 25 23:00:19 2022
End time:   Sun Sep 25 23:03:10 2022
Duration:   0:02:50.764856
Command:    run_pypeit /tmp/REDUX_OUT/ldt_deveny/DV1/ldt_deveny_dv1.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: vlt_xshooter/UVB_1x1

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/vlt_xshooter/UVB_1x1
    PypeIt output: /tmp/REDUX_OUT/vlt_xshooter/UVB_1x1
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
vlt_xshooter/UVB_1x1 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/vlt_xshooter/UVB_1x1/vlt_xshooter_uvb_1x1.test.log
Process Id: 2657
Start time: Sun Sep 25 22:36:42 2022
End time:   Sun Sep 25 23:09:10 2022
Duration:   0:32:28.009894
Command:    run_pypeit /tmp/REDUX_OUT/vlt_xshooter/UVB_1x1/vlt_xshooter_uvb_1x1.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/vlt_xshooter/UVB_1x1/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/vlt_xshooter/UVB_1x1/QA/MF_A.html



-------------------------
Test Setup: vlt_xshooter/VIS_manual

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/vlt_xshooter/VIS_manual
    PypeIt output: /tmp/REDUX_OUT/vlt_xshooter/VIS_manual
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
vlt_xshooter/VIS_manual pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/vlt_xshooter/VIS_manual/vlt_xshooter_vis_manual.test.log
Process Id: 2647
Start time: Sun Sep 25 22:14:56 2022
End time:   Sun Sep 25 23:02:16 2022
Duration:   0:47:20.662798
Command:    run_pypeit /tmp/REDUX_OUT/vlt_xshooter/VIS_manual/vlt_xshooter_vis_manual.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/vlt_xshooter/VIS_manual/QA/MF_B.html
Wrote: /tmp/REDUX_OUT/vlt_xshooter/VIS_manual/QA/MF_B.html



----
vlt_xshooter/VIS_manual pypeit_coadd_2dspec Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/vlt_xshooter/VIS_manual/vlt_xshooter_vis_manual.test_2dcoadd.log
Process Id: 2665
Start time: Sun Sep 25 23:02:16 2022
End time:   Sun Sep 25 23:09:39 2022
Duration:   0:07:22.611926
Command:    pypeit_coadd_2dspec --file /PypeIt-development-suite/coadd2d_files/vlt_xshooter_vis_manual.coadd2d

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m Wrote 1D spectra to /tmp/REDUX_OUT/vlt_xshooter/VIS_manual/Science_coadd/spec1d_XSHOO.2019-XSHOO.2019-08.fits
[1;32m[INFO]    ::[0m Wrote: /tmp/REDUX_OUT/vlt_xshooter/VIS_manual/Science_coadd/spec2d_XSHOO.2019-XSHOO.2019-08.fits
Writing the parameters to XSHOO.2019-XSHOO.2019-08_coadd2d.par



-------------------------
Test Setup: gemini_gmos/GS_HAM_MULTI_R400_700

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gemini_gmos/GS_HAM_MULTI_R400_700
    PypeIt output: /tmp/REDUX_OUT/gemini_gmos/GS_HAM_MULTI_R400_700
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gemini_gmos/GS_HAM_MULTI_R400_700 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gmos/GS_HAM_MULTI_R400_700/gemini_gmos_gs_ham_multi_r400_700.test.log
Process Id: 2650
Start time: Sun Sep 25 22:23:56 2022
End time:   Sun Sep 25 23:18:14 2022
Duration:   0:54:18.191000
Command:    run_pypeit /tmp/REDUX_OUT/gemini_gmos/GS_HAM_MULTI_R400_700/gemini_gmos_gs_ham_multi_r400_700.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_lris_red/long_600_10000_d680

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_red/long_600_10000_d680
    PypeIt output: /tmp/REDUX_OUT/keck_lris_red/long_600_10000_d680
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_red/long_600_10000_d680 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red/long_600_10000_d680/keck_lris_red_long_600_10000_d680.test.log
Process Id: 2669
Start time: Sun Sep 25 23:02:49 2022
End time:   Sun Sep 25 23:19:27 2022
Duration:   0:16:38.126658
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red/long_600_10000_d680/keck_lris_red_long_600_10000_d680.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_lris_red/long_600_10000_d680 pypeit (ignore masters) Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: gemini_flamingos2/HK_HK

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gemini_flamingos2/HK_HK
    PypeIt output: /tmp/REDUX_OUT/gemini_flamingos2/HK_HK
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gemini_flamingos2/HK_HK pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gemini_flamingos2/HK_HK/gemini_flamingos2_hk_hk.test.log
Process Id: 2683
Start time: Sun Sep 25 23:09:39 2022
End time:   Sun Sep 25 23:46:28 2022
Duration:   0:36:49.144449
Command:    run_pypeit /tmp/REDUX_OUT/gemini_flamingos2/HK_HK/gemini_flamingos2_hk_hk.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/gemini_flamingos2/HK_HK/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/gemini_flamingos2/HK_HK/QA/MF_A.html



-------------------------
Test Setup: keck_deimos/830G_LVM_8400

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/830G_LVM_8400
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/830G_LVM_8400
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/830G_LVM_8400 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/830G_LVM_8400/keck_deimos_830g_lvm_8400.test.log
Process Id: 2679
Start time: Sun Sep 25 23:09:10 2022
End time:   Sun Sep 25 23:50:55 2022
Duration:   0:41:44.951899
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/830G_LVM_8400/keck_deimos_830g_lvm_8400.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_deimos/1200B_LVM_5200

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/1200B_LVM_5200
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/1200B_LVM_5200
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/1200B_LVM_5200 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/1200B_LVM_5200/keck_deimos_1200b_lvm_5200.test.log
Process Id: 2676
Start time: Sun Sep 25 23:03:10 2022
End time:   Sun Sep 25 23:52:21 2022
Duration:   0:49:10.916396
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/1200B_LVM_5200/keck_deimos_1200b_lvm_5200.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_deimos/830G_L_8100

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/830G_L_8100
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/830G_L_8100
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/830G_L_8100 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/830G_L_8100/keck_deimos_830g_l_8100.test.log
Process Id: 2672
Start time: Sun Sep 25 23:03:08 2022
End time:   Sun Sep 25 23:54:45 2022
Duration:   0:51:37.080684
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/830G_L_8100/keck_deimos_830g_l_8100.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: gtc_osiris/R2500V

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gtc_osiris/R2500V
    PypeIt output: /tmp/REDUX_OUT/gtc_osiris/R2500V
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gtc_osiris/R2500V pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gtc_osiris/R2500V/gtc_osiris_r2500v.test.log
Process Id: 2687
Start time: Sun Sep 25 23:18:14 2022
End time:   Sun Sep 25 23:59:57 2022
Duration:   0:41:42.735734
Command:    run_pypeit /tmp/REDUX_OUT/gtc_osiris/R2500V/gtc_osiris_r2500v.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/gtc_osiris/R2500V/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/gtc_osiris/R2500V/QA/MF_A.html



-------------------------
Test Setup: vlt_sinfoni/K_0.8

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/vlt_sinfoni/K_0.8
    PypeIt output: /tmp/REDUX_OUT/vlt_sinfoni/K_0.8
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
vlt_sinfoni/K_0.8 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/vlt_sinfoni/K_0.8/vlt_sinfoni_k_0.8.test.log
Process Id: 2691
Start time: Sun Sep 25 23:19:27 2022
End time:   Mon Sep 26 00:03:49 2022
Duration:   0:44:22.474202
Command:    run_pypeit /tmp/REDUX_OUT/vlt_sinfoni/K_0.8/vlt_sinfoni_k_0.8.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/vlt_sinfoni/K_0.8/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/vlt_sinfoni/K_0.8/QA/MF_A.html



-------------------------
Test Setup: vlt_xshooter/VIS_1x1

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/vlt_xshooter/VIS_1x1
    PypeIt output: /tmp/REDUX_OUT/vlt_xshooter/VIS_1x1
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
vlt_xshooter/VIS_1x1 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/vlt_xshooter/VIS_1x1/vlt_xshooter_vis_1x1.test.log
Process Id: 2702
Start time: Sun Sep 25 23:52:21 2022
End time:   Mon Sep 26 00:20:49 2022
Duration:   0:28:28.549288
Command:    run_pypeit /tmp/REDUX_OUT/vlt_xshooter/VIS_1x1/vlt_xshooter_vis_1x1.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/vlt_xshooter/VIS_1x1/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/vlt_xshooter/VIS_1x1/QA/MF_A.html



-------------------------
Test Setup: keck_lris_blue/multi_300_5000_d680

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/multi_300_5000_d680
    PypeIt output: /tmp/REDUX_OUT/keck_lris_blue/multi_300_5000_d680
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_blue/multi_300_5000_d680 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_blue/multi_300_5000_d680/keck_lris_blue_multi_300_5000_d680.test.log
Process Id: 2694
Start time: Sun Sep 25 23:46:28 2022
End time:   Mon Sep 26 00:26:11 2022
Duration:   0:39:42.678940
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_blue/multi_300_5000_d680/keck_lris_blue_multi_300_5000_d680.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: vlt_xshooter/NIR

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/vlt_xshooter/NIR
    PypeIt output: /tmp/REDUX_OUT/vlt_xshooter/NIR
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
vlt_xshooter/NIR pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/vlt_xshooter/NIR/vlt_xshooter_nir.test.log
Process Id: 2706
Start time: Sun Sep 25 23:54:45 2022
End time:   Mon Sep 26 00:28:18 2022
Duration:   0:33:33.175038
Command:    run_pypeit /tmp/REDUX_OUT/vlt_xshooter/NIR/vlt_xshooter_nir.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/vlt_xshooter/NIR/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/vlt_xshooter/NIR/QA/MF_A.html



-------------------------
Test Setup: keck_deimos/900ZD_LVM_5500

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/900ZD_LVM_5500
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/900ZD_LVM_5500
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/900ZD_LVM_5500 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/900ZD_LVM_5500/keck_deimos_900zd_lvm_5500.test.log
Process Id: 2698
Start time: Sun Sep 25 23:50:55 2022
End time:   Mon Sep 26 00:32:48 2022
Duration:   0:41:52.887128
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/900ZD_LVM_5500/keck_deimos_900zd_lvm_5500.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_deimos/900ZD_LVM_5500 pypeit_sensfunc Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
keck_deimos/900ZD_LVM_5500 pypeit_flux Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: keck_deimos/830G_M_8100_26

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/830G_M_8100_26
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/830G_M_8100_26
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/830G_M_8100_26 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/830G_M_8100_26/keck_deimos_830g_m_8100_26.test.log
Process Id: 2709
Start time: Sun Sep 25 23:59:57 2022
End time:   Mon Sep 26 00:41:57 2022
Duration:   0:42:00.209220
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/830G_M_8100_26/keck_deimos_830g_m_8100_26.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_lris_red_mark4/long_400_8500_d560

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_red_mark4/long_400_8500_d560
    PypeIt output: /tmp/REDUX_OUT/keck_lris_red_mark4/long_400_8500_d560
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_red_mark4/long_400_8500_d560 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red_mark4/long_400_8500_d560/keck_lris_red_mark4_long_400_8500_d560.test.log
Process Id: 2712
Start time: Mon Sep 26 00:03:49 2022
End time:   Mon Sep 26 00:44:20 2022
Duration:   0:40:30.317474
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red_mark4/long_400_8500_d560/keck_lris_red_mark4_long_400_8500_d560.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: not_alfosc/grism19

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/not_alfosc/grism19
    PypeIt output: /tmp/REDUX_OUT/not_alfosc/grism19
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
not_alfosc/grism19 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/not_alfosc/grism19/not_alfosc_grism19.test.log
Process Id: 2715
Start time: Mon Sep 26 00:20:49 2022
End time:   Mon Sep 26 00:55:33 2022
Duration:   0:34:43.738935
Command:    run_pypeit /tmp/REDUX_OUT/not_alfosc/grism19/not_alfosc_grism19.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/not_alfosc/grism19/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/not_alfosc/grism19/QA/MF_A.html



-------------------------
Test Setup: gtc_osiris/R1000RMOS

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gtc_osiris/R1000RMOS
    PypeIt output: /tmp/REDUX_OUT/gtc_osiris/R1000RMOS
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gtc_osiris/R1000RMOS pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gtc_osiris/R1000RMOS/gtc_osiris_r1000rmos.test.log
Process Id: 2726
Start time: Mon Sep 26 00:32:48 2022
End time:   Mon Sep 26 01:03:59 2022
Duration:   0:31:11.556400
Command:    run_pypeit /tmp/REDUX_OUT/gtc_osiris/R1000RMOS/gtc_osiris_r1000rmos.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/gtc_osiris/R1000RMOS/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/gtc_osiris/R1000RMOS/QA/MF_A.html



-------------------------
Test Setup: keck_mosfire/J_multi

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_mosfire/J_multi
    PypeIt output: /tmp/REDUX_OUT/keck_mosfire/J_multi
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_mosfire/J_multi pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/J_multi/keck_mosfire_j_multi.test.log
Process Id: 2722
Start time: Mon Sep 26 00:28:18 2022
End time:   Mon Sep 26 01:04:13 2022
Duration:   0:35:55.330104
Command:    run_pypeit /tmp/REDUX_OUT/keck_mosfire/J_multi/keck_mosfire_j_multi.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_mosfire/J_multi/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_mosfire/J_multi/QA/MF_A.html



-------------------------
Test Setup: keck_lris_red/long_600_7500_d560

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_red/long_600_7500_d560
    PypeIt output: /tmp/REDUX_OUT/keck_lris_red/long_600_7500_d560
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_red/long_600_7500_d560 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red/long_600_7500_d560/keck_lris_red_long_600_7500_d560.test.log
Process Id: 2737
Start time: Mon Sep 26 00:55:33 2022
End time:   Mon Sep 26 01:05:09 2022
Duration:   0:09:36.389334
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red/long_600_7500_d560/keck_lris_red_long_600_7500_d560.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_lris_red/long_600_7500_d560 pypeit (ignore masters) Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: keck_mosfire/Y_long

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_mosfire/Y_long
    PypeIt output: /tmp/REDUX_OUT/keck_mosfire/Y_long
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_mosfire/Y_long pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/Y_long/keck_mosfire_y_long.test.log
Process Id: 2719
Start time: Mon Sep 26 00:26:11 2022
End time:   Mon Sep 26 01:02:20 2022
Duration:   0:36:09.027066
Command:    run_pypeit /tmp/REDUX_OUT/keck_mosfire/Y_long/keck_mosfire_y_long.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_mosfire/Y_long/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_mosfire/Y_long/QA/MF_A.html



----
keck_mosfire/Y_long pypeit_sensfunc Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/Y_long/keck_mosfire_y_long.test_sens.log
Process Id: 2741
Start time: Mon Sep 26 01:02:20 2022
End time:   Mon Sep 26 01:06:07 2022
Duration:   0:03:46.839684
Command:    pypeit_sensfunc /tmp/REDUX_OUT/keck_mosfire/Y_long/Science/spec1d_m191118_0064-GD71_MOSFIRE_20191118T104704.507.fits

Error Messages:

End of Log:
[1;31m[WARNING] ::[0m Error renormalization found correction factor sigma_corr = 0.969311 < 1.
              Errors are overestimated so not applying correction
[1;32m[INFO]    ::[0m File written to: sens_m191118_0064-GD71_MOSFIRE_20191118T104704.507.fits



----
keck_mosfire/Y_long pypeit_ql Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/Y_long/keck_mosfire_y_long.test_ql.log
Process Id: 2755
Start time: Mon Sep 26 01:06:10 2022
End time:   Mon Sep 26 01:07:21 2022
Duration:   0:01:11.161102
Command:    pypeit_ql_multislit keck_mosfire /PypeIt-development-suite/RAW_DATA/keck_mosfire/Y_long m191120_0043.fits m191120_0044.fits m191120_0045.fits m191120_0046.fits --spec_samp_fact 2.0 --spat_samp_fact 2.0 --flux --bkg_redux

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m Loading SensFunc from /tmp/REDUX_OUT/QL_MASTERS/keck_mosfire/Y/sens_m191118_0064-GD71_MOSFIRE_20191118T104704.507.fits
[1;31m[WARNING] ::[0m Your data extends beyond the bounds of your sensfunc. You should be adjusting the par['sensfunc']['extrap_blu'] and/or par['sensfunc']['extrap_red'] to extrapolate further and recreate your sensfunc. But we are extrapolating per your direction. Good luck!
[1;32m[INFO]    ::[0m Execution time: 1m 7.50s



-------------------------
Test Setup: gemini_gnirs/32_SB_SXD

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gemini_gnirs/32_SB_SXD
    PypeIt output: /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gemini_gnirs/32_SB_SXD pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/gemini_gnirs_32_sb_sxd.test.log
Process Id: 2734
Start time: Mon Sep 26 00:44:20 2022
End time:   Mon Sep 26 00:56:11 2022
Duration:   0:11:51.197022
Command:    run_pypeit /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/gemini_gnirs_32_sb_sxd.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/QA/MF_A.html



----
gemini_gnirs/32_SB_SXD pypeit_sensfunc Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/gemini_gnirs_32_sb_sxd.test_sens.log
Process Id: 2739
Start time: Mon Sep 26 00:56:11 2022
End time:   Mon Sep 26 01:08:41 2022
Duration:   0:12:30.550215
Command:    pypeit_sensfunc /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/Science/spec1d_cN20170331S0206-HIP62745_GNIRS_20170331T083351.681.fits -s /PypeIt-development-suite/sensfunc_files/gemini_gnirs_32_sb_sxd.sens

Error Messages:

End of Log:
[1;31m[WARNING] ::[0m Error renormalization found correction factor sigma_corr = 0.408457 < 1.
              Errors are overestimated so not applying correction
[1;32m[INFO]    ::[0m File written to: sens_cN20170331S0206-HIP62745_GNIRS_20170331T083351.681.fits



----
gemini_gnirs/32_SB_SXD pypeit_flux_setup Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/gemini_gnirs_32_sb_sxd.test_flux_setup.log
Process Id: 2762
Start time: Mon Sep 26 01:08:41 2022
End time:   Mon Sep 26 01:08:45 2022
Duration:   0:00:03.454142
Command:    pypeit_flux_setup /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/Science

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m Flux input file written to: gemini_gnirs.flux
[1;32m[INFO]    ::[0m Coadd1D input file written to: gemini_gnirs.coadd1d
[1;32m[INFO]    ::[0m Telluric input file written to: gemini_gnirs.tell



----
gemini_gnirs/32_SB_SXD pypeit_flux Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/gemini_gnirs_32_sb_sxd.test_flux.log
Process Id: 2764
Start time: Mon Sep 26 01:08:45 2022
End time:   Mon Sep 26 01:08:51 2022
Duration:   0:00:06.310807
Command:    pypeit_flux_calib /PypeIt-development-suite/fluxing_files/gemini_gnirs_32_sb_sxd.flux

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m Wrote 1D spectra to Science/spec1d_cN20170331S0221-pisco_GNIRS_20170331T092059.597.fits
[1;32m[INFO]    ::[0m Flux calibration complete
Writing the parameters to fluxing.par



----
gemini_gnirs/32_SB_SXD pypeit_coadd_1dspec Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/gemini_gnirs_32_sb_sxd.test_1dcoadd.log
Process Id: 2766
Start time: Mon Sep 26 01:08:51 2022
End time:   Mon Sep 26 01:08:57 2022
Duration:   0:00:06.306706
Command:    pypeit_coadd_1dspec /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/gemini_gnirs_32_sb_sxd_merged.coadd1d

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m File written to: pisco_coadd.fits
[1;32m[INFO]    ::[0m Coadding complete
Writing the parameters to coadd1d.par



----
gemini_gnirs/32_SB_SXD pypeit_coadd_2dspec Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/gemini_gnirs_32_sb_sxd.test_2dcoadd.log
Process Id: 2768
Start time: Mon Sep 26 01:08:57 2022
End time:   Mon Sep 26 01:09:42 2022
Duration:   0:00:44.136734
Command:    pypeit_coadd_2dspec --file /PypeIt-development-suite/coadd2d_files/gemini_gnirs_32_sb_sxd.coadd2d

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m Wrote 1D spectra to /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/Science_coadd/spec1d_cN20170331S0216-cN20170331S0221-pisco.fits
[1;32m[INFO]    ::[0m Wrote: /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/Science_coadd/spec2d_cN20170331S0216-cN20170331S0221-pisco.fits
Writing the parameters to cN20170331S0216-cN20170331S0221-pisco_coadd2d.par



----
gemini_gnirs/32_SB_SXD pypeit_tellfit Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/gemini_gnirs_32_sb_sxd.test_tellfit.log
Process Id: 2770
Start time: Mon Sep 26 01:09:42 2022
End time:   Mon Sep 26 01:13:24 2022
Duration:   0:03:42.837461
Command:    pypeit_tellfit /tmp/REDUX_OUT/gemini_gnirs/32_SB_SXD/pisco_coadd.fits -t /PypeIt-development-suite/tellfit_files/gemini_gnirs_32_sb_sxd.tell

Error Messages:

End of Log:
[1;31m[WARNING] ::[0m Maximum number of iterations maxiter=2 reached in robust_optimize
[1;32m[INFO]    ::[0m File written to: pisco_coadd_tellmodel.fits
[1;32m[INFO]    ::[0m File written to: pisco_coadd_tellcorr.fits



-------------------------
Test Setup: keck_kcwi/bl

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_kcwi/bl
    PypeIt output: /tmp/REDUX_OUT/keck_kcwi/bl
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_kcwi/bl pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_kcwi/bl/keck_kcwi_bl.test.log
Process Id: 2730
Start time: Mon Sep 26 00:41:57 2022
End time:   Mon Sep 26 01:25:00 2022
Duration:   0:43:02.696863
Command:    run_pypeit /tmp/REDUX_OUT/keck_kcwi/bl/keck_kcwi_bl.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_kcwi/bl/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_kcwi/bl/QA/MF_A.html



-------------------------
Test Setup: keck_deimos/1200G_M_5500

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_deimos/1200G_M_5500
    PypeIt output: /tmp/REDUX_OUT/keck_deimos/1200G_M_5500
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_deimos/1200G_M_5500 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_deimos/1200G_M_5500/keck_deimos_1200g_m_5500.test.log
Process Id: 2744
Start time: Mon Sep 26 01:03:59 2022
End time:   Mon Sep 26 01:28:18 2022
Duration:   0:24:18.640986
Command:    run_pypeit /tmp/REDUX_OUT/keck_deimos/1200G_M_5500/keck_deimos_1200g_m_5500.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: vlt_xshooter/VIS_2x1

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/vlt_xshooter/VIS_2x1
    PypeIt output: /tmp/REDUX_OUT/vlt_xshooter/VIS_2x1
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
vlt_xshooter/VIS_2x1 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/vlt_xshooter/VIS_2x1/vlt_xshooter_vis_2x1.test.log
Process Id: 2760
Start time: Mon Sep 26 01:07:21 2022
End time:   Mon Sep 26 01:31:22 2022
Duration:   0:24:01.365596
Command:    run_pypeit /tmp/REDUX_OUT/vlt_xshooter/VIS_2x1/vlt_xshooter_vis_2x1.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/vlt_xshooter/VIS_2x1/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/vlt_xshooter/VIS_2x1/QA/MF_A.html



-------------------------
Test Setup: keck_mosfire/mask1_K_with_continuum

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_mosfire/mask1_K_with_continuum
    PypeIt output: /tmp/REDUX_OUT/keck_mosfire/mask1_K_with_continuum
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_mosfire/mask1_K_with_continuum pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/mask1_K_with_continuum/keck_mosfire_mask1_k_with_continuum.test.log
Process Id: 2751
Start time: Mon Sep 26 01:05:09 2022
End time:   Mon Sep 26 01:31:48 2022
Duration:   0:26:38.361376
Command:    run_pypeit /tmp/REDUX_OUT/keck_mosfire/mask1_K_with_continuum/keck_mosfire_mask1_k_with_continuum.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_mosfire/mask1_K_with_continuum/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_mosfire/mask1_K_with_continuum/QA/MF_A.html



-------------------------
Test Setup: keck_mosfire/mask1_J_with_continuum

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_mosfire/mask1_J_with_continuum
    PypeIt output: /tmp/REDUX_OUT/keck_mosfire/mask1_J_with_continuum
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_mosfire/mask1_J_with_continuum pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/mask1_J_with_continuum/keck_mosfire_mask1_j_with_continuum.test.log
Process Id: 2747
Start time: Mon Sep 26 01:04:13 2022
End time:   Mon Sep 26 01:32:59 2022
Duration:   0:28:45.365941
Command:    run_pypeit /tmp/REDUX_OUT/keck_mosfire/mask1_J_with_continuum/keck_mosfire_mask1_j_with_continuum.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_mosfire/mask1_J_with_continuum/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_mosfire/mask1_J_with_continuum/QA/MF_A.html



-------------------------
Test Setup: gemini_gmos/GS_HAM_R400_700

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gemini_gmos/GS_HAM_R400_700
    PypeIt output: /tmp/REDUX_OUT/gemini_gmos/GS_HAM_R400_700
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gemini_gmos/GS_HAM_R400_700 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gmos/GS_HAM_R400_700/gemini_gmos_gs_ham_r400_700.test.log
Process Id: 2795
Start time: Mon Sep 26 01:32:59 2022
End time:   Mon Sep 26 01:40:02 2022
Duration:   0:07:03.012224
Command:    run_pypeit /tmp/REDUX_OUT/gemini_gmos/GS_HAM_R400_700/gemini_gmos_gs_ham_r400_700.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
gemini_gmos/GS_HAM_R400_700 pypeit_sensfunc Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
gemini_gmos/GS_HAM_R400_700 pypeit_flux Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
gemini_gmos/GS_HAM_R400_700 pypeit_coadd_1dspec Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
gemini_gmos/GS_HAM_R400_700 pypeit_tellfit Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: mmt_mmirs/HK_zJ

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/mmt_mmirs/HK_zJ
    PypeIt output: /tmp/REDUX_OUT/mmt_mmirs/HK_zJ
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
mmt_mmirs/HK_zJ pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/mmt_mmirs/HK_zJ/mmt_mmirs_hk_zj.test.log
Process Id: 2779
Start time: Mon Sep 26 01:13:24 2022
End time:   Mon Sep 26 01:44:28 2022
Duration:   0:31:04.027388
Command:    run_pypeit /tmp/REDUX_OUT/mmt_mmirs/HK_zJ/mmt_mmirs_hk_zj.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/mmt_mmirs/HK_zJ/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/mmt_mmirs/HK_zJ/QA/MF_A.html



-------------------------
Test Setup: ldt_deveny/DV8

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/ldt_deveny/DV8
    PypeIt output: /tmp/REDUX_OUT/ldt_deveny/DV8
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
ldt_deveny/DV8 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/ldt_deveny/DV8/ldt_deveny_dv8.test.log
Process Id: 2792
Start time: Mon Sep 26 01:31:48 2022
End time:   Mon Sep 26 01:49:40 2022
Duration:   0:17:52.669404
Command:    run_pypeit /tmp/REDUX_OUT/ldt_deveny/DV8/ldt_deveny_dv8.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/ldt_deveny/DV8/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/ldt_deveny/DV8/QA/MF_A.html



-------------------------
Test Setup: gemini_gmos/GN_HAM_R400_885

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gemini_gmos/GN_HAM_R400_885
    PypeIt output: /tmp/REDUX_OUT/gemini_gmos/GN_HAM_R400_885
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gemini_gmos/GN_HAM_R400_885 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gmos/GN_HAM_R400_885/gemini_gmos_gn_ham_r400_885.test.log
Process Id: 2786
Start time: Mon Sep 26 01:28:18 2022
End time:   Mon Sep 26 01:51:42 2022
Duration:   0:23:24.158016
Command:    run_pypeit /tmp/REDUX_OUT/gemini_gmos/GN_HAM_R400_885/gemini_gmos_gn_ham_r400_885.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_lris_blue_orig/long_600_4000_d500

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_blue_orig/long_600_4000_d500
    PypeIt output: /tmp/REDUX_OUT/keck_lris_blue_orig/long_600_4000_d500
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_blue_orig/long_600_4000_d500 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_blue_orig/long_600_4000_d500/keck_lris_blue_orig_long_600_4000_d500.test.log
Process Id: 2789
Start time: Mon Sep 26 01:31:22 2022
End time:   Mon Sep 26 01:55:18 2022
Duration:   0:23:55.452880
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_blue_orig/long_600_4000_d500/keck_lris_blue_orig_long_600_4000_d500.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: lbt_luci/LUCI-I

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/lbt_luci/LUCI-I
    PypeIt output: /tmp/REDUX_OUT/lbt_luci/LUCI-I
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
lbt_luci/LUCI-I pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/lbt_luci/LUCI-I/lbt_luci_luci-i.test.log
Process Id: 2782
Start time: Mon Sep 26 01:25:00 2022
End time:   Mon Sep 26 01:56:12 2022
Duration:   0:31:12.061376
Command:    run_pypeit /tmp/REDUX_OUT/lbt_luci/LUCI-I/lbt_luci_luci-i.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/lbt_luci/LUCI-I/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/lbt_luci/LUCI-I/QA/MF_A.html



-------------------------
Test Setup: keck_lris_blue/multi_600_4000_d560

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/multi_600_4000_d560
    PypeIt output: /tmp/REDUX_OUT/keck_lris_blue/multi_600_4000_d560
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_blue/multi_600_4000_d560 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_blue/multi_600_4000_d560/keck_lris_blue_multi_600_4000_d560.test.log
Process Id: 2805
Start time: Mon Sep 26 01:49:40 2022
End time:   Mon Sep 26 01:58:54 2022
Duration:   0:09:13.556780
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_blue/multi_600_4000_d560/keck_lris_blue_multi_600_4000_d560.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_lris_blue/multi_600_4000_d560 pypeit_coadd_2dspec Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: gtc_osiris/R1000BMOS

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gtc_osiris/R1000BMOS
    PypeIt output: /tmp/REDUX_OUT/gtc_osiris/R1000BMOS
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gtc_osiris/R1000BMOS pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gtc_osiris/R1000BMOS/gtc_osiris_r1000bmos.test.log
Process Id: 2799
Start time: Mon Sep 26 01:40:02 2022
End time:   Mon Sep 26 02:03:28 2022
Duration:   0:23:26.763213
Command:    run_pypeit /tmp/REDUX_OUT/gtc_osiris/R1000BMOS/gtc_osiris_r1000bmos.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/gtc_osiris/R1000BMOS/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/gtc_osiris/R1000BMOS/QA/MF_A.html



-------------------------
Test Setup: ldt_deveny/DV5

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/ldt_deveny/DV5
    PypeIt output: /tmp/REDUX_OUT/ldt_deveny/DV5
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
ldt_deveny/DV5 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/ldt_deveny/DV5/ldt_deveny_dv5.test.log
Process Id: 2823
Start time: Mon Sep 26 02:03:28 2022
End time:   Mon Sep 26 02:05:45 2022
Duration:   0:02:16.207954
Command:    run_pypeit /tmp/REDUX_OUT/ldt_deveny/DV5/ldt_deveny_dv5.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: gemini_flamingos2/JH_JH

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gemini_flamingos2/JH_JH
    PypeIt output: /tmp/REDUX_OUT/gemini_flamingos2/JH_JH
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gemini_flamingos2/JH_JH pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gemini_flamingos2/JH_JH/gemini_flamingos2_jh_jh.test.log
Process Id: 2802
Start time: Mon Sep 26 01:44:28 2022
End time:   Mon Sep 26 02:07:38 2022
Duration:   0:23:09.721400
Command:    run_pypeit /tmp/REDUX_OUT/gemini_flamingos2/JH_JH/gemini_flamingos2_jh_jh.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/gemini_flamingos2/JH_JH/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/gemini_flamingos2/JH_JH/QA/MF_A.html



-------------------------
Test Setup: keck_lris_blue/multi_600_4000_slitmask

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/multi_600_4000_slitmask
    PypeIt output: /tmp/REDUX_OUT/keck_lris_blue/multi_600_4000_slitmask
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_blue/multi_600_4000_slitmask pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_blue/multi_600_4000_slitmask/keck_lris_blue_multi_600_4000_slitmask.test.log
Process Id: 2809
Start time: Mon Sep 26 01:51:42 2022
End time:   Mon Sep 26 02:08:19 2022
Duration:   0:16:37.123827
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_blue/multi_600_4000_slitmask/keck_lris_blue_multi_600_4000_slitmask.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: ldt_deveny/DV2

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/ldt_deveny/DV2
    PypeIt output: /tmp/REDUX_OUT/ldt_deveny/DV2
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
ldt_deveny/DV2 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/ldt_deveny/DV2/ldt_deveny_dv2.test.log
Process Id: 2834
Start time: Mon Sep 26 02:08:19 2022
End time:   Mon Sep 26 02:11:09 2022
Duration:   0:02:49.754660
Command:    run_pypeit /tmp/REDUX_OUT/ldt_deveny/DV2/ldt_deveny_dv2.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: p200_tspec/TSPEC

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/p200_tspec/TSPEC
    PypeIt output: /tmp/REDUX_OUT/p200_tspec/TSPEC
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
p200_tspec/TSPEC pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/p200_tspec/TSPEC/p200_tspec_tspec.test.log
Process Id: 2813
Start time: Mon Sep 26 01:55:18 2022
End time:   Mon Sep 26 02:12:27 2022
Duration:   0:17:09.037855
Command:    run_pypeit /tmp/REDUX_OUT/p200_tspec/TSPEC/p200_tspec_tspec.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/p200_tspec/TSPEC/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/p200_tspec/TSPEC/QA/MF_A.html



-------------------------
Test Setup: gtc_osiris/R1000B

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gtc_osiris/R1000B
    PypeIt output: /tmp/REDUX_OUT/gtc_osiris/R1000B
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gtc_osiris/R1000B pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gtc_osiris/R1000B/gtc_osiris_r1000b.test.log
Process Id: 2820
Start time: Mon Sep 26 01:58:54 2022
End time:   Mon Sep 26 02:12:37 2022
Duration:   0:13:43.400360
Command:    run_pypeit /tmp/REDUX_OUT/gtc_osiris/R1000B/gtc_osiris_r1000b.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/gtc_osiris/R1000B/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/gtc_osiris/R1000B/QA/MF_A.html



-------------------------
Test Setup: vlt_xshooter/VIS_2x2

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/vlt_xshooter/VIS_2x2
    PypeIt output: /tmp/REDUX_OUT/vlt_xshooter/VIS_2x2
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
vlt_xshooter/VIS_2x2 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/vlt_xshooter/VIS_2x2/vlt_xshooter_vis_2x2.test.log
Process Id: 2816
Start time: Mon Sep 26 01:56:12 2022
End time:   Mon Sep 26 02:14:10 2022
Duration:   0:17:58.377727
Command:    run_pypeit /tmp/REDUX_OUT/vlt_xshooter/VIS_2x2/vlt_xshooter_vis_2x2.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/vlt_xshooter/VIS_2x2/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/vlt_xshooter/VIS_2x2/QA/MF_A.html



-------------------------
Test Setup: soar_goodman_red/M1

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/soar_goodman_red/M1
    PypeIt output: /tmp/REDUX_OUT/soar_goodman_red/M1
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
soar_goodman_red/M1 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/soar_goodman_red/M1/soar_goodman_red_m1.test.log
Process Id: 2844
Start time: Mon Sep 26 02:12:37 2022
End time:   Mon Sep 26 02:16:16 2022
Duration:   0:03:38.523277
Command:    run_pypeit /tmp/REDUX_OUT/soar_goodman_red/M1/soar_goodman_red_m1.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: shane_kast_red/600_7500_d57

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/shane_kast_red/600_7500_d57
    PypeIt output: /tmp/REDUX_OUT/shane_kast_red/600_7500_d57
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
shane_kast_red/600_7500_d57 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/shane_kast_red/600_7500_d57/shane_kast_red_600_7500_d57.test.log
Process Id: 2838
Start time: Mon Sep 26 02:11:09 2022
End time:   Mon Sep 26 02:16:29 2022
Duration:   0:05:19.991803
Command:    run_pypeit /tmp/REDUX_OUT/shane_kast_red/600_7500_d57/shane_kast_red_600_7500_d57.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: vlt_fors2/300I

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/vlt_fors2/300I
    PypeIt output: /tmp/REDUX_OUT/vlt_fors2/300I
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
vlt_fors2/300I pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/vlt_fors2/300I/vlt_fors2_300i.test.log
Process Id: 2847
Start time: Mon Sep 26 02:14:10 2022
End time:   Mon Sep 26 02:23:39 2022
Duration:   0:09:28.854357
Command:    run_pypeit /tmp/REDUX_OUT/vlt_fors2/300I/vlt_fors2_300i.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: mmt_mmirs/K_K

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/mmt_mmirs/K_K
    PypeIt output: /tmp/REDUX_OUT/mmt_mmirs/K_K
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
mmt_mmirs/K_K pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/mmt_mmirs/K_K/mmt_mmirs_k_k.test.log
Process Id: 2830
Start time: Mon Sep 26 02:07:38 2022
End time:   Mon Sep 26 02:24:45 2022
Duration:   0:17:07.092069
Command:    run_pypeit /tmp/REDUX_OUT/mmt_mmirs/K_K/mmt_mmirs_k_k.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/mmt_mmirs/K_K/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/mmt_mmirs/K_K/QA/MF_A.html



-------------------------
Test Setup: keck_nires/NIRES

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_nires/NIRES
    PypeIt output: /tmp/REDUX_OUT/keck_nires/NIRES
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_nires/NIRES pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_nires/NIRES/keck_nires_nires.test.log
Process Id: 2827
Start time: Mon Sep 26 02:05:45 2022
End time:   Mon Sep 26 02:24:07 2022
Duration:   0:18:22.657550
Command:    run_pypeit /tmp/REDUX_OUT/keck_nires/NIRES/keck_nires_nires.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_nires/NIRES/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_nires/NIRES/QA/MF_A.html



----
keck_nires/NIRES pypeit_ql Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_nires/NIRES/keck_nires_nires.test_ql.log
Process Id: 2863
Start time: Mon Sep 26 02:24:11 2022
End time:   Mon Sep 26 02:25:27 2022
Duration:   0:01:16.286943
Command:    pypeit_ql_keck_nires /PypeIt-development-suite/RAW_DATA/keck_nires/NIRES s190519_0067.fits s190519_0068.fits

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mql_keck_nires.py 102 main()[0m - Data reduction complete
[1;32m[INFO]    ::[0m [1;34mql_keck_nires.py 104 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_nires/NIRES/keck_nires_A/QA/MF_A.html



-------------------------
Test Setup: ldt_deveny/DV9

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/ldt_deveny/DV9
    PypeIt output: /tmp/REDUX_OUT/ldt_deveny/DV9
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
ldt_deveny/DV9 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/ldt_deveny/DV9/ldt_deveny_dv9.test.log
Process Id: 2859
Start time: Mon Sep 26 02:23:39 2022
End time:   Mon Sep 26 02:26:42 2022
Duration:   0:03:03.083328
Command:    run_pypeit /tmp/REDUX_OUT/ldt_deveny/DV9/ldt_deveny_dv9.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: tng_dolores/LRB

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/tng_dolores/LRB
    PypeIt output: /tmp/REDUX_OUT/tng_dolores/LRB
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
tng_dolores/LRB pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/tng_dolores/LRB/tng_dolores_lrb.test.log
Process Id: 2851
Start time: Mon Sep 26 02:16:16 2022
End time:   Mon Sep 26 02:27:59 2022
Duration:   0:11:43.592161
Command:    run_pypeit /tmp/REDUX_OUT/tng_dolores/LRB/tng_dolores_lrb.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/tng_dolores/LRB/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/tng_dolores/LRB/QA/MF_A.html



-------------------------
Test Setup: magellan_mage/1x1

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/magellan_mage/1x1
    PypeIt output: /tmp/REDUX_OUT/magellan_mage/1x1
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
magellan_mage/1x1 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/magellan_mage/1x1/magellan_mage_1x1.test.log
Process Id: 2841
Start time: Mon Sep 26 02:12:27 2022
End time:   Mon Sep 26 02:28:29 2022
Duration:   0:16:01.803415
Command:    run_pypeit /tmp/REDUX_OUT/magellan_mage/1x1/magellan_mage_1x1.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/magellan_mage/1x1/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/magellan_mage/1x1/QA/MF_A.html



-------------------------
Test Setup: mdm_osmos/MDM4K

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/mdm_osmos/MDM4K
    PypeIt output: /tmp/REDUX_OUT/mdm_osmos/MDM4K
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
mdm_osmos/MDM4K pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/mdm_osmos/MDM4K/mdm_osmos_mdm4k.test.log
Process Id: 2855
Start time: Mon Sep 26 02:16:29 2022
End time:   Mon Sep 26 02:29:17 2022
Duration:   0:12:48.245742
Command:    run_pypeit /tmp/REDUX_OUT/mdm_osmos/MDM4K/mdm_osmos_mdm4k.pypeit -o

Error Messages:

End of Log:
             ---------------  -----------
Wrote: /tmp/REDUX_OUT/mdm_osmos/MDM4K/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/mdm_osmos/MDM4K/QA/MF_A.html



-------------------------
Test Setup: ldt_deveny/DV6

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/ldt_deveny/DV6
    PypeIt output: /tmp/REDUX_OUT/ldt_deveny/DV6
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
ldt_deveny/DV6 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/ldt_deveny/DV6/ldt_deveny_dv6.test.log
Process Id: 2883
Start time: Mon Sep 26 02:29:17 2022
End time:   Mon Sep 26 02:30:55 2022
Duration:   0:01:37.914253
Command:    run_pypeit /tmp/REDUX_OUT/ldt_deveny/DV6/ldt_deveny_dv6.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_lris_red_mark4/long_600_10000_d680

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_red_mark4/long_600_10000_d680
    PypeIt output: /tmp/REDUX_OUT/keck_lris_red_mark4/long_600_10000_d680
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_red_mark4/long_600_10000_d680 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red_mark4/long_600_10000_d680/keck_lris_red_mark4_long_600_10000_d680.test.log
Process Id: 2866
Start time: Mon Sep 26 02:24:45 2022
End time:   Mon Sep 26 02:31:46 2022
Duration:   0:07:00.766796
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red_mark4/long_600_10000_d680/keck_lris_red_mark4_long_600_10000_d680.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
keck_lris_red_mark4/long_600_10000_d680 pypeit_sensfunc Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
keck_lris_red_mark4/long_600_10000_d680 pypeit_ql Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: shane_kast_red/600_5000_d46

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/shane_kast_red/600_5000_d46
    PypeIt output: /tmp/REDUX_OUT/shane_kast_red/600_5000_d46
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
shane_kast_red/600_5000_d46 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/shane_kast_red/600_5000_d46/shane_kast_red_600_5000_d46.test.log
Process Id: 2887
Start time: Mon Sep 26 02:30:55 2022
End time:   Mon Sep 26 02:34:10 2022
Duration:   0:03:15.007128
Command:    run_pypeit /tmp/REDUX_OUT/shane_kast_red/600_5000_d46/shane_kast_red_600_5000_d46.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_mosfire/long2pos1_H

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_mosfire/long2pos1_H
    PypeIt output: /tmp/REDUX_OUT/keck_mosfire/long2pos1_H
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_mosfire/long2pos1_H pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/long2pos1_H/keck_mosfire_long2pos1_h.test.log
Process Id: 2870
Start time: Mon Sep 26 02:25:27 2022
End time:   Mon Sep 26 02:33:36 2022
Duration:   0:08:08.505742
Command:    run_pypeit /tmp/REDUX_OUT/keck_mosfire/long2pos1_H/keck_mosfire_long2pos1_h.pypeit -o

Error Messages:

End of Log:
             ----------------------  -----------
Wrote: /tmp/REDUX_OUT/keck_mosfire/long2pos1_H/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_mosfire/long2pos1_H/QA/MF_A.html



----
keck_mosfire/long2pos1_H pypeit_coadd_2dspec Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/long2pos1_H/keck_mosfire_long2pos1_h.test_2dcoadd.log
Process Id: 2893
Start time: Mon Sep 26 02:33:36 2022
End time:   Mon Sep 26 02:34:43 2022
Duration:   0:01:06.713798
Command:    pypeit_coadd_2dspec --file /PypeIt-development-suite/coadd2d_files/keck_mosfire_long2pos1_h.coadd2d

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m Wrote 1D spectra to /tmp/REDUX_OUT/keck_mosfire/long2pos1_H/Science_coadd/spec1d_MF.20180718.22100-MF.20180718.22154-HIP61138.fits
[1;32m[INFO]    ::[0m Wrote: /tmp/REDUX_OUT/keck_mosfire/long2pos1_H/Science_coadd/spec2d_MF.20180718.22100-MF.20180718.22154-HIP61138.fits
Writing the parameters to MF.20180718.22100-MF.20180718.22154-HIP61138_coadd2d.par



-------------------------
Test Setup: keck_lris_red_orig/long_300_5000

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_red_orig/long_300_5000
    PypeIt output: /tmp/REDUX_OUT/keck_lris_red_orig/long_300_5000
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_red_orig/long_300_5000 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_red_orig/long_300_5000/keck_lris_red_orig_long_300_5000.test.log
Process Id: 2877
Start time: Mon Sep 26 02:27:59 2022
End time:   Mon Sep 26 02:34:57 2022
Duration:   0:06:57.348907
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_red_orig/long_300_5000/keck_lris_red_orig_long_300_5000.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: gemini_gnirs/10_LB_SXD

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/gemini_gnirs/10_LB_SXD
    PypeIt output: /tmp/REDUX_OUT/gemini_gnirs/10_LB_SXD
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
gemini_gnirs/10_LB_SXD pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/gemini_gnirs/10_LB_SXD/gemini_gnirs_10_lb_sxd.test.log
Process Id: 2880
Start time: Mon Sep 26 02:28:29 2022
End time:   Mon Sep 26 02:35:18 2022
Duration:   0:06:49.380266
Command:    run_pypeit /tmp/REDUX_OUT/gemini_gnirs/10_LB_SXD/gemini_gnirs_10_lb_sxd.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/gemini_gnirs/10_LB_SXD/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/gemini_gnirs/10_LB_SXD/QA/MF_A.html



-------------------------
Test Setup: vlt_fors2/600Z

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/vlt_fors2/600Z
    PypeIt output: /tmp/REDUX_OUT/vlt_fors2/600Z
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
vlt_fors2/600Z pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/vlt_fors2/600Z/vlt_fors2_600z.test.log
Process Id: 2874
Start time: Mon Sep 26 02:26:42 2022
End time:   Mon Sep 26 02:36:43 2022
Duration:   0:10:00.873777
Command:    run_pypeit /tmp/REDUX_OUT/vlt_fors2/600Z/vlt_fors2_600z.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/vlt_fors2/600Z/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/vlt_fors2/600Z/QA/MF_A.html



-------------------------
Test Setup: ntt_efosc2/gr5

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/ntt_efosc2/gr5
    PypeIt output: /tmp/REDUX_OUT/ntt_efosc2/gr5
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
ntt_efosc2/gr5 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/ntt_efosc2/gr5/ntt_efosc2_gr5.test.log
Process Id: 2908
Start time: Mon Sep 26 02:35:18 2022
End time:   Mon Sep 26 02:38:06 2022
Duration:   0:02:48.415386
Command:    run_pypeit /tmp/REDUX_OUT/ntt_efosc2/gr5/ntt_efosc2_gr5.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_mosfire/longslit_3x0.7_H

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_mosfire/longslit_3x0.7_H
    PypeIt output: /tmp/REDUX_OUT/keck_mosfire/longslit_3x0.7_H
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_mosfire/longslit_3x0.7_H pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/longslit_3x0.7_H/keck_mosfire_longslit_3x0.7_h.test.log
Process Id: 2891
Start time: Mon Sep 26 02:31:46 2022
End time:   Mon Sep 26 02:38:42 2022
Duration:   0:06:55.497223
Command:    run_pypeit /tmp/REDUX_OUT/keck_mosfire/longslit_3x0.7_H/keck_mosfire_longslit_3x0.7_h.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_mosfire/longslit_3x0.7_H/QA/MF_B.html
Wrote: /tmp/REDUX_OUT/keck_mosfire/longslit_3x0.7_H/QA/MF_B.html



-------------------------
Test Setup: keck_lris_blue/long_400_3400_d560

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/long_400_3400_d560
    PypeIt output: /tmp/REDUX_OUT/keck_lris_blue/long_400_3400_d560
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_blue/long_400_3400_d560 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_blue/long_400_3400_d560/keck_lris_blue_long_400_3400_d560.test.log
Process Id: 2901
Start time: Mon Sep 26 02:34:43 2022
End time:   Mon Sep 26 02:39:23 2022
Duration:   0:04:39.883864
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_blue/long_400_3400_d560/keck_lris_blue_long_400_3400_d560.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: p200_dbsp_red/316_7500_d55

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/p200_dbsp_red/316_7500_d55
    PypeIt output: /tmp/REDUX_OUT/p200_dbsp_red/316_7500_d55
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
p200_dbsp_red/316_7500_d55 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/p200_dbsp_red/316_7500_d55/p200_dbsp_red_316_7500_d55.test.log
Process Id: 2905
Start time: Mon Sep 26 02:34:57 2022
End time:   Mon Sep 26 02:39:53 2022
Duration:   0:04:55.893948
Command:    run_pypeit /tmp/REDUX_OUT/p200_dbsp_red/316_7500_d55/p200_dbsp_red_316_7500_d55.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/p200_dbsp_red/316_7500_d55/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/p200_dbsp_red/316_7500_d55/QA/MF_A.html



-------------------------
Test Setup: shane_kast_blue/600_4310_d55

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/shane_kast_blue/600_4310_d55
    PypeIt output: /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A
Files:
     .pypeit file: shane_kast_blue_A.pypeit
 Std .pypeit file: None
Tests:
----
shane_kast_blue/600_4310_d55 pypeit_setup Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_600_4310_d55.setup.log
Process Id: 2911
Start time: Mon Sep 26 02:36:43 2022
End time:   Mon Sep 26 02:36:48 2022
Duration:   0:00:04.779311
Command:    pypeit_setup -r /PypeIt-development-suite/RAW_DATA/shane_kast_blue/600_4310_d55 -s shane_kast_blue -c all -o --output_path /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m Inspect the .sorted file
[1;32m[INFO]    ::[0m PypeIt file successfully vetted.
[1;32m[INFO]    ::[0m PypeIt input file written to: /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/shane_kast_blue_A.pypeit



----
shane_kast_blue/600_4310_d55 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/shane_kast_blue_600_4310_d55.test.log
Process Id: 2913
Start time: Mon Sep 26 02:36:48 2022
End time:   Mon Sep 26 02:40:00 2022
Duration:   0:03:11.815343
Command:    run_pypeit shane_kast_blue_A.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



----
shane_kast_blue/600_4310_d55 pypeit_sensfunc Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
shane_kast_blue/600_4310_d55 pypeit_flux_setup Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
shane_kast_blue/600_4310_d55 pypeit_flux Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
shane_kast_blue/600_4310_d55 pypeit_coadd_1dspec Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


----
shane_kast_blue/600_4310_d55 pypeit_ql Result: [1;31m--- SKIPPED[0m

Logfile:    None
Process Id: None
Start time: n/a
End time:   n/a
Duration:   None
Command:    

Error Messages:

End of Log:


-------------------------
Test Setup: lbt_luci/LUCI-II

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/lbt_luci/LUCI-II
    PypeIt output: /tmp/REDUX_OUT/lbt_luci/LUCI-II
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
lbt_luci/LUCI-II pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/lbt_luci/LUCI-II/lbt_luci_luci-ii.test.log
Process Id: 2897
Start time: Mon Sep 26 02:34:10 2022
End time:   Mon Sep 26 02:41:11 2022
Duration:   0:07:00.630676
Command:    run_pypeit /tmp/REDUX_OUT/lbt_luci/LUCI-II/lbt_luci_luci-ii.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/lbt_luci/LUCI-II/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/lbt_luci/LUCI-II/QA/MF_A.html



-------------------------
Test Setup: ntt_efosc2/gr6

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/ntt_efosc2/gr6
    PypeIt output: /tmp/REDUX_OUT/ntt_efosc2/gr6
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
ntt_efosc2/gr6 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/ntt_efosc2/gr6/ntt_efosc2_gr6.test.log
Process Id: 2920
Start time: Mon Sep 26 02:38:42 2022
End time:   Mon Sep 26 02:41:49 2022
Duration:   0:03:07.385283
Command:    run_pypeit /tmp/REDUX_OUT/ntt_efosc2/gr6/ntt_efosc2_gr6.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: keck_lris_blue/long_600_4000_d560

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_lris_blue/long_600_4000_d560
    PypeIt output: /tmp/REDUX_OUT/keck_lris_blue/long_600_4000_d560
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_lris_blue/long_600_4000_d560 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/keck_lris_blue/long_600_4000_d560/keck_lris_blue_long_600_4000_d560.test.log
Process Id: 2917
Start time: Mon Sep 26 02:38:06 2022
End time:   Mon Sep 26 02:43:19 2022
Duration:   0:05:12.373844
Command:    run_pypeit /tmp/REDUX_OUT/keck_lris_blue/long_600_4000_d560/keck_lris_blue_long_600_4000_d560.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: p200_dbsp_red/1200_7100_d68

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/p200_dbsp_red/1200_7100_d68
    PypeIt output: /tmp/REDUX_OUT/p200_dbsp_red/1200_7100_d68
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
p200_dbsp_red/1200_7100_d68 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/p200_dbsp_red/1200_7100_d68/p200_dbsp_red_1200_7100_d68.test.log
Process Id: 2924
Start time: Mon Sep 26 02:39:23 2022
End time:   Mon Sep 26 02:43:23 2022
Duration:   0:04:00.050260
Command:    run_pypeit /tmp/REDUX_OUT/p200_dbsp_red/1200_7100_d68/p200_dbsp_red_1200_7100_d68.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/p200_dbsp_red/1200_7100_d68/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/p200_dbsp_red/1200_7100_d68/QA/MF_A.html



-------------------------
Test Setup: shane_kast_red/1200_5000_d57

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/shane_kast_red/1200_5000_d57
    PypeIt output: /tmp/REDUX_OUT/shane_kast_red/1200_5000_d57
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
shane_kast_red/1200_5000_d57 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/shane_kast_red/1200_5000_d57/shane_kast_red_1200_5000_d57.test.log
Process Id: 2932
Start time: Mon Sep 26 02:40:00 2022
End time:   Mon Sep 26 02:44:15 2022
Duration:   0:04:15.180203
Command:    run_pypeit /tmp/REDUX_OUT/shane_kast_red/1200_5000_d57/shane_kast_red_1200_5000_d57.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: soar_goodman_red/M2

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/soar_goodman_red/M2
    PypeIt output: /tmp/REDUX_OUT/soar_goodman_red/M2
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
soar_goodman_red/M2 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/soar_goodman_red/M2/soar_goodman_red_m2.test.log
Process Id: 2935
Start time: Mon Sep 26 02:41:11 2022
End time:   Mon Sep 26 02:44:31 2022
Duration:   0:03:19.815370
Command:    run_pypeit /tmp/REDUX_OUT/soar_goodman_red/M2/soar_goodman_red_m2.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: shane_kast_blue/452_3306_d57

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/shane_kast_blue/452_3306_d57
    PypeIt output: /tmp/REDUX_OUT/shane_kast_blue/452_3306_d57
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
shane_kast_blue/452_3306_d57 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/shane_kast_blue/452_3306_d57/shane_kast_blue_452_3306_d57.test.log
Process Id: 2939
Start time: Mon Sep 26 02:41:49 2022
End time:   Mon Sep 26 02:44:44 2022
Duration:   0:02:54.571444
Command:    run_pypeit /tmp/REDUX_OUT/shane_kast_blue/452_3306_d57/shane_kast_blue_452_3306_d57.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: p200_dbsp_red/600_10000_d55

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/p200_dbsp_red/600_10000_d55
    PypeIt output: /tmp/REDUX_OUT/p200_dbsp_red/600_10000_d55
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
p200_dbsp_red/600_10000_d55 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/p200_dbsp_red/600_10000_d55/p200_dbsp_red_600_10000_d55.test.log
Process Id: 2927
Start time: Mon Sep 26 02:39:53 2022
End time:   Mon Sep 26 02:44:44 2022
Duration:   0:04:51.217221
Command:    run_pypeit /tmp/REDUX_OUT/p200_dbsp_red/600_10000_d55/p200_dbsp_red_600_10000_d55.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/p200_dbsp_red/600_10000_d55/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/p200_dbsp_red/600_10000_d55/QA/MF_A.html



-------------------------
Test Setup: shane_kast_red/300_7500_Ne

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/shane_kast_red/300_7500_Ne
    PypeIt output: /tmp/REDUX_OUT/shane_kast_red/300_7500_Ne
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
shane_kast_red/300_7500_Ne pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/shane_kast_red/300_7500_Ne/shane_kast_red_300_7500_ne.test.log
Process Id: 2946
Start time: Mon Sep 26 02:43:23 2022
End time:   Mon Sep 26 02:46:09 2022
Duration:   0:02:46.488210
Command:    run_pypeit /tmp/REDUX_OUT/shane_kast_red/300_7500_Ne/shane_kast_red_300_7500_ne.pypeit -o

Error Messages:

End of Log:
             ----------  -----------------------------------------------------------------------------------------
Wrote: /tmp/REDUX_OUT/shane_kast_red/300_7500_Ne/QA/MF_B.html
Wrote: /tmp/REDUX_OUT/shane_kast_red/300_7500_Ne/QA/MF_B.html



-------------------------
Test Setup: bok_bc/300

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/bok_bc/300
    PypeIt output: /tmp/REDUX_OUT/bok_bc/300
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
bok_bc/300 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/bok_bc/300/bok_bc_300.test.log
Process Id: 2943
Start time: Mon Sep 26 02:43:19 2022
End time:   Mon Sep 26 02:46:15 2022
Duration:   0:02:56.314847
Command:    run_pypeit /tmp/REDUX_OUT/bok_bc/300/bok_bc_300.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/bok_bc/300/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/bok_bc/300/QA/MF_A.html



-------------------------
Test Setup: keck_nirspec/LOW_NIRSPEC-1

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_nirspec/LOW_NIRSPEC-1
    PypeIt output: /tmp/REDUX_OUT/keck_nirspec/LOW_NIRSPEC-1
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_nirspec/LOW_NIRSPEC-1 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_nirspec/LOW_NIRSPEC-1/keck_nirspec_low_nirspec-1.test.log
Process Id: 2950
Start time: Mon Sep 26 02:44:15 2022
End time:   Mon Sep 26 02:47:16 2022
Duration:   0:03:00.971015
Command:    run_pypeit /tmp/REDUX_OUT/keck_nirspec/LOW_NIRSPEC-1/keck_nirspec_low_nirspec-1.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_nirspec/LOW_NIRSPEC-1/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/keck_nirspec/LOW_NIRSPEC-1/QA/MF_A.html



-------------------------
Test Setup: p200_dbsp_blue/600_4000_d68

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/p200_dbsp_blue/600_4000_d68
    PypeIt output: /tmp/REDUX_OUT/p200_dbsp_blue/600_4000_d68
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
p200_dbsp_blue/600_4000_d68 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/p200_dbsp_blue/600_4000_d68/p200_dbsp_blue_600_4000_d68.test.log
Process Id: 2961
Start time: Mon Sep 26 02:44:44 2022
End time:   Mon Sep 26 02:48:10 2022
Duration:   0:03:25.660382
Command:    run_pypeit /tmp/REDUX_OUT/p200_dbsp_blue/600_4000_d68/p200_dbsp_blue_600_4000_d68.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/p200_dbsp_blue/600_4000_d68/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/p200_dbsp_blue/600_4000_d68/QA/MF_A.html



-------------------------
Test Setup: magellan_fire/FIRE_Long

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/magellan_fire/FIRE_Long
    PypeIt output: /tmp/REDUX_OUT/magellan_fire/FIRE_Long
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
magellan_fire/FIRE_Long pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/magellan_fire/FIRE_Long/magellan_fire_fire_long.test.log
Process Id: 2954
Start time: Mon Sep 26 02:44:31 2022
End time:   Mon Sep 26 02:48:12 2022
Duration:   0:03:41.553041
Command:    run_pypeit /tmp/REDUX_OUT/magellan_fire/FIRE_Long/magellan_fire_fire_long.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/magellan_fire/FIRE_Long/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/magellan_fire/FIRE_Long/QA/MF_A.html



-------------------------
Test Setup: mmt_bluechannel/300l

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/mmt_bluechannel/300l
    PypeIt output: /tmp/REDUX_OUT/mmt_bluechannel/300l
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
mmt_bluechannel/300l pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/mmt_bluechannel/300l/mmt_bluechannel_300l.test.log
Process Id: 2958
Start time: Mon Sep 26 02:44:44 2022
End time:   Mon Sep 26 02:48:26 2022
Duration:   0:03:42.637814
Command:    run_pypeit /tmp/REDUX_OUT/mmt_bluechannel/300l/mmt_bluechannel_300l.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/mmt_bluechannel/300l/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/mmt_bluechannel/300l/QA/MF_A.html



-------------------------
Test Setup: p200_dbsp_blue/1200_5000_d68

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/p200_dbsp_blue/1200_5000_d68
    PypeIt output: /tmp/REDUX_OUT/p200_dbsp_blue/1200_5000_d68
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
p200_dbsp_blue/1200_5000_d68 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/p200_dbsp_blue/1200_5000_d68/p200_dbsp_blue_1200_5000_d68.test.log
Process Id: 2967
Start time: Mon Sep 26 02:46:15 2022
End time:   Mon Sep 26 02:48:42 2022
Duration:   0:02:26.905946
Command:    run_pypeit /tmp/REDUX_OUT/p200_dbsp_blue/1200_5000_d68/p200_dbsp_blue_1200_5000_d68.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/p200_dbsp_blue/1200_5000_d68/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/p200_dbsp_blue/1200_5000_d68/QA/MF_A.html



-------------------------
Test Setup: p200_dbsp_blue/600_4000_d55

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/p200_dbsp_blue/600_4000_d55
    PypeIt output: /tmp/REDUX_OUT/p200_dbsp_blue/600_4000_d55
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
p200_dbsp_blue/600_4000_d55 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/p200_dbsp_blue/600_4000_d55/p200_dbsp_blue_600_4000_d55.test.log
Process Id: 2964
Start time: Mon Sep 26 02:46:09 2022
End time:   Mon Sep 26 02:48:43 2022
Duration:   0:02:34.110325
Command:    run_pypeit /tmp/REDUX_OUT/p200_dbsp_blue/600_4000_d55/p200_dbsp_blue_600_4000_d55.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/p200_dbsp_blue/600_4000_d55/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/p200_dbsp_blue/600_4000_d55/QA/MF_A.html



-------------------------
Test Setup: bok_bc/600

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/bok_bc/600
    PypeIt output: /tmp/REDUX_OUT/bok_bc/600
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
bok_bc/600 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/bok_bc/600/bok_bc_600.test.log
Process Id: 2970
Start time: Mon Sep 26 02:47:16 2022
End time:   Mon Sep 26 02:49:07 2022
Duration:   0:01:50.843313
Command:    run_pypeit /tmp/REDUX_OUT/bok_bc/600/bok_bc_600.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/bok_bc/600/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/bok_bc/600/QA/MF_A.html



-------------------------
Test Setup: shane_kast_blue/830_3460_d46

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/shane_kast_blue/830_3460_d46
    PypeIt output: /tmp/REDUX_OUT/shane_kast_blue/830_3460_d46
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
shane_kast_blue/830_3460_d46 pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/shane_kast_blue/830_3460_d46/shane_kast_blue_830_3460_d46.test.log
Process Id: 2976
Start time: Mon Sep 26 02:48:12 2022
End time:   Mon Sep 26 02:49:30 2022
Duration:   0:01:17.990560
Command:    run_pypeit /tmp/REDUX_OUT/shane_kast_blue/830_3460_d46/shane_kast_blue_830_3460_d46.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: shane_kast_red/600_7500_d55_ret

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/shane_kast_red/600_7500_d55_ret
    PypeIt output: /tmp/REDUX_OUT/shane_kast_red/600_7500_d55_ret
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
shane_kast_red/600_7500_d55_ret pypeit  Result: [1;31m--- FAILED[0m

Logfile:    /tmp/REDUX_OUT/shane_kast_red/600_7500_d55_ret/shane_kast_red_600_7500_d55_ret.test.log
Process Id: 2973
Start time: Mon Sep 26 02:48:10 2022
End time:   Mon Sep 26 02:49:31 2022
Duration:   0:01:21.540478
Command:    run_pypeit /tmp/REDUX_OUT/shane_kast_red/600_7500_d55_ret/shane_kast_red_600_7500_d55_ret.pypeit -o

Error Messages:

End of Log:
  File "/PypeIt/pypeit/core/flexure.py", line 317, in spec_flex_shift
    smooth=smooth_sig_pix)
NameError: name 'smooth_sig_pix' is not defined



-------------------------
Test Setup: not_alfosc/grism4

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/not_alfosc/grism4
    PypeIt output: /tmp/REDUX_OUT/not_alfosc/grism4
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
not_alfosc/grism4 pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/not_alfosc/grism4/not_alfosc_grism4.test.log
Process Id: 2979
Start time: Mon Sep 26 02:48:26 2022
End time:   Mon Sep 26 02:49:38 2022
Duration:   0:01:12.224776
Command:    run_pypeit /tmp/REDUX_OUT/not_alfosc/grism4/not_alfosc_grism4.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/not_alfosc/grism4/QA/MF_A.html
Wrote: /tmp/REDUX_OUT/not_alfosc/grism4/QA/MF_A.html



-------------------------
Test Setup: keck_mosfire/J2_long

-------------------------
Directories:
         Raw data: /PypeIt-development-suite/RAW_DATA/keck_mosfire/J2_long
    PypeIt output: /tmp/REDUX_OUT/keck_mosfire/J2_long
Files:
     .pypeit file: None
 Std .pypeit file: None
Tests:
----
keck_mosfire/J2_long pypeit  Result: [1;32m--- PASSED[0m

Logfile:    /tmp/REDUX_OUT/keck_mosfire/J2_long/keck_mosfire_j2_long.test.log
Process Id: 2982
Start time: Mon Sep 26 02:48:42 2022
End time:   Mon Sep 26 03:13:47 2022
Duration:   0:25:05.106721
Command:    run_pypeit /tmp/REDUX_OUT/keck_mosfire/J2_long/keck_mosfire_j2_long.pypeit -o

Error Messages:

End of Log:
[1;32m[INFO]    ::[0m [1;34mrun_pypeit.py 146 main()[0m - Generating QA HTML
Wrote: /tmp/REDUX_OUT/keck_mosfire/J2_long/QA/MF_E.html
Wrote: /tmp/REDUX_OUT/keck_mosfire/J2_long/QA/MF_E.html



Vet Tests Results:
-------------------------
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.8.5, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 -- /root/miniconda3/bin/python
cachedir: .pytest_cache
hypothesis profile 'default' -> database=DirectoryBasedExampleDatabase('/tmp/REDUX_OUT/.hypothesis/examples')
rootdir: /
plugins: hypothesis-6.14.2, arraydiff-0.3, astropy-header-0.1.2, cov-2.12.1, doctestplus-0.10.0, filter-subpackage-0.1.1, openfiles-0.5.0, remotedata-0.3.2
[1mcollecting ... [0mcollected 25 items

../../PypeIt-development-suite/vet_tests/test_collate1d.py::test_collate_1d [32mPASSED[0m[32m [  4%][0m
../../PypeIt-development-suite/vet_tests/test_datacube.py::test_coadd_datacube [32mPASSED[0m[32m [  8%][0m
../../PypeIt-development-suite/vet_tests/test_edgetrace.py::test_addrm_slit [32mPASSED[0m[33m [ 12%][0m
../../PypeIt-development-suite/vet_tests/test_edgetrace.py::test_sobel_enhance [32mPASSED[0m[33m [ 16%][0m
../../PypeIt-development-suite/vet_tests/test_flexure.py::test_spat_flexure [31mFAILED[0m[31m [ 20%][0m
../../PypeIt-development-suite/vet_tests/test_flexure.py::test_flex_multi [32mPASSED[0m[31m [ 24%][0m
../../PypeIt-development-suite/vet_tests/test_fluxspec.py::test_gen_sensfunc [32mPASSED[0m[31m [ 28%][0m
../../PypeIt-development-suite/vet_tests/test_fluxspec.py::test_from_sens_func [31mFAILED[0m[31m [ 32%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_show_1dspec [31mFAILED[0m[31m [ 36%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_show_2dspec [31mFAILED[0m[31m [ 40%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_chk_edges [32mPASSED[0m[31m [ 44%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_view_fits_list [31mFAILED[0m[31m [ 48%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_view_fits_proc_fail [32mPASSED[0m[31m [ 52%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_chk_flat [32mPASSED[0m[31m [ 56%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_chk_wavecalib [32mPASSED[0m[31m [ 60%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_identify [32mPASSED[0m[31m [ 64%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_compare_sky [31mFAILED[0m[31m [ 68%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_collate_1d [31mFAILED[0m[31m [ 72%][0m
../../PypeIt-development-suite/vet_tests/test_scripts.py::test_parse_slits [31mFAILED[0m[31m [ 76%][0m
../../PypeIt-development-suite/vet_tests/test_slitmask.py::test_assign_maskinfo_add_missing [32mPASSED[0m[31m [ 80%][0m
../../PypeIt-development-suite/vet_tests/test_slitmask.py::test_deimosslitmask [32mPASSED[0m[31m [ 84%][0m
../../PypeIt-development-suite/vet_tests/test_slitmask.py::test_lris_slitmask [31mFAILED[0m[31m [ 88%][0m
../../PypeIt-development-suite/vet_tests/test_wavetilts.py::test_instantiate_from_master [32mPASSED[0m[31m [ 92%][0m
../../PypeIt-development-suite/vet_tests/test_wavetilts.py::test_flexure [32mPASSED[0m[31m [ 96%][0m
../../PypeIt-development-suite/vet_tests/test_wavetilts.py::test_run [32mPASSED[0m[31m [100%][0m

=================================== FAILURES ===================================
[31m[1m______________________________ test_spat_flexure _______________________________[0m

redux_out = '/tmp/REDUX_OUT'

[94mdef[39;49;00m [92mtest_spat_flexure[39;49;00m(redux_out):
[90m# Check that spatial flexure shift was set![39;49;00m
file_path = os.path.join(redux_out,
[33m'[39;49;00m[33mkeck_lris_red[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mmulti_600_5000_d560[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mScience[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mspec2d_LR.20181206.40617-nR2n25061_LRISr_20181206T111657.418.fits[39;49;00m[33m'[39;49;00m)
[90m# Load[39;49;00m
>       spec2dObj = spec2dobj.Spec2DObj.from_file(file_path, [33m'[39;49;00m[33mDET01[39;49;00m[33m'[39;49;00m)

[1m[31m/PypeIt-development-suite/vet_tests/test_flexure.py[0m:20:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/spec2dobj.py[0m:125: in from_file
hdul = io.fits_open(file)
[1m[31m/PypeIt/pypeit/io.py[0m:751: in fits_open
msgs.error([33mf[39;49;00m[33m'[39;49;00m[33m{[39;49;00mfilename[33m}[39;49;00m[33m does not exist![39;49;00m[33m'[39;49;00m)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <pypeit.pypmsgs.Messages object at 0x7fe7b1ea15e0>
msg = '/tmp/REDUX_OUT/keck_lris_red/multi_600_5000_d560/Science/spec2d_LR.20181206.40617-nR2n25061_LRISr_20181206T111657.418.fits does not exist!'

[94mdef[39;49;00m [92merror[39;49;00m([96mself[39;49;00m, msg):
[33m"""[39;49;00m
[33m    Print an error message[39;49;00m
[33m    """[39;49;00m
premsg = [33m'[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m+[96mself[39;49;00m._start + [96mself[39;49;00m._white_RD + [33m'[39;49;00m[33m[ERROR]   ::[39;49;00m[33m'[39;49;00m + [96mself[39;49;00m._end + [33m'[39;49;00m[33m [39;49;00m[33m'[39;49;00m
[96mself[39;49;00m._print(premsg, msg)

[90m# Close log file[39;49;00m
[90m# TODO: This no longer "closes" the QA plots[39;49;00m
[96mself[39;49;00m.close()

>       [94mraise[39;49;00m PypeItError(msg)
[1m[31mE       pypeit.pypmsgs.PypeItError: /tmp/REDUX_OUT/keck_lris_red/multi_600_5000_d560/Science/spec2d_LR.20181206.40617-nR2n25061_LRISr_20181206T111657.418.fits does not exist![0m

[1m[31m/PypeIt/pypeit/pypmsgs.py[0m:185: PypeItError
----------------------------- Captured stderr call -----------------------------

[1;37;41m[ERROR]   ::[0m [1;34mio.py 751 fits_open()[0m - /tmp/REDUX_OUT/keck_lris_red/multi_600_5000_d560/Science/spec2d_LR.20181206.40617-nR2n25061_LRISr_20181206T111657.418.fits does not exist!
[31m[1m_____________________________ test_from_sens_func ______________________________[0m

kast_blue_files = ['/tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b24-Feige66_KASTb_20150520T041246.960.f...REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits']

[94mdef[39;49;00m [92mtest_from_sens_func[39;49;00m(kast_blue_files):

sens_file = data_path([33m'[39;49;00m[33msensfunc.fits[39;49;00m[33m'[39;49;00m)
[94mif[39;49;00m os.path.isfile(sens_file):
os.remove(sens_file)

spectrograph = load_spectrograph([33m'[39;49;00m[33mshane_kast_blue[39;49;00m[33m'[39;49;00m)
par = spectrograph.default_pypeit_par()
std_file, sci_file = kast_blue_files

[90m# Build the sensitivity function[39;49;00m
sensFunc = sensfunc.UVISSensFunc(std_file, sens_file)
sensFunc.run()
sensFunc.to_file(sens_file)

[90m# Instantiate and run[39;49;00m
outfile = data_path(os.path.basename(sci_file))
>       fluxCalibrate = fluxcalibrate.MultiSlitFC([sci_file], [sens_file], par=par[[33m'[39;49;00m[33mfluxcalib[39;49;00m[33m'[39;49;00m],
outfiles=[outfile])

[1m[31m/PypeIt-development-suite/vet_tests/test_fluxspec.py[0m:81:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/fluxcalibrate.py[0m:91: in __init__
[96msuper[39;49;00m().[92m__init__[39;49;00m(spec1dfiles, sensfiles, par=par, debug=debug, outfiles=outfiles)
[1m[31m/PypeIt/pypeit/fluxcalibrate.py[0m:48: in __init__
header = fits.getheader(spec1dfiles[[94m0[39;49;00m])
[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/convenience.py[0m:103: in getheader
hdulist, extidx = _getext(filename, mode, *args, **kwargs)
[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/convenience.py[0m:1071: in _getext
hdulist = fitsopen(filename, mode=mode, **kwargs)
[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/hdu/hdulist.py[0m:175: in fitsopen
[94mreturn[39;49;00m HDUList.fromfile(name, mode, memmap, save_backup, cache,
[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/hdu/hdulist.py[0m:410: in fromfile
[94mreturn[39;49;00m [96mcls[39;49;00m._readfrom(fileobj=fileobj, mode=mode, memmap=memmap,
[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/hdu/hdulist.py[0m:1060: in _readfrom
fileobj = _File(fileobj, mode=mode, memmap=memmap, cache=cache)
[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/file.py[0m:170: in __init__
[96mself[39;49;00m._open_filename(fileobj, mode, overwrite)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <astropy.io.fits.file._File None>
filename = '/tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits'
mode = 'readonly', overwrite = False

[94mdef[39;49;00m [92m_open_filename[39;49;00m([96mself[39;49;00m, filename, mode, overwrite):
[33m"""Open a FITS file from a filename string."""[39;49;00m

[94mif[39;49;00m mode == [33m'[39;49;00m[33mostream[39;49;00m[33m'[39;49;00m:
[96mself[39;49;00m._overwrite_existing(overwrite, [94mNone[39;49;00m, [94mTrue[39;49;00m)

[94mif[39;49;00m os.path.exists([96mself[39;49;00m.name):
[94mwith[39;49;00m [96mopen[39;49;00m([96mself[39;49;00m.name, [33m'[39;49;00m[33mrb[39;49;00m[33m'[39;49;00m) [94mas[39;49;00m f:
magic = f.read([94m4[39;49;00m)
[94melse[39;49;00m:
magic = [33mb[39;49;00m[33m'[39;49;00m[33m'[39;49;00m

ext = os.path.splitext([96mself[39;49;00m.name)[[94m1[39;49;00m]

[94mif[39;49;00m [95mnot[39;49;00m [96mself[39;49;00m._try_read_compressed([96mself[39;49;00m.name, magic, mode, ext=ext):
>           [96mself[39;49;00m._file = [96mopen[39;49;00m([96mself[39;49;00m.name, IO_FITS_MODES[mode])
[1m[31mE           FileNotFoundError: [Errno 2] No such file or directory: '/tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits'[0m

[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/file.py[0m:562: FileNotFoundError
----------------------------- Captured stderr call -----------------------------
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 403 get_standard_spectrum()[0m - Getting archival standard spectrum
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 194 find_standard_file()[0m - Loading standard star file: /PypeIt/pypeit/data/standards/calspec/feige66_002.fits.gz
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 253 find_standard_file()[0m - Fluxes are flambda, normalized to 1e-17
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 802 counts2Nlam()[0m - Applying extinction correction
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 467 load_extinction_data()[0m - Using mthamextinct.dat for extinction corrections.
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 523 extinction_correction()[0m - Extinction data covered the whole spectra. Applying correction...
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 952 get_mask()[0m -  Masking bad pixels
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 957 get_mask()[0m -  Masking edges
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 960 get_mask()[0m -  Masking Below the atmospheric cutoff
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 967 get_mask()[0m - Masking recombination lines:
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 969 get_mask()[0m -  Masking Balmer
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 976 get_mask()[0m -  Masking Paschen
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 986 get_mask()[0m -  Masking Brackett
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 994 get_mask()[0m -  Masking Pfund
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 1039 get_mask()[0m - Your spectrum is bluer than 9100A, only optical telluric regions are masked.
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflux_calib.py 1329 standard_zeropoint()[0m - Should pull resolution from arc line analysis
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflux_calib.py 1330 standard_zeropoint()[0m - At the moment the resolution is taken as the PixelScale
[1;30m[WORK IN ]::[0m
[1;33m[PROGRESS]::[0m [1;34mflux_calib.py 1331 standard_zeropoint()[0m - This needs to be changed!
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 1342 standard_zeropoint()[0m - Initialize bspline for flux calibration
[1;32m[INFO]    ::[0m [1;34mflux_calib.py 1351 standard_zeropoint()[0m - Bspline fit on zeropoint.
[1;32m[INFO]    ::[0m [1;34mio.py 646 write_to_fits()[0m - File written to: /PypeIt/pypeit/tests/files/sensfunc.fits
[31m[1m_______________________________ test_show_1dspec _______________________________[0m

redux_out = '/tmp/REDUX_OUT'

[94mdef[39;49;00m [92mtest_show_1dspec[39;49;00m(redux_out):
spec_file = os.path.join(redux_out,
[33m'[39;49;00m[33mshane_kast_blue[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m600_4310_d55[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mshane_kast_blue_A[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mScience[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mspec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits[39;49;00m[33m'[39;49;00m)
[90m# Just list[39;49;00m
pargs = scripts.show_1dspec.Show1DSpec.parse_args([spec_file, [33m'[39;49;00m[33m--list[39;49;00m[33m'[39;49;00m])
>       scripts.show_1dspec.Show1DSpec.main(pargs)

[1m[31m/PypeIt-development-suite/vet_tests/test_scripts.py[0m:30:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/scripts/show_1dspec.py[0m:43: in main
sobjs = specobjs.SpecObjs.from_fitsfile(args.file, chk_version=[94mFalse[39;49;00m)
[1m[31m/PypeIt/pypeit/specobjs.py[0m:75: in from_fitsfile
hdul = io.fits_open(fits_file)
[1m[31m/PypeIt/pypeit/io.py[0m:751: in fits_open
msgs.error([33mf[39;49;00m[33m'[39;49;00m[33m{[39;49;00mfilename[33m}[39;49;00m[33m does not exist![39;49;00m[33m'[39;49;00m)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <pypeit.pypmsgs.Messages object at 0x7fe7b1ea15e0>
msg = '/tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits does not exist!'

[94mdef[39;49;00m [92merror[39;49;00m([96mself[39;49;00m, msg):
[33m"""[39;49;00m
[33m    Print an error message[39;49;00m
[33m    """[39;49;00m
premsg = [33m'[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m+[96mself[39;49;00m._start + [96mself[39;49;00m._white_RD + [33m'[39;49;00m[33m[ERROR]   ::[39;49;00m[33m'[39;49;00m + [96mself[39;49;00m._end + [33m'[39;49;00m[33m [39;49;00m[33m'[39;49;00m
[96mself[39;49;00m._print(premsg, msg)

[90m# Close log file[39;49;00m
[90m# TODO: This no longer "closes" the QA plots[39;49;00m
[96mself[39;49;00m.close()

>       [94mraise[39;49;00m PypeItError(msg)
[1m[31mE       pypeit.pypmsgs.PypeItError: /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits does not exist![0m

[1m[31m/PypeIt/pypeit/pypmsgs.py[0m:185: PypeItError
----------------------------- Captured stderr call -----------------------------

[1;37;41m[ERROR]   ::[0m [1;34mio.py 751 fits_open()[0m - /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits does not exist!
[31m[1m_______________________________ test_show_2dspec _______________________________[0m

redux_out = '/tmp/REDUX_OUT'

[94mdef[39;49;00m [92mtest_show_2dspec[39;49;00m(redux_out):
droot = os.path.join(redux_out,
[33m'[39;49;00m[33mshane_kast_blue[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m600_4310_d55[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mshane_kast_blue_A[39;49;00m[33m'[39;49;00m)
spec2d_file = os.path.join(droot, [33m'[39;49;00m[33mScience[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mspec2d_b27-J1217p3905_KASTb_20150520T045733.560.fits[39;49;00m[33m'[39;49;00m)
[90m# Ginga needs to be open in RC mode[39;49;00m
display.connect_to_ginga(raise_err=[94mTrue[39;49;00m, allow_new=[94mTrue[39;49;00m)
[90m# Save[39;49;00m
cdir = os.getcwd()
os.chdir(droot)
[90m# List[39;49;00m
pargs = scripts.show_2dspec.Show2DSpec.parse_args([spec2d_file, [33m'[39;49;00m[33m--list[39;49;00m[33m'[39;49;00m])
>       scripts.show_2dspec.Show2DSpec.main(pargs)

[1m[31m/PypeIt-development-suite/vet_tests/test_scripts.py[0m:46:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/scripts/show_2dspec.py[0m:114: in main
io.fits_open(args.file).info()
[1m[31m/PypeIt/pypeit/io.py[0m:751: in fits_open
msgs.error([33mf[39;49;00m[33m'[39;49;00m[33m{[39;49;00mfilename[33m}[39;49;00m[33m does not exist![39;49;00m[33m'[39;49;00m)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <pypeit.pypmsgs.Messages object at 0x7fe7b1ea15e0>
msg = '/tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec2d_b27-J1217p3905_KASTb_20150520T045733.560.fits does not exist!'

[94mdef[39;49;00m [92merror[39;49;00m([96mself[39;49;00m, msg):
[33m"""[39;49;00m
[33m    Print an error message[39;49;00m
[33m    """[39;49;00m
premsg = [33m'[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m+[96mself[39;49;00m._start + [96mself[39;49;00m._white_RD + [33m'[39;49;00m[33m[ERROR]   ::[39;49;00m[33m'[39;49;00m + [96mself[39;49;00m._end + [33m'[39;49;00m[33m [39;49;00m[33m'[39;49;00m
[96mself[39;49;00m._print(premsg, msg)

[90m# Close log file[39;49;00m
[90m# TODO: This no longer "closes" the QA plots[39;49;00m
[96mself[39;49;00m.close()

>       [94mraise[39;49;00m PypeItError(msg)
[1m[31mE       pypeit.pypmsgs.PypeItError: /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec2d_b27-J1217p3905_KASTb_20150520T045733.560.fits does not exist![0m

[1m[31m/PypeIt/pypeit/pypmsgs.py[0m:185: PypeItError
----------------------------- Captured stderr call -----------------------------

[1;37;41m[ERROR]   ::[0m [1;34mio.py 751 fits_open()[0m - /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec2d_b27-J1217p3905_KASTb_20150520T045733.560.fits does not exist!
[31m[1m_____________________________ test_view_fits_list ______________________________[0m

redux_out = '/tmp/REDUX_OUT'

[94mdef[39;49;00m [92mtest_view_fits_list[39;49;00m(redux_out):
[33m""" Test the list option[39;49;00m
[33m    """[39;49;00m
spec_file = os.path.join(redux_out,
[33m'[39;49;00m[33mshane_kast_blue[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m600_4310_d55[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mshane_kast_blue_A[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mScience[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mspec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits[39;49;00m[33m'[39;49;00m)
[90m#spec_file = data_path('spec1d_b27-J1217p3905_KASTb_2015May20T045733.560.fits')[39;49;00m
pargs = scripts.view_fits.ViewFits.parse_args([[33m'[39;49;00m[33mshane_kast_blue[39;49;00m[33m'[39;49;00m, spec_file, [33m'[39;49;00m[33m--list[39;49;00m[33m'[39;49;00m])
>       scripts.view_fits.ViewFits.main(pargs)

[1m[31m/PypeIt-development-suite/vet_tests/test_scripts.py[0m:76:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/scripts/view_fits.py[0m:54: in main
hdu = io.fits_open(args.file)
[1m[31m/PypeIt/pypeit/io.py[0m:751: in fits_open
msgs.error([33mf[39;49;00m[33m'[39;49;00m[33m{[39;49;00mfilename[33m}[39;49;00m[33m does not exist![39;49;00m[33m'[39;49;00m)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <pypeit.pypmsgs.Messages object at 0x7fe7b1ea15e0>
msg = '/tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits does not exist!'

[94mdef[39;49;00m [92merror[39;49;00m([96mself[39;49;00m, msg):
[33m"""[39;49;00m
[33m    Print an error message[39;49;00m
[33m    """[39;49;00m
premsg = [33m'[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m+[96mself[39;49;00m._start + [96mself[39;49;00m._white_RD + [33m'[39;49;00m[33m[ERROR]   ::[39;49;00m[33m'[39;49;00m + [96mself[39;49;00m._end + [33m'[39;49;00m[33m [39;49;00m[33m'[39;49;00m
[96mself[39;49;00m._print(premsg, msg)

[90m# Close log file[39;49;00m
[90m# TODO: This no longer "closes" the QA plots[39;49;00m
[96mself[39;49;00m.close()

>       [94mraise[39;49;00m PypeItError(msg)
[1m[31mE       pypeit.pypmsgs.PypeItError: /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits does not exist![0m

[1m[31m/PypeIt/pypeit/pypmsgs.py[0m:185: PypeItError
----------------------------- Captured stderr call -----------------------------

[1;37;41m[ERROR]   ::[0m [1;34mio.py 751 fits_open()[0m - /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits does not exist!
[31m[1m_______________________________ test_compare_sky _______________________________[0m

redux_out = '/tmp/REDUX_OUT'

[94mdef[39;49;00m [92mtest_compare_sky[39;49;00m(redux_out):
spec_file = os.path.join(redux_out,
[33m'[39;49;00m[33mshane_kast_blue[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m600_4310_d55[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mshane_kast_blue_A[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mScience[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mspec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits[39;49;00m[33m'[39;49;00m)
sky_file = [33m'[39;49;00m[33msky_kastb_600.fits[39;49;00m[33m'[39;49;00m

[90m# Running in `test` mode for boxcar extraction[39;49;00m
pargs = scripts.compare_sky.CompareSky.parse_args([spec_file, sky_file, [33m'[39;49;00m[33m--test[39;49;00m[33m'[39;49;00m])
>       scripts.compare_sky.CompareSky.main(pargs)

[1m[31m/PypeIt-development-suite/vet_tests/test_scripts.py[0m:175:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/scripts/compare_sky.py[0m:60: in main
user_sky = readspec(args.file, exten=exten, **ikwargs)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

specfil = '/tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits'
inflg = 0, efil = None, verbose = False, multi_ivar = False, format = 'ascii'
exten = 1, head_exten = 0, debug = False, select = 0
kwargs = {'flux_tag': 'BOX_COUNTS_SKY', 'ivar_tag': 'BOX_COUNTS_IVAR', 'sig_tag': 'BOX_COUNTS_SIG', 'wave_tag': 'BOX_WAVE'}
datfil = None, flg_fits = True, ext = '.fit', chk = False

[94mdef[39;49;00m [92mreadspec[39;49;00m(specfil, inflg=[94mNone[39;49;00m, efil=[94mNone[39;49;00m, verbose=[94mFalse[39;49;00m, multi_ivar=[94mFalse[39;49;00m,
[96mformat[39;49;00m=[33m'[39;49;00m[33mascii[39;49;00m[33m'[39;49;00m, exten=[94mNone[39;49;00m, head_exten=[94m0[39;49;00m, debug=[94mFalse[39;49;00m, select=[94m0[39;49;00m,
**kwargs):
[33m""" Read a FITS file (or astropy Table or ASCII file) into a[39;49;00m
[33m    XSpectrum1D class[39;49;00m
[33m[39;49;00m
[33m    Parameters[39;49;00m
[33m    ----------[39;49;00m
[33m    specfil : str or Table or XSpectrum1D[39;49;00m
[33m      Input file. If str:[39;49;00m
[33m        * FITS file are detected by searching for '.fit' in their filename.[39;49;00m
[33m        * ASCII must either have a proper Table format or be 3 (WAVE,[39;49;00m
[33m          FLUX, ERROR) or 4 (WAVE, FLUX, ERROR, CONTINUUM) columns. If[39;49;00m
[33m          the file has more than 4 columns with no header it will raise an error.[39;49;00m
[33m    efil : string, optional[39;49;00m
[33m      A filename for Error array, if it's in a separate file to the[39;49;00m
[33m      flux. The code will attempt to find this file on its own.[39;49;00m
[33m    multi_ivar : bool, optional[39;49;00m
[33m      If True, assume BOSS format of flux, ivar, log10(wave) in a[39;49;00m
[33m      multi-extension FITS.[39;49;00m
[33m    format : str, optional[39;49;00m
[33m      Format for ASCII table input. Default 'ascii'.[39;49;00m
[33m    exten : int, optional[39;49;00m
[33m      FITS extension (mainly for multiple binary FITS tables)[39;49;00m
[33m    select : int, optional[39;49;00m
[33m      Selected spectrum (for sets of 1D spectra, e.g. DESI brick)[39;49;00m
[33m    head_exten : int, optional[39;49;00m
[33m      Extension for header to ingest[39;49;00m
[33m    **kwargs : optional[39;49;00m
[33m      Passed to XSpectrum1D object[39;49;00m
[33m[39;49;00m
[33m    Returns[39;49;00m
[33m    -------[39;49;00m
[33m    An XSpectrum1D class[39;49;00m
[33m[39;49;00m
[33m    """[39;49;00m

[90m# Initialize[39;49;00m
[94mif[39;49;00m inflg [95mis[39;49;00m [94mNone[39;49;00m:
inflg = [94m0[39;49;00m

[90m# Check specfil type[39;49;00m
[94mif[39;49;00m [96misinstance[39;49;00m(specfil, Table):
datfil = [33m'[39;49;00m[33mNone[39;49;00m[33m'[39;49;00m
[90m# Dummy hdulist[39;49;00m
hdulist = [fits.PrimaryHDU(), specfil]
[94melif[39;49;00m [96misinstance[39;49;00m(specfil, basestring):
datfil = specfil.strip()
flg_fits = [94mFalse[39;49;00m
[94mfor[39;49;00m ext [95min[39;49;00m [[33m'[39;49;00m[33m.fit[39;49;00m[33m'[39;49;00m]:
[94mif[39;49;00m ext [95min[39;49;00m specfil:
flg_fits = [94mTrue[39;49;00m
[94mif[39;49;00m flg_fits: [90m# FITS[39;49;00m
[90m# Read header[39;49;00m
datfil, chk = chk_for_gz(specfil.strip())
[94mif[39;49;00m chk == [94m0[39;49;00m:
>                   [94mraise[39;49;00m [96mIOError[39;49;00m([33m'[39;49;00m[33mFile does not exist [39;49;00m[33m{}[39;49;00m[33m'[39;49;00m.format(specfil))
[1m[31mE                   OSError: File does not exist /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits[0m

[1m[31m/root/miniconda3/lib/python3.8/site-packages/linetools/spectra/io.py[0m:85: OSError
[31m[1m_______________________________ test_collate_1d ________________________________[0m

tmp_path = PosixPath('/tmp/pytest-of-root/pytest-1/test_collate_1d0')
monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x7fe7944a5220>
redux_out = '/tmp/REDUX_OUT'

[94mdef[39;49;00m [92mtest_collate_1d[39;49;00m(tmp_path, monkeypatch, redux_out):
kastb_dir = os.path.join(redux_out,
[33m'[39;49;00m[33mshane_kast_blue[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m600_4310_d55[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mshane_kast_blue_A[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mScience[39;49;00m[33m'[39;49;00m)
deimos_dir = os.path.join(redux_out,
[33m'[39;49;00m[33mkeck_deimos[39;49;00m[33m'[39;49;00m,[33m'[39;49;00m[33m830G_M_8500[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mScience[39;49;00m[33m'[39;49;00m)

[90m# Build up arguments for testing command line parsing[39;49;00m
args = [[33m'[39;49;00m[33m--dry_run[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m--ignore_flux[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m--flux[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m--outdir[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m/outdir2[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m--match[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mra/dec[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m--exclude_slit_bm[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mBOXSLIT[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m--exclude_serendip[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m--wv_rms_thresh[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m0.2[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m--refframe[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33mheliocentric[39;49;00m[33m'[39;49;00m]
spec1d_file = os.path.join(kastb_dir, [33m'[39;49;00m[33mspec1d_b27*fits[39;49;00m[33m'[39;49;00m)
spec1d_args = [[33m'[39;49;00m[33m--spec1d_files[39;49;00m[33m'[39;49;00m, spec1d_file]
tol_args = [[33m'[39;49;00m[33m--tolerance[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m0.03d[39;49;00m[33m'[39;49;00m]
alt_spec1d = os.path.join(deimos_dir, [33m'[39;49;00m[33mspec1d_DE.20100913.22358*fits[39;49;00m[33m'[39;49;00m)
expanded_spec1d = os.path.join(kastb_dir,
[33m'[39;49;00m[33mspec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits[39;49;00m[33m'[39;49;00m)
expanded_alt_spec1d = os.path.join(deimos_dir,
[33m'[39;49;00m[33mspec1d_DE.20100913.22358-CFHQS1_DEIMOS_20100913T061231.334.fits[39;49;00m[33m'[39;49;00m)
spec1d_args = [[33m'[39;49;00m[33m--spec1d_files[39;49;00m[33m'[39;49;00m, expanded_spec1d]

[90m# Create config files for testing config file parsing[39;49;00m
config_file_full = [96mstr[39;49;00m(tmp_path / [33m"[39;49;00m[33mtest_collate1d_full.collate1d[39;49;00m[33m"[39;49;00m)

[94mwith[39;49;00m [96mopen[39;49;00m(config_file_full, [33m"[39;49;00m[33mw[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m f:
[96mprint[39;49;00m([33m"[39;49;00m[33m[coadd1d][39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mex_value = BOX[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33m[collate1d][39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mdry_run = False[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mflux = False[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33moutdir = /outdir[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mignore_flux = False[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mtolerance = 4.0[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mmatch_using = [39;49;00m[33m'[39;49;00m[33mpixel[39;49;00m[33m'[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mexclude_slit_trace_bm = BADREDUCE[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mexclude_serendip = False[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mwv_rms_thresh = 0.1[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mrefframe = [39;49;00m[33m'[39;49;00m[33mobserved[39;49;00m[33m'[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mspec1d read[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mfilename[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m(alt_spec1d, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mspec1d end[39;49;00m[33m"[39;49;00m, file=f)

config_file_spec1d = [96mstr[39;49;00m(tmp_path / [33m"[39;49;00m[33mtest_collate1d_spec1d_only.collate1d[39;49;00m[33m"[39;49;00m)
[94mwith[39;49;00m [96mopen[39;49;00m(config_file_spec1d, [33m"[39;49;00m[33mw[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m f:
[96mprint[39;49;00m([33m"[39;49;00m[33m[collate1d][39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mspec1d read[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mfilename[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m(spec1d_file, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mspec1d end[39;49;00m[33m"[39;49;00m, file=f)

config_file_coadd1d = [96mstr[39;49;00m(tmp_path / [33m"[39;49;00m[33mtest_collate1d_spec1d_only.coadd1d[39;49;00m[33m"[39;49;00m)
[94mwith[39;49;00m [96mopen[39;49;00m(config_file_coadd1d, [33m"[39;49;00m[33mw[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m f:
[96mprint[39;49;00m([33m"[39;49;00m[33m[coadd1d][39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mex_value = BOX[39;49;00m[33m"[39;49;00m, file=f)
[90m# Need a data block[39;49;00m
[96mprint[39;49;00m([33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mcoadd1d read[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mfilename | obj_id[39;49;00m[33m"[39;49;00m, file=f)
[96mprint[39;49;00m(alt_spec1d + [33m'[39;49;00m[33m | DUMMY[39;49;00m[33m'[39;49;00m, file=f)
[96mprint[39;49;00m([33m"[39;49;00m[33mcoadd1d end[39;49;00m[33m"[39;49;00m, file=f)

[90m# Args only, nospec1d files should exit with an errror[39;49;00m
[94mwith[39;49;00m pytest.raises([96mSystemExit[39;49;00m):
parsed_args = scripts.collate_1d.Collate1D.parse_args(args + tol_args)
params, spectrograph, expanded_spec1d_files \
= scripts.collate_1d.build_parameters(parsed_args)

[90m# Everything passed via command line[39;49;00m
parsed_args = scripts.collate_1d.Collate1D.parse_args(args + tol_args + spec1d_args)
>       params, spectrograph, expanded_spec1d_files = scripts.collate_1d.build_parameters(parsed_args)

[1m[31m/PypeIt-development-suite/vet_tests/test_scripts.py[0m:252:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/scripts/collate_1d.py[0m:504: in build_parameters
spectrograph = load_spectrograph(spec1d_files[[94m0[39;49;00m])
[1m[31m/PypeIt/pypeit/spectrographs/util.py[0m:60: in load_spectrograph
msgs.error([33m'[39;49;00m[33m{0}[39;49;00m[33m is not a supported spectrograph.[39;49;00m[33m'[39;49;00m.format(spec))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <pypeit.pypmsgs.Messages object at 0x7fe7b1ea15e0>
msg = '/tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits is not a supported spectrograph.'

[94mdef[39;49;00m [92merror[39;49;00m([96mself[39;49;00m, msg):
[33m"""[39;49;00m
[33m    Print an error message[39;49;00m
[33m    """[39;49;00m
premsg = [33m'[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m+[96mself[39;49;00m._start + [96mself[39;49;00m._white_RD + [33m'[39;49;00m[33m[ERROR]   ::[39;49;00m[33m'[39;49;00m + [96mself[39;49;00m._end + [33m'[39;49;00m[33m [39;49;00m[33m'[39;49;00m
[96mself[39;49;00m._print(premsg, msg)

[90m# Close log file[39;49;00m
[90m# TODO: This no longer "closes" the QA plots[39;49;00m
[96mself[39;49;00m.close()

>       [94mraise[39;49;00m PypeItError(msg)
[1m[31mE       pypeit.pypmsgs.PypeItError: /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits is not a supported spectrograph.[0m

[1m[31m/PypeIt/pypeit/pypmsgs.py[0m:185: PypeItError
----------------------------- Captured stdout call -----------------------------
Missing arguments: A list of spec1d files must be specified via command line or config file.
usage: pytest [-h] [--spec1d_files [SPEC1D_FILES [SPEC1D_FILES ...]]]
[--par_outfile PAR_OUTFILE] [--outdir OUTDIR]
[--spec1d_outdir SPEC1D_OUTDIR] [--tolerance TOLERANCE]
[--match_using MATCH_USING] [--dry_run] [--ignore_flux] [--flux]
[--exclude_slit_bm [EXCLUDE_SLIT_BM [EXCLUDE_SLIT_BM ...]]]
[--exclude_serendip] [--wv_rms_thresh WV_RMS_THRESH]
[--refframe {observed,heliocentric,barycentric}]
[input_file]
----------------------------- Captured stderr call -----------------------------

[1;37;41m[ERROR]   ::[0m [1;34mutil.py 60 load_spectrograph()[0m - /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec1d_b27-J1217p3905_KASTb_20150520T045733.560.fits is not a supported spectrograph.
[31m[1m_______________________________ test_parse_slits _______________________________[0m

redux_out = '/tmp/REDUX_OUT'

[94mdef[39;49;00m [92mtest_parse_slits[39;49;00m(redux_out):
kastb_dir = os.path.join(redux_out,
[33m'[39;49;00m[33mshane_kast_blue[39;49;00m[33m'[39;49;00m, [33m'[39;49;00m[33m600_4310_d55[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mshane_kast_blue_A[39;49;00m[33m'[39;49;00m)
slits_file = os.path.join(kastb_dir, [33m'[39;49;00m[33mMasters[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mMasterSlits_A_1_DET01.fits.gz[39;49;00m[33m'[39;49;00m)
spec2d_file = os.path.join(kastb_dir, [33m'[39;49;00m[33mScience[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mspec2d_b27-J1217p3905_KASTb_20150520T045733.560.fits[39;49;00m[33m'[39;49;00m)

[90m# Slits[39;49;00m
pargs = parse_slits.ParseSlits.parse_args([slits_file])
parse_slits.ParseSlits.main(pargs)

[90m# Spec2d[39;49;00m
pargs = parse_slits.ParseSlits.parse_args([spec2d_file])
>       parse_slits.ParseSlits.main(pargs)

[1m[31m/PypeIt-development-suite/vet_tests/test_scripts.py[0m:389:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/scripts/parse_slits.py[0m:53: in main
hdul = fits.open(pargs.input_file)
[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/hdu/hdulist.py[0m:175: in fitsopen
[94mreturn[39;49;00m HDUList.fromfile(name, mode, memmap, save_backup, cache,
[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/hdu/hdulist.py[0m:410: in fromfile
[94mreturn[39;49;00m [96mcls[39;49;00m._readfrom(fileobj=fileobj, mode=mode, memmap=memmap,
[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/hdu/hdulist.py[0m:1060: in _readfrom
fileobj = _File(fileobj, mode=mode, memmap=memmap, cache=cache)
[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/file.py[0m:170: in __init__
[96mself[39;49;00m._open_filename(fileobj, mode, overwrite)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <astropy.io.fits.file._File None>
filename = '/tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec2d_b27-J1217p3905_KASTb_20150520T045733.560.fits'
mode = 'readonly', overwrite = False

[94mdef[39;49;00m [92m_open_filename[39;49;00m([96mself[39;49;00m, filename, mode, overwrite):
[33m"""Open a FITS file from a filename string."""[39;49;00m

[94mif[39;49;00m mode == [33m'[39;49;00m[33mostream[39;49;00m[33m'[39;49;00m:
[96mself[39;49;00m._overwrite_existing(overwrite, [94mNone[39;49;00m, [94mTrue[39;49;00m)

[94mif[39;49;00m os.path.exists([96mself[39;49;00m.name):
[94mwith[39;49;00m [96mopen[39;49;00m([96mself[39;49;00m.name, [33m'[39;49;00m[33mrb[39;49;00m[33m'[39;49;00m) [94mas[39;49;00m f:
magic = f.read([94m4[39;49;00m)
[94melse[39;49;00m:
magic = [33mb[39;49;00m[33m'[39;49;00m[33m'[39;49;00m

ext = os.path.splitext([96mself[39;49;00m.name)[[94m1[39;49;00m]

[94mif[39;49;00m [95mnot[39;49;00m [96mself[39;49;00m._try_read_compressed([96mself[39;49;00m.name, magic, mode, ext=ext):
>           [96mself[39;49;00m._file = [96mopen[39;49;00m([96mself[39;49;00m.name, IO_FITS_MODES[mode])
[1m[31mE           FileNotFoundError: [Errno 2] No such file or directory: '/tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Science/spec2d_b27-J1217p3905_KASTb_20150520T045733.560.fits'[0m

[1m[31m/root/miniconda3/lib/python3.8/site-packages/astropy/io/fits/file.py[0m:562: FileNotFoundError
----------------------------- Captured stdout call -----------------------------
SpatID   MaskID   MaskOFF (pix)  Flags
0175     0000     0.00           None
----------------------------- Captured stderr call -----------------------------
[1;32m[INFO]    ::[0m [1;34mdatamodel.py 1539 from_file()[0m - Loading SlitTraceSet from /tmp/REDUX_OUT/shane_kast_blue/600_4310_d55/shane_kast_blue_A/Masters/MasterSlits_A_1_DET01.fits.gz
[31m[1m______________________________ test_lris_slitmask ______________________________[0m

redux_out = '/tmp/REDUX_OUT'

[94mdef[39;49;00m [92mtest_lris_slitmask[39;49;00m(redux_out):
[90m# Check that the LRIS slitmask was read in and used![39;49;00m
file_path = os.path.join(redux_out,
[33m'[39;49;00m[33mkeck_lris_blue[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mmulti_600_4000_slitmask[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mScience[39;49;00m[33m'[39;49;00m,
[33m'[39;49;00m[33mspec1d_LB.20200129.48812-frb19071_LRISb_20200129T133332.890.fits[39;49;00m[33m'[39;49;00m)
[90m# Load[39;49;00m
>       specObjs = specobjs.SpecObjs.from_fitsfile(file_path)

[1m[31m/PypeIt-development-suite/vet_tests/test_slitmask.py[0m:236:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
[1m[31m/PypeIt/pypeit/specobjs.py[0m:75: in from_fitsfile
hdul = io.fits_open(fits_file)
[1m[31m/PypeIt/pypeit/io.py[0m:751: in fits_open
msgs.error([33mf[39;49;00m[33m'[39;49;00m[33m{[39;49;00mfilename[33m}[39;49;00m[33m does not exist![39;49;00m[33m'[39;49;00m)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <pypeit.pypmsgs.Messages object at 0x7fe7b1ea15e0>
msg = '/tmp/REDUX_OUT/keck_lris_blue/multi_600_4000_slitmask/Science/spec1d_LB.20200129.48812-frb19071_LRISb_20200129T133332.890.fits does not exist!'

[94mdef[39;49;00m [92merror[39;49;00m([96mself[39;49;00m, msg):
[33m"""[39;49;00m
[33m    Print an error message[39;49;00m
[33m    """[39;49;00m
premsg = [33m'[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m+[96mself[39;49;00m._start + [96mself[39;49;00m._white_RD + [33m'[39;49;00m[33m[ERROR]   ::[39;49;00m[33m'[39;49;00m + [96mself[39;49;00m._end + [33m'[39;49;00m[33m [39;49;00m[33m'[39;49;00m
[96mself[39;49;00m._print(premsg, msg)

[90m# Close log file[39;49;00m
[90m# TODO: This no longer "closes" the QA plots[39;49;00m
[96mself[39;49;00m.close()

>       [94mraise[39;49;00m PypeItError(msg)
[1m[31mE       pypeit.pypmsgs.PypeItError: /tmp/REDUX_OUT/keck_lris_blue/multi_600_4000_slitmask/Science/spec1d_LB.20200129.48812-frb19071_LRISb_20200129T133332.890.fits does not exist![0m

[1m[31m/PypeIt/pypeit/pypmsgs.py[0m:185: PypeItError
----------------------------- Captured stderr call -----------------------------

[1;37;41m[ERROR]   ::[0m [1;34mio.py 751 fits_open()[0m - /tmp/REDUX_OUT/keck_lris_blue/multi_600_4000_slitmask/Science/spec1d_LB.20200129.48812-frb19071_LRISb_20200129T133332.890.fits does not exist!
=========================== short test summary info ============================
FAILED ../../PypeIt-development-suite/vet_tests/test_flexure.py::test_spat_flexure
FAILED ../../PypeIt-development-suite/vet_tests/test_fluxspec.py::test_from_sens_func
FAILED ../../PypeIt-development-suite/vet_tests/test_scripts.py::test_show_1dspec
FAILED ../../PypeIt-development-suite/vet_tests/test_scripts.py::test_show_2dspec
FAILED ../../PypeIt-development-suite/vet_tests/test_scripts.py::test_view_fits_list
FAILED ../../PypeIt-development-suite/vet_tests/test_scripts.py::test_compare_sky
FAILED ../../PypeIt-development-suite/vet_tests/test_scripts.py::test_collate_1d
FAILED ../../PypeIt-development-suite/vet_tests/test_scripts.py::test_parse_slits
FAILED ../../PypeIt-development-suite/vet_tests/test_slitmask.py::test_lris_slitmask
[31m=========== [31m[1m9 failed[0m, [32m16 passed[0m, [33m1538 warnings[0m[31m in 1064.34s (0:17:44)[0m[31m ===========[0m


Test Summary
--------------------------------------------------------
[1;31m--- PYTEST PYPEIT UNIT TESTS FAILED [0m[31m [31m[1m2 failed[0m, [32m199 passed[0m, [33m1051 warnings[0m[31m in 449.55s (0:07:29)[0m[31m [0m[1;32m---[0m
[1;31m--- PYTEST UNIT TESTS FAILED [0m[31m [31m[1m1 failed[0m, [32m117 passed[0m, [33m1749 warnings[0m[31m in 2699.13s (0:44:59)[0m[31m [0m[1;32m---[0m
[1;31m--- PYTEST VET TESTS FAILED [0m[31m [31m[1m9 failed[0m, [32m16 passed[0m, [33m1538 warnings[0m[31m in 1064.34s (0:17:44)[0m[31m [0m[1;32m---[0m
[1;31m--- PYPEIT DEVELOPMENT SUITE FAILED 54/126 TESTS  ---[0m
Failed tests:
    lbt_mods/MODS2R_Longslit pypeit 
    keck_deimos/830G_M_9000_dither pypeit 
    keck_deimos/1200G_M_7750 pypeit 
    keck_deimos/600ZD_tilted pypeit 
    lbt_mods/MODS1R_Longslit pypeit 
    mmt_binospec/Longslit_G600 pypeit 
    keck_deimos/1200B_M_5200 pypeit 
    keck_lris_red/multi_1200_9000_d680_1x2 pypeit 
    gemini_gmos/GS_HAM_R400_860 pypeit 
    keck_lris_red/multi_400_8500_d560 pypeit 
    keck_deimos/600ZD_M_6500 pypeit 
    keck_lris_red/multi_600_5000_d560 pypeit 
    keck_lris_red/multi_1200_9000_d680 pypeit 
    gemini_gmos/GN_HAM_NS_B600_620 pypeit 
    keck_deimos/900ZD_M_6000 pypeit 
    gemini_gmos/GN_E2V_MULTI_R400_600 pypeit 
    keck_deimos/QL pypeit_ql
    ldt_deveny/DV1 pypeit 
    gemini_gmos/GS_HAM_MULTI_R400_700 pypeit 
    keck_lris_red/long_600_10000_d680 pypeit 
    keck_deimos/830G_LVM_8400 pypeit 
    keck_deimos/1200B_LVM_5200 pypeit 
    keck_deimos/830G_L_8100 pypeit 
    keck_lris_blue/multi_300_5000_d680 pypeit 
    keck_deimos/900ZD_LVM_5500 pypeit 
    keck_deimos/830G_M_8100_26 pypeit 
    keck_lris_red_mark4/long_400_8500_d560 pypeit 
    keck_lris_red/long_600_7500_d560 pypeit 
    keck_deimos/1200G_M_5500 pypeit 
    gemini_gmos/GS_HAM_R400_700 pypeit 
    gemini_gmos/GN_HAM_R400_885 pypeit 
    keck_lris_blue_orig/long_600_4000_d500 pypeit 
    keck_lris_blue/multi_600_4000_d560 pypeit 
    ldt_deveny/DV5 pypeit 
    keck_lris_blue/multi_600_4000_slitmask pypeit 
    ldt_deveny/DV2 pypeit 
    soar_goodman_red/M1 pypeit 
    shane_kast_red/600_7500_d57 pypeit 
    vlt_fors2/300I pypeit 
    ldt_deveny/DV9 pypeit 
    ldt_deveny/DV6 pypeit 
    keck_lris_red_mark4/long_600_10000_d680 pypeit 
    shane_kast_red/600_5000_d46 pypeit 
    keck_lris_red_orig/long_300_5000 pypeit 
    ntt_efosc2/gr5 pypeit 
    keck_lris_blue/long_400_3400_d560 pypeit 
    shane_kast_blue/600_4310_d55 pypeit 
    ntt_efosc2/gr6 pypeit 
    keck_lris_blue/long_600_4000_d560 pypeit 
    shane_kast_red/1200_5000_d57 pypeit 
    soar_goodman_red/M2 pypeit 
    shane_kast_blue/452_3306_d57 pypeit 
    shane_kast_blue/830_3460_d46 pypeit 
    shane_kast_red/600_7500_d55_ret pypeit 
Skipped tests:
    keck_deimos/830G_M_9000_dither pypeit_coadd_2dspec
    keck_lris_red/multi_1200_9000_d680_1x2 pypeit (ignore masters)
    gemini_gmos/GS_HAM_R400_860 pypeit standards 
    gemini_gmos/GS_HAM_R400_860 pypeit_sensfunc
    gemini_gmos/GS_HAM_R400_860 pypeit_flux_setup
    gemini_gmos/GS_HAM_R400_860 pypeit_flux
    gemini_gmos/GS_HAM_R400_860 pypeit_coadd_1dspec
    keck_lris_red/multi_400_8500_d560 pypeit (ignore masters)
    keck_deimos/600ZD_M_6500 pypeit_flux
    keck_lris_red/multi_600_5000_d560 pypeit (ignore masters)
    keck_lris_red/multi_1200_9000_d680 pypeit (ignore masters)
    keck_lris_red/long_600_10000_d680 pypeit (ignore masters)
    keck_deimos/900ZD_LVM_5500 pypeit_sensfunc
    keck_deimos/900ZD_LVM_5500 pypeit_flux
    keck_lris_red/long_600_7500_d560 pypeit (ignore masters)
    gemini_gmos/GS_HAM_R400_700 pypeit_sensfunc
    gemini_gmos/GS_HAM_R400_700 pypeit_flux
    gemini_gmos/GS_HAM_R400_700 pypeit_coadd_1dspec
    gemini_gmos/GS_HAM_R400_700 pypeit_tellfit
    keck_lris_blue/multi_600_4000_d560 pypeit_coadd_2dspec
    keck_lris_red_mark4/long_600_10000_d680 pypeit_sensfunc
    keck_lris_red_mark4/long_600_10000_d680 pypeit_ql
    shane_kast_blue/600_4310_d55 pypeit_sensfunc
    shane_kast_blue/600_4310_d55 pypeit_flux_setup
    shane_kast_blue/600_4310_d55 pypeit_flux
    shane_kast_blue/600_4310_d55 pypeit_coadd_1dspec
    shane_kast_blue/600_4310_d55 pypeit_ql
Testing Started at 2022-09-25T14:34:48.872562
Testing Completed at 2022-09-26T03:31:35.464441
Total Time: 12:56:46.591879
